---
title: Myymälöiden asiakashallinta
description: Tässä ohjeaiheessa on tietoja siitä, miten vähittäismyyjät voivat ottaa käyttöön asiakashallintatoimintoja myyntipisteessä Microsoft Dynamics 365 Commercessa.
author: josaw1
ms.date: 05/25/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: RetailOperations
audience: Application User, IT Pro
ms.reviewer: v-chgri
ms.search.region: Global
ms.search.industry: retail
ms.author: shajain
ms.search.validFrom: 2021-01-31
ms.dyn365.ops.version: 10.0.14
ms.openlocfilehash: dd17593d84a8bf262712a84b11829f8ec6c49049
ms.sourcegitcommit: c5c8f19a696ad4a3d68dffd63bfe7b484b999d2b
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 05/25/2021
ms.locfileid: "6097205"
---
# <a name="customer-management-in-stores"></a><span data-ttu-id="d4e1c-103">Myymälöiden asiakashallinta</span><span class="sxs-lookup"><span data-stu-id="d4e1c-103">Customer management in stores</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="d4e1c-104">Tässä ohjeaiheessa on tietoja siitä, miten vähittäismyyjät voivat ottaa käyttöön asiakashallintatoimintoja myyntipisteessä Microsoft Dynamics 365 Commercessa.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-104">This topic explains how retailers can enable customer management capabilities at the point of sale (POS) in Microsoft Dynamics 365 Commerce.</span></span>

<span data-ttu-id="d4e1c-105">On tärkeää, että myymälän myyjät voivat luoda ja muokata asiakastietueita myyntipisteessä.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-105">It's important that store associates can create and edit customer records at the POS.</span></span> <span data-ttu-id="d4e1c-106">Näin he voivat siepata asiakastietojen päivityksiä, kuten sähköpostiosoitteen, puhelinnumeron ja osoitteen.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-106">In that way, they can capture any updates to customer information such as the email address, phone number, and address.</span></span> <span data-ttu-id="d4e1c-107">Näistä tiedoista on hyötyä esimerkiksi markkinoinnissa, koska näiden järjestelmien tehokkuus riippuu asiakkaiden tietojen tarkkuudesta.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-107">This information is helpful in downstream systems such as marketing, because the effectiveness of those systems depends on the accuracy of their customer data.</span></span>

<span data-ttu-id="d4e1c-108">Myyjät voivat käynnistää asiakkaan luonnin työnkulun kahdesta myyntipisteen kohdasta.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-108">Sales associates can trigger the customer creation workflow from two POS entry points.</span></span> <span data-ttu-id="d4e1c-109">He voivat valita painikkeen, joka on yhdistetty **Asiakas – lisää** -toimintoon, tai he voivat valita hakutulossivulla sovelluspalkissa **Luo asiakas**.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-109">They can select a button that is mapped to the **Customer add** operation, or they can select **Create customer** on the app bar on the search results page.</span></span> <span data-ttu-id="d4e1c-110">Molemmissa tapauksissa näyttöön tulee **Uusi asiakas** -valintaikkuna, jossa myyjät voivat syöttää tarvittavat asiakastiedot, kuten asiakkaan nimen, sähköpostiosoitteen, puhelinnumeron, osoitteen sekä mahdolliset yrityksen kannalta olennaiset tiedot.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-110">In both cases, the **New customer** dialog box appears, where sales associates can enter required customer details, such as the customer's name, email address, phone number, address, and any additional information that is relevant to the business.</span></span> <span data-ttu-id="d4e1c-111">Nämä lisätiedot voi siepata käyttäen asiakkaaseen liittyviä asiakkaan määritteitä.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-111">That additional information can be captured by using the customer attributes that are associated with the customer.</span></span> <span data-ttu-id="d4e1c-112">Lisätietoja asiakkaan määritteistä on kohdassa [Asiakkaan määritteet](dev-itpro/customer-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="d4e1c-112">For more information about customer attributes, see [Customer attributes](dev-itpro/customer-attributes.md).</span></span>

<span data-ttu-id="d4e1c-113">Myyjät voivat myös siepata toissijaisia sähköpostiosoitteita ja puhelinnumeroita.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-113">Sales associates can also capture secondary email addresses and phone numbers.</span></span> <span data-ttu-id="d4e1c-114">Lisäksi he voivat siepata asiakkaan toivomuksen markkinointitietojen vastaanottamisesta minkä tahansa toissijaisen sähköpostiosoitteen tai puhelinnumeron kautta.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-114">Additionally, they can capture the customer's preference about receiving marketing information via any of those secondary email addresses or phone numbers.</span></span> <span data-ttu-id="d4e1c-115">Jotta tämä ominaisuus voidaan ottaa käyttöön, vähittäismyyjien on otettava käyttöön **Kerää useita sähköpostiviestejä ja puhelinnumeroita sekä suostumus näille yhteyshenkilöille** -toiminnon **ominaisuudenhallinnan** työtilassa Commerce headquartersissa (**Järjestelmän hallinta \> Työtilat \> Ominaisuuksien hallinta)**.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-115">To enable this capability, retailers must turn on the **Capture multiple emails and phone numbers and consent for marketing on these contacts** feature in the **Feature management** workspace in Commerce headquarters (**Systems administration \> Workspaces \> Feature management**).</span></span>

## <a name="default-customer-properties"></a><span data-ttu-id="d4e1c-116">Asiakkaan oletusominaisuudet</span><span class="sxs-lookup"><span data-stu-id="d4e1c-116">Default customer properties</span></span>

<span data-ttu-id="d4e1c-117">Vähittäismyyjät voivat käyttää Commerce headquartersin **Kaikki myymälät** -sivua (**Retail ja Commerce \> Kanavat \> Myymälät**), kun halutaan liittää oletusasiakas kuhunkin myymälään.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-117">Retailers can use the **All stores** page in Commerce headquarters (**Retail and Commerce \> Channels \> Stores**) to associate a default customer with each store.</span></span> <span data-ttu-id="d4e1c-118">Commerce kopioi sitten oletusasiakkaalle määritetyt ominaisuudet kaikkiin uusiin asiakastietueisiin, jotka luodaan.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-118">Commerce then copies the properties that are defined for the default customer to all new customer records that are created.</span></span> <span data-ttu-id="d4e1c-119">Esimerkiksi **Luo asiakas** -valintaikkunassa näkyvät myymälään liitetyltä oletusasiakkaalta periytyvät ominaisuudet.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-119">For example, the **Create customer** dialog box shows properties that are inherited from the default customer that is associated with the store.</span></span> <span data-ttu-id="d4e1c-120">Ominaisuuksia ovat **asiakastyyppi**, **asiakasryhmä**, **kuittiasetus**, **kuittisähköposti** **valuutta** ja **kieli**.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-120">Those properties include the **customer type**, **customer group**, **receipt option**, **receipt email**, **currency**, and **language**.</span></span> <span data-ttu-id="d4e1c-121">Myös mahdolliset **liitokset** (asiakkaiden ryhmittelyt) periytyvät myös oletusasiakkaalta.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-121">Any **affiliations** (groupings of customers) are also inherited from the default customer.</span></span> <span data-ttu-id="d4e1c-122">**Taloushallinnon dimensiot** periytyvät kuitenkin oletusasiakkaaseen liittyvältä asiakasryhmältä, ei itse oletusasiakkaalta.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-122">However, **financial dimensions** are inherited from the customer group that is associated with the default customer, not from the default customer itself.</span></span>

> [!NOTE]
> <span data-ttu-id="d4e1c-123">**Kuittisähköposti**-arvo kopioidaan oletusasiakkaalta vain, jos juuri luoduille asiakkaille ei ole määritetty kuitin sähköpostitunnusta.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-123">The **receipt email** value gets copied from the default customer only if the receipt email ID is not provided for the newly created customers.</span></span> <span data-ttu-id="d4e1c-124">Jos kuittien sähköpostitunnus on oletusasiakkaalla, kaikki sähköisen kaupan sivustosta luodut asiakkaat saavat saman kuitin sähköpostitunnuksen kuin käyttöliittymää ei ole, joka siepaisi asiakkaan sähköpostitunnuksen.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-124">This means that if the receipt email ID is present on the default customer, then all the customers created from the e-commerce site will get the same receipt email ID as there is no user interface to capture the receipt email ID from the customer.</span></span> <span data-ttu-id="d4e1c-125">On suositeltavaa pitää **kuittisähköposti**-kenttä tyhjänä myymälän oletusasiakkaalle ja käyttää sitä vain, jos käytössä on liiketoimintaprosessi, joka riippuu kuitin sähköpostiosoitteesta.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-125">We recommend that you to keep the **receipt email** field empty for the default customer of the store and only use it if you have a business process that depends on a receipt email address being present.</span></span> 

<span data-ttu-id="d4e1c-126">Myyjät voivat siepata useita asiakkaan osoitteita.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-126">Sales associates can capture multiple addresses for a customer.</span></span> <span data-ttu-id="d4e1c-127">Asiakkaan nimi ja puhelinnumero periytyvät kuhunkin osoitteeseen liittyvästä yhteyshenkilöstä.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-127">The customer's name and phone number are inherited from the contact information that is associated with each address.</span></span> <span data-ttu-id="d4e1c-128">Asiakastietueen **Osoitteet**-pikavälilehdessä on **Tarkoitus**-kenttä, jota myyjät voivat muokata.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-128">The **Addresses** FastTab of a customer record includes a **Purpose** field that sales associates can edit.</span></span> <span data-ttu-id="d4e1c-129">Jos asiakastyyppi on **Henkilö**, oletusarvo on **Koti**.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-129">If the customer type is **Person**, the default value is **Home**.</span></span> <span data-ttu-id="d4e1c-130">Jos asiakastyyppi on **Organisaatio**, oletusarvo on **Yritys**.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-130">If the customer type is **Organization**, the default value is **Business**.</span></span> <span data-ttu-id="d4e1c-131">Muita tämän kentän tukemia arvoja ovat **Koti**, **Toimisto**  ja **Postilokero**.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-131">Other values that this field supports include **Home**, **Office**, and **Post box**.</span></span> <span data-ttu-id="d4e1c-132">Osoitteen **Maa**-kentän arvo periytyy Commerce headquartersissa **Toimintayksikkö**-sivulla (**Organisaation hallinto \> Organisaatiot \> Toimintayksiköt**) määritetystä ensisijaisista osoitteesta.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-132">The value of the **Country** field for an address is inherited from the primary address that is specified on the **Operating unit** page in Commerce headquarters at **Organization administration \> Organizations \> Operating units**.</span></span>

## <a name="sync-customers-and-async-customers"></a><span data-ttu-id="d4e1c-133">Synkroniset asiakkaat ja asynkroniset asiakkaat</span><span class="sxs-lookup"><span data-stu-id="d4e1c-133">Sync customers and Async customers</span></span>

<span data-ttu-id="d4e1c-134">Commercessa asiakkaan luomisessa on kaksi eri tilaa: Synkroninen ja Asynkroninen.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-134">In Commerce, there are two modes of customer creation: Synchronous (or Sync) and Asynchronous (or Async).</span></span> <span data-ttu-id="d4e1c-135">Oletusarvon mukaan asiakkaat luodaan synkronisesti.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-135">By default, customers are created synchronously.</span></span> <span data-ttu-id="d4e1c-136">Toisin sanoen ne luodaan Commerce headquarters -sovelluksessa reaaliaikaisesti.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-136">In other words, they are created in Commerce headquarters in real time.</span></span> <span data-ttu-id="d4e1c-137">Synkroninen asiakkaan luontitila on hyödyllinen, koska uusia asiakkaita voidaan hakea välittömästi eri kanavien kautta.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-137">The Sync customer creation mode is beneficial because new customers are immediately searchable across channels.</span></span> <span data-ttu-id="d4e1c-138">Sillä on kuitenkin myös haittapuolensa.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-138">However, it also has a drawback.</span></span> <span data-ttu-id="d4e1c-139">Koska se luo [Commerce Data Exchange: Real-time Service](dev-itpro/define-retail-channel-communications-cdx.md#realtime-service) -kutsuja Commerce headquarters -sovelluksessa, suorituskykyyn voi vaikuttaa, jos tehdään samanaikaisia asiakkaan luontikutsuja.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-139">Because it generates [Commerce Data Exchange: Real-time Service](dev-itpro/define-retail-channel-communications-cdx.md#realtime-service) calls to Commerce headquarters, performance can be affected if many concurrent customer creation calls are made.</span></span>

<span data-ttu-id="d4e1c-140">Jos **Luo asiakas asynkronisessa tilassa** -asetus on **Kyllä** myymälän toimintoprofiilissa (**Retail ja Commerce \> Kanavan asetukset \> Verkkokaupan määritys \> Toimintoprofiilit**), Real-time Service -kutsuja ei käytetä asiakastietueiden luomiseen kanavatietokannassa.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-140">If the **Create customer in async mode** option is set to **Yes** in the store's functionality profile (**Retail and Commerce \> Channel setup \> Online store setup \> Functionality profiles**), Real-time Service calls aren't used to create customer records in the channel database.</span></span> <span data-ttu-id="d4e1c-141">Asynroninen asiakkaan luontitila ei vaikuta Commerce headquarters -ohjelman suorituskykyyn.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-141">The Async customer creation mode doesn't affect the performance of Commerce headquarters.</span></span> <span data-ttu-id="d4e1c-142">Jokaiselle uudelle asynkroniselle asiakastietueelle liitetään väliaikainen, yleinen yksilöivä tunnus (GUID), jota käytetään asiakastilin tunnuksena.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-142">A temporary globally unique identifier (GUID) is assigned to every new Async customer record and used as the customer account ID.</span></span> <span data-ttu-id="d4e1c-143">GUID ei näy myyntipisteen käyttäjille.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-143">This GUID isn't shown to POS users.</span></span> <span data-ttu-id="d4e1c-144">Sen sijaan käyttäjät näkevät **Odottaa synkronointia** asiakastilin tunnuksena.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-144">Instead, those users will see **Pending sync** as the customer account ID.</span></span> <span data-ttu-id="d4e1c-145">Vaikka tämä konfiguraatio pakottaa asynkroniseen asiakkaiden luontiin, asiakastietueiden muokkaaminen tapahtuu aina synkronisesti.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-145">Although this configuration forces customers to be created asynchronously, note that edits to customer records are always done synchronously.</span></span>

### <a name="convert-async-customers-to-sync-customers"></a><span data-ttu-id="d4e1c-146">Asynkronisten asiakkaiden muuntaminen asynkronisiksi asiakkaiksi</span><span class="sxs-lookup"><span data-stu-id="d4e1c-146">Convert Async customers to Sync customers</span></span>

<span data-ttu-id="d4e1c-147">Jos haluat muuntaa asynkroniset asiakkaat synkronoiduksi asiakkaiksi, sinun on ensin suoritettava P-työ, jotta asynkroniset asiakkaat voidaan lähettää Commerce headquarters -ohjelmaan.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-147">To convert Async customers to Sync customers, you must first run the P-job to send the Async customers to Commerce headquarters.</span></span> <span data-ttu-id="d4e1c-148">Suorita sitten **Synkronoi asiakkaat ja yrityskumppanit asynkronisesta tilasta** -työ asiakastilien tunnusten luontia varten.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-148">Then run the **Synchronize customers and business partners from async mode** job to create customer account IDs.</span></span> <span data-ttu-id="d4e1c-149">Synkronoi lopuksi uudet asiakastilitunnukset kanaviin suorittamalla **1010**-työ.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-149">Finally, run the **1010** job to sync the new customer account IDs to the channels.</span></span>

### <a name="async-customer-limitations"></a><span data-ttu-id="d4e1c-150">Asynkronisen asiakkaan rajoitukset</span><span class="sxs-lookup"><span data-stu-id="d4e1c-150">Async customer limitations</span></span>

<span data-ttu-id="d4e1c-151">Asynkronisen asiakkaan toiminnallisuuteen liittyy tällä hetkellä seuraavat rajoitukset:</span><span class="sxs-lookup"><span data-stu-id="d4e1c-151">The Async customer functionality currently has the following limitations:</span></span>

- <span data-ttu-id="d4e1c-152">Asynkronisen asiakkaan tietueita ei voi muokata, ellei asiakasta ole luotu Commerce headquarters -sovelluksessa ja uutta asiakastilin tunnusta ole synkronoitu takaisin kanavaan.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-152">Async customer records can't be edited unless the customer has been created in Commerce headquarters and the new customer account ID has been synced back to the channel.</span></span>
- <span data-ttu-id="d4e1c-153">Liitoksia ei voi liittää asynkronisiin asiakkaisiin.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-153">Affiliations can't be associated with Async customers.</span></span> <span data-ttu-id="d4e1c-154">Siksi uudet asynkroniset asiakkaat eivät peri liitoksia oletusasiakkaalta.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-154">Therefore, new Async customers don't inherit affiliations from the default customer.</span></span>
- <span data-ttu-id="d4e1c-155">Kanta-asiakaskortteja ei voi myöntää asynkronisille asiakkaille, ellei uutta asiakastilitunnusta ole synkronoitu takaisin kanavaan.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-155">Loyalty cards can't be issued to Async customers unless the new customer account ID has been synced back to the channel.</span></span>
- <span data-ttu-id="d4e1c-156">Toissijaisia sähköpostiosoitteita ja puhelinnumeroita ei voi siepata asynkronisille asiakkaille.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-156">Secondary email addresses and phone numbers can't be captured for Async customers.</span></span>

### <a name="customer-creation-in-pos-offline-mode"></a><span data-ttu-id="d4e1c-157">Asiakkaan luonti myyntipisteen offline-tilassa</span><span class="sxs-lookup"><span data-stu-id="d4e1c-157">Customer creation in POS offline mode</span></span>

<span data-ttu-id="d4e1c-158">Jos myyntipiste siirtyy offline-tilaan, kun asynkronisen asiakkaan luontitila on käytössä, uudet asiakastietueet luodaan asynkronisesti.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-158">If the POS goes offline while the Async customer creation mode is enabled, new customer records are created asynchronously.</span></span> <span data-ttu-id="d4e1c-159">Jos myyntipiste siirtyy offline-tilaan, kun asynkronisen asiakkaan luontitila on poistettu käytöstä, järjestelmä siirtyy automaattisesti asynkroniseen asiakkaan luontitilaan.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-159">If the POS goes offline while the Async customer creation mode is disabled, the system automatically switches to the Async customer creation mode.</span></span> <span data-ttu-id="d4e1c-160">Toisin sanoen asiakstietueet voidaan luoda asynkronisesest, vaikka asynkroninen asiakkaan luontitila ei ole käytössä.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-160">In other words, customer records might be created asynchronously even if the Async customer creation mode is disabled.</span></span> <span data-ttu-id="d4e1c-161">Siksi Commerce headquartersin järjestelmänvalvojien on luotava ja ajoitettava toistuva erätyö P-työlle, **Synkronoi asiakkaat ja yrityskumppanit asynkronisesta tilasta** -työlle ja **1010**-työlle, jotta kaikki asynkroniset asiakkaat muunnetaan Commerce headquartersissa synkronoiduiksi asiakkaiksi.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-161">Therefore, Commerce headquarters administrators must create and schedule a recurring batch job for the P-job, the **Synchronize customers and business partners from async mode** job, and the **1010** job, so that any Async customers are converted to Sync customers in Commerce headquarters.</span></span>

> [!NOTE]
> <span data-ttu-id="d4e1c-162">Jos **Suodata jaetut asiakastietotalut** -asetus on **Kyllä** **Commerce-kanavan rakenne** -sivulla (**Retail ja Commerce \> Headquartersin asetuukset \> Commerce-ajastus \> Kanavan tietokantaryhmä**), asiakastietueita ei luoda myyntipisteen offline-tilassa.</span><span class="sxs-lookup"><span data-stu-id="d4e1c-162">If the **Filter shared customer data tables** option is set to **Yes** on the **Commerce channel schema** page (**Retail and Commerce \> Headquarters setup \> Commerce scheduler \> Channel database group**), customer records aren't created in POS offline mode.</span></span> <span data-ttu-id="d4e1c-163">Lisätietoja on kohdassa [Offline-tietojen poissulkeminen](dev-itpro/implementation-considerations-cdx.md#offline-data-exclusion).</span><span class="sxs-lookup"><span data-stu-id="d4e1c-163">For more information, see [Offline data exclusion](dev-itpro/implementation-considerations-cdx.md#offline-data-exclusion).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="d4e1c-164">Lisäresurssit</span><span class="sxs-lookup"><span data-stu-id="d4e1c-164">Additional resources</span></span>

[<span data-ttu-id="d4e1c-165">Asiakkaan määritteet</span><span class="sxs-lookup"><span data-stu-id="d4e1c-165">Customer attributes</span></span>](dev-itpro/customer-attributes.md)

[<span data-ttu-id="d4e1c-166">Offline-tietojen poissulkeminen</span><span class="sxs-lookup"><span data-stu-id="d4e1c-166">Offline data exclusion</span></span>](dev-itpro/implementation-considerations-cdx.md#offline-data-exclusion)
