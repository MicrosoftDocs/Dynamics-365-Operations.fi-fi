---
title: Vähittäismyyntikanavien varaston käytettävyyden laskeminen
description: Tässä ohjeaiheessa kerrotaan, miten yritys voi käyttää Microsoft Dynamics 365 Commercea arvioitujen käytettävissä olevan varaston tarkastelussa tuotteille online- ja myymäläkanavissa.
author: hhainesms
ms.date: 04/23/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: hhaines
ms.search.validFrom: 2020-02-11
ms.dyn365.ops.version: Release 10.0.10
ms.openlocfilehash: fdf6df7e393bcc401e770bd1b8afcaedcadc2660
ms.sourcegitcommit: 593438a145672c55ff6a910eabce2939300b40ad
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 04/23/2021
ms.locfileid: "5937431"
---
# <a name="calculate-inventory-availability-for-retail-channels"></a><span data-ttu-id="e236c-103">Vähittäismyyntikanavien varaston käytettävyyden laskeminen</span><span class="sxs-lookup"><span data-stu-id="e236c-103">Calculate inventory availability for retail channels</span></span>

[!include [banner](../includes/banner.md)]
[!include [banner](includes/preview-banner.md)]

<span data-ttu-id="e236c-104">Tässä ohjeaiheessa kerrotaan, miten yritys voi käyttää Microsoft Dynamics 365 Commercea arvioitujen käytettävissä olevan varaston tarkastelussa tuotteille online- ja myymäläkanavissa.</span><span class="sxs-lookup"><span data-stu-id="e236c-104">This topic describes how a company can use Microsoft Dynamics 365 Commerce to view estimated on-hand availability for products in the online and store channels.</span></span>

## <a name="accuracy-of-inventory-availability"></a><span data-ttu-id="e236c-105">Varaston käytettävyyden tarkkuus</span><span class="sxs-lookup"><span data-stu-id="e236c-105">Accuracy of inventory availability</span></span>

<span data-ttu-id="e236c-106">Commerce käyttää useita palvelimia ja tietokantoja skaalattavuuden ja suorituskyvyn varmistamiseksi.</span><span class="sxs-lookup"><span data-stu-id="e236c-106">Commerce uses multiple servers and databases to ensure scalability and performance.</span></span> <span data-ttu-id="e236c-107">Tämän vuoksi on tärkeä ymmärtää, että myyntipisteen kautta saatavat käytettävissä olevat varastoarvot, sähköisen kaupankäynnin varaston saatavuuden ohjelmointirajapinnat ja käytettävissä olevan varaston sivut Commerce-pääkonttorisovelluksessa eivät ehkä ole reaaliaikaisesti täysin tarkkoja.</span><span class="sxs-lookup"><span data-stu-id="e236c-107">Therefore, it's important that you understand that the available inventory values that are provided through the point of sale (POS) application, the e-commerce inventory availability application programming interfaces (APIs), and the on-hand inventory pages in Commerce headquarters might not be 100 percent accurate in real time.</span></span> <span data-ttu-id="e236c-108">Jos tuotteille online- tai myymäläkanavassa luotavia tapahtumia ei ole vielä synkronoitu pääkonttorin, käytettävissä olevan varaston sivut pääkonttorissa eivät ehkä näytä näiden tuotteiden tarkkoja reaaliaikaisia varastoarvoja.</span><span class="sxs-lookup"><span data-stu-id="e236c-108">If transactions that are created for products in the online or store channel haven't yet been synced to headquarters, the on-hand inventory pages in headquarters might not show an accurate real-time inventory value for those products.</span></span> <span data-ttu-id="e236c-109">Vastaavasti jos olet määrittänyt yrityksen siten, että pääkonttorisovelluksen tai muiden integroitujen sovellusten käyttäjät voivat myydä, vastaanottaa, palauttaa tai muuten muuttaa varastoa tai online-varastoa, myyntipiste- tai online-kanava ei välttämättä sisällä kaikkia nimikkeiden tarkan reaaliaikaisen arvon näyttämisessä tarvittavia tietoja.</span><span class="sxs-lookup"><span data-stu-id="e236c-109">Conversely, if you configured your company so that users in headquarters or other integrated applications can sell, receive, return, or otherwise adjust inventory out of a store or online warehouse, the POS or online channel might not have all the information that is required to show accurate real-time values for items.</span></span>

<span data-ttu-id="e236c-110">On tärkeää ymmärtää, että kaikkia työpäivän aikana saatuja käytettävissä olevan varaston tietoja pidetään arvioina.</span><span class="sxs-lookup"><span data-stu-id="e236c-110">It's critical to understand that all on-hand availability data that is provided during the operational day is considered an estimated value.</span></span> <span data-ttu-id="e236c-111">Jos siis yrität vertailla käytettävissä olevan varaston tietoja, jotka sovellus määrittää hyllyjen toteutuneen fyysisen varaston perusteella, tai käytettävissä olevia varastoarvoja, jotka näytetään myyntipisteessä yhdessä käytettävissä olevan varaston tietojen kanssa samassa pääkonttorin varastossa, arvot voivat olla erilaisia.</span><span class="sxs-lookup"><span data-stu-id="e236c-111">Therefore, if you try to compare the on-hand inventory information that the application provides with actual physical inventory on the shelves, or if you try to compare the on-hand values that are shown in POS with the on-hand data that you find for the same warehouse in headquarters, the values might differ.</span></span> <span data-ttu-id="e236c-112">Tämä työpäivän aikainen ero on odotettavissa, eikä sitä tule käsitellä virheenä.</span><span class="sxs-lookup"><span data-stu-id="e236c-112">This difference during the operational day is expected and should not be considered an issue.</span></span> <span data-ttu-id="e236c-113">Jos haluat tarkistaa tiedot ja varmistaa, että myyntipisteen, ohjelmointirajapintojen ja pääkonttorin annetut arvot vastaavat toteutuneita fyysisiä yksiköitä, jotka löytyvät myymälän tai varaston hyllyiltä, tarkistus kannattaa tehdä sen jälkeen kun kanavatoiminnot on pysäytetty päivän jälkeen ja kaikki tapahtumat on synkronoitu oikein pääkonttorin ja kanavien välillä.</span><span class="sxs-lookup"><span data-stu-id="e236c-113">If you want to audit data and make sure that the values provided in POS, APIs, and headquarters match the actual physical units that you find on your store or warehouse shelves, the best time to do it is after channel operations have stopped for the day and all transactions have been correctly synced between headquarters and the channels.</span></span>

## <a name="channel-side-inventory-calculation"></a><span data-ttu-id="e236c-114">Kanavan puolella oleva varastolaskelma</span><span class="sxs-lookup"><span data-stu-id="e236c-114">Channel-side inventory calculation</span></span>

<span data-ttu-id="e236c-115">Kanavanpuoleinen varastolaskenta on mekanismi, jossa Commerce-pääkonttorisovelluksen viimeiset kanavan varastotiedot otetaan lähtökohtana ja huomioidaan lisävarastomuutokset, jotka on tehty kanavan puolella ja jotka eivät sisälly tähän perustasoon käytettävissä olevan varaston lähes reaaliaikaisten arvioitujen laskelmien laskemiseksi.</span><span class="sxs-lookup"><span data-stu-id="e236c-115">The channel-side inventory calculation is a mechanism that takes the last-known channel inventory data in Commerce headquarters as a baseline, and then factors in additional inventory changes that occurred on the channel side that aren't included in that baseline to calculate a near-real-time estimated on-hand inventory.</span></span> 

<span data-ttu-id="e236c-116">Seuraavat varastomuutokset on tällä hetkellä otettu huomioon kanavanpuoleisen varaston laskentalogiikassa:</span><span class="sxs-lookup"><span data-stu-id="e236c-116">The following inventory changes are currently considered in the channel-side inventory calculation logic:</span></span>

- <span data-ttu-id="e236c-117">Myymälän itsepalvelutukkutilausten kautta myyty varasto</span><span class="sxs-lookup"><span data-stu-id="e236c-117">Inventory sold through cash-and-carry orders in store</span></span>
- <span data-ttu-id="e236c-118">Myymälän tai verkkokanavan asiakastilausten kautta myyty varasto.</span><span class="sxs-lookup"><span data-stu-id="e236c-118">Inventory sold through customer orders in store or online channel</span></span>
- <span data-ttu-id="e236c-119">Myymälälle palautettu varasto</span><span class="sxs-lookup"><span data-stu-id="e236c-119">Inventory returned to store</span></span>
- <span data-ttu-id="e236c-120">Täytetty varasto (kerää, pakkaa, lähetä) myymälävarastosta</span><span class="sxs-lookup"><span data-stu-id="e236c-120">Inventory fulfilled (pick, pack, ship) from store warehouse</span></span>

<span data-ttu-id="e236c-121">Jos kanavanpuoleisen varaston laskentaa halutaan käyttää, **Tuotteen saatavuus** -työn luoma pääkonttorin varastotietojen kausittainen tilannevedos on lähetettävä kanavatietokantoihin.</span><span class="sxs-lookup"><span data-stu-id="e236c-121">To use the channel-side inventory calculation, as a prerequisite a periodic snapshot of inventory data from headquarters created by the **Product availability** job must be sent to the channel databases.</span></span> <span data-ttu-id="e236c-122">Tilannevedos vastaa tietoja, jotka pääkonttorisovelluksella on varaston saatavuudesta tietylle tuotteen tai tuotevariantin ja varaston yhdistelmälle.</span><span class="sxs-lookup"><span data-stu-id="e236c-122">The snapshot represents the information that headquarters has about inventory availability for a specific combination of a product or product variant and a warehouse.</span></span> <span data-ttu-id="e236c-123">Se sisältää vain varastotapahtumat, jotka on käsitelty ja kirjattu pääkonttorissa tilannevedoksen määrityksen yhteydessä, eikä se ole välttämättä 100 prosenttisen tarkka reaaliajassa jaetuissa palvelimissa olevan vakiomyyntikäsittelyn vuoksi.</span><span class="sxs-lookup"><span data-stu-id="e236c-123">It includes only the inventory transactions that were processed and posted in headquarters at the time when the snapshot was taken, and it might not be 100 percent accurate in real time because of the constant sales processing that occurs across distributed servers.</span></span>

- <span data-ttu-id="e236c-124">Jos tuotteen varasto on myyty myymälässä myyntipistesovelluksen noutotukkumyynnin tai asynkronisen asiakastilausmyynnin avulla, pääkonttorisovelluksessa ei heti ole tietoja myyntiin liittyvästä varasto-ottotapahtumasta.</span><span class="sxs-lookup"><span data-stu-id="e236c-124">If inventory was sold for a product in a store through a cash-and-carry or asynchronous customer order sale in the POS application, headquarters won't immediately have information about the related inventory issue transaction for the sale.</span></span> <span data-ttu-id="e236c-125">Pääkonttori sisältää tietoja varastosta, joka on myyty tämäntyyppisille myymälämyynneille vain sen jälkeen, kun P-työ on ladannut liittyvän tapahtuman myymälän kanavan tietokannasta pääkonttorisovellukseen ja liittyvät myyntitilaukset on luotu laskelman kirjauksen tai vähittäin suoritettavien kirjausprosessien kautta.</span><span class="sxs-lookup"><span data-stu-id="e236c-125">Headquarters will have information about the inventory that is sold for these types of store sales only after the P-job uploads the related transaction from the store's channel database into headquarters and the related sales orders are created through statement posting or the trickle feed posting processes.</span></span> <span data-ttu-id="e236c-126">Tilausten luontiprosessi pääkonttorisovelluksessa luo liittyvät varastotapahtumat.</span><span class="sxs-lookup"><span data-stu-id="e236c-126">The process of creating the orders in headquarters creates the related inventory transactions.</span></span> 
- <span data-ttu-id="e236c-127">Pääkonttori sisältää tietoja sähköisen kaupankäynnin kanavan tilauksille varastotapahtumista vasta sen jälkeen, kun tapahtumat on lähetetty pääkonttorisovellukseen P-työn avulla ja tilauksen synkronointiprosessi on valmis.</span><span class="sxs-lookup"><span data-stu-id="e236c-127">For e-commerce channel orders, headquarters has information about the inventory transactions only after the transactions are sent to headquarters through the P-job and the order synchronization process is completed.</span></span>

<span data-ttu-id="e236c-128">Voit luoda halutessasi varaston tilannevedoksen pääkonttorisovelluksessa seuraavasti.</span><span class="sxs-lookup"><span data-stu-id="e236c-128">To take a snapshot of inventory in Commerce headquarters, follow these steps.</span></span>

1. <span data-ttu-id="e236c-129">Siirry kohtaan **Vähittäismyynti ja kauppa \> Vähittäismyynnin ja kaupan IT \> Tuotteet ja varasto \> Tuotteen saatavuus**.</span><span class="sxs-lookup"><span data-stu-id="e236c-129">Go to **Retail and Commerce \> Retail and Commerce IT \> Products and inventory \> Product availability**.</span></span>
1. <span data-ttu-id="e236c-130">Valitse **OK**, jos haluat suorittaa **Tuotteen saatavuus** -työn.</span><span class="sxs-lookup"><span data-stu-id="e236c-130">Select **OK** to run the **Product availability** job.</span></span> <span data-ttu-id="e236c-131">Voit myös ajoittaa tämän työn niin, että se suoritetaan eränä.</span><span class="sxs-lookup"><span data-stu-id="e236c-131">You can also schedule this job to run in batch.</span></span>

<span data-ttu-id="e236c-132">Kun **Tuotteen saatavuus** -työ on päättynyt, kerätyt tiedot on siirrettävä kanavan tietokantoihin. Tällöin uusinta pääkonttorivaraston tilannevedosta voidaan pitää käytettävissä olevan varaston arvion kanavanpuoleisena laskelmana.</span><span class="sxs-lookup"><span data-stu-id="e236c-132">After the **Product availability** job has finished running, the data that was captured must be pushed to the channel databases, so that the latest headquarters inventory snapshot can be considered in the channel-side calculation of estimated on-hand inventory.</span></span>

<span data-ttu-id="e236c-133">Noudattamalla seuraavia ohjeita voit synkronoida tilannevedostietoja pääkonttorista kanavatietokantoihin.</span><span class="sxs-lookup"><span data-stu-id="e236c-133">To sync snapshot data from headquarters to your channel databases, follow these steps.</span></span>

1. <span data-ttu-id="e236c-134">Mene kohtaan **Retail ja Commerce \> Retail ja Commerce IT \> Jakeluaikataulu**.</span><span class="sxs-lookup"><span data-stu-id="e236c-134">Go to **Retail and Commerce \> Retail and Commerce IT \> Distribution schedule**.</span></span>
1. <span data-ttu-id="e236c-135">Suorita **1130** (**Tuotteen saatavuus**) -työ, jolloin **Tuotteen saatavuus** -työn luomat tilannevedoksen tiedot synkronoidaan pääkonttorisovelluksesta omiin kanavan tietokantoihin.</span><span class="sxs-lookup"><span data-stu-id="e236c-135">Run the **1130** (**Product availability**) job to sync the snapshot data that the **Product availability** job has created from headquarters to your channel databases.</span></span>

## <a name="inventory-availability-apis-for-e-commerce"></a><span data-ttu-id="e236c-136">Sähköisen kaupankäynnin varaston käytettävyyden ohjelmointirajapinnat</span><span class="sxs-lookup"><span data-stu-id="e236c-136">Inventory availability APIs for e-commerce</span></span>

<span data-ttu-id="e236c-137">Commerce toimittaa seuraavat sähköisen kaupan ohjelmointirajapinnat, jotta voidaan tehdä kysely tuotteen varaston saatavuudesta:</span><span class="sxs-lookup"><span data-stu-id="e236c-137">Commerce provides the following APIs for e-commerce scenarios to query inventory availability of a product:</span></span>

- <span data-ttu-id="e236c-138">**GetEstimatedAvailability** – Tämän ohjelmointirajapinnan avulla voit tehdä kyselyn tuotteen tai tuotevariantin varastosta online-kanavan varastossa tai varastoissa, jotka on linkitetty online-kanavan täytäntöönpanoryhmään.</span><span class="sxs-lookup"><span data-stu-id="e236c-138">**GetEstimatedAvailability** – Use this API to query inventory for a product or product variant in the online channel warehouse or warehouses that are linked to the online channel's fulfillment group.</span></span>
- <span data-ttu-id="e236c-139">**GetEstimatedProductWarehouseAvailability** – Käytä tätä ohjelmointirajapintaa, jos haluat tehdä kyselyn tuotteesta tai tuotevariantista tietystä varastosta.</span><span class="sxs-lookup"><span data-stu-id="e236c-139">**GetEstimatedProductWarehouseAvailability** – Use this API to query inventory for a product or product variant from a specific warehouse.</span></span>

> [!NOTE]
> <span data-ttu-id="e236c-140">Nämä ohjelmointirajapinnat korvaavat **GetProductAvailabilities**- ja **GetAvailableInventoryNearby**-ohjelmointirajapinnat Commercen versiossa 10.0.7 ja vanhemmissa versioissa.</span><span class="sxs-lookup"><span data-stu-id="e236c-140">These APIs replace the **GetProductAvailabilities** and **GetAvailableInventoryNearby** APIs in Commerce release 10.0.7 and earlier.</span></span>

<span data-ttu-id="e236c-141">Molemmat ohjelmointirajapinnat käyttävät sisäisesti kanavanpuoleista laskentalogiikkaa ja palauttavat arvioidun **fyysisen käytettävissä** olevan määrän, **käytettävissä olevan kokonaismäärän**, **mittayksikön (UoM)** ja **varastotason** pyydetylle tuotteelle ja varastolle.</span><span class="sxs-lookup"><span data-stu-id="e236c-141">Both APIs internally use the channel-side calculation logic and return estimated **physical available** quantity, **total available** quantity, **unit of measure (UoM)**, and **inventory level** for the requested product and warehouse.</span></span> <span data-ttu-id="e236c-142">Palautetut arvot voidaan näyttää tarvittaessa sähköisen kaupankäynnin sivustossa tai niitä voi käyttää muun liiketoimintalogiikan käynnistämisessä sähköisen kaupankäynnin sivustossa.</span><span class="sxs-lookup"><span data-stu-id="e236c-142">The returned values can be shown on your e-commerce site if you want, or they can be used to trigger other business logic on your e-commerce site.</span></span> <span data-ttu-id="e236c-143">Voit esimerkiksi estää tuotteiden oston Loppunut varastosta -varastotasolla.</span><span class="sxs-lookup"><span data-stu-id="e236c-143">For example, you can prevent the purchase of products with an "out of stock" inventory level.</span></span>

<span data-ttu-id="e236c-144">Vaikka Commercen muut ohjelmointirajapinnat voivat siirtyä suoraan pääkonttorisovellukseen ja hakea käytettävissä olevan varaston määrät tuotteille, tätä ei suositella käytettäväksi sähköisen kaupankäynnin ympäristössä. Tämä johtuu siitä, että nämä toistuvat pyynnöt voivat vaikuttaa pääkonttorin palvelimiin ja aiheuttaa mahdollisia suorituskykyongelmia.</span><span class="sxs-lookup"><span data-stu-id="e236c-144">Although other APIs that are available in Commerce can go directly to headquarters to fetch on-hand quantities for products, we don't recommend that they be used in an e-commerce environment because of potential performance issues and the impact that these frequent requests can have on your headquarters servers.</span></span> <span data-ttu-id="e236c-145">Lisäksi kanavanpuoleisen laskennan avulla edellä mainitut kaksi ohjelmointirajapintaa voivat antaa tarkemman arvion tuotteen saatavuudesta ottamalla huomioon niiden kanavien tapahtumat, joista ei vielä tiedetä pääkonttorissa.</span><span class="sxs-lookup"><span data-stu-id="e236c-145">Additionally, with channel-side calculation, the two APIs mentioned above can provide a more accurate estimate of a product's availability by taking into account the transactions created in the channels that aren’t yet known to headquarters.</span></span>

<span data-ttu-id="e236c-146">Ennen kahden aiemmin mainitun ohjelmointirajapinnan käyttöä on otettava käyttöön **Optimoitu tuotteen saatavuuden laskenta** -toiminto pääkonttorin **Toimintojen hallinta** -työtilassa.</span><span class="sxs-lookup"><span data-stu-id="e236c-146">To use the two APIs, you must enable the **Optimized product availability calculation** feature through the **Feature management** workspace in headquarters.</span></span> <span data-ttu-id="e236c-147">Jos verkko- ja myymäläkanavien käytössä ovat samat toteutusvarastot, sinun on otettava myös käyttöön **Parannettu sähköisen kaupankäynnin kanavanpuoleinen varaston laskentalogiikka** -ominaisuus, jotta kahden ohjelmointirajapinnan kanavanpuoleinen laskentalogiikka voi ottaa huomioon myymäläkanavassa luodut kirjaamattomat tapahtumat (itsepalvelutukku, asiakastilaukset, palautukset).</span><span class="sxs-lookup"><span data-stu-id="e236c-147">If your online and store channels use the same fulfillment warehouses, you must also enable the **Enhanced e-Commerce channel-side inventory calculation logic** feature to have the channel-side calculation logic within the two APIs to factor in the unposted transactions (cash-and-carry, customer orders, returns) created in the store channel.</span></span> <span data-ttu-id="e236c-148">Suorita **1070** (**Kanavan määritys**) -työ näiden ominaisuuksien käyttöönoton jälkeen.</span><span class="sxs-lookup"><span data-stu-id="e236c-148">You will need to run the **1070** (**Channel configuration**) job after enabling these features.</span></span>

<span data-ttu-id="e236c-149">Seuraavia ohjeita noudattamalla voit määrittää, miten tuotemäärä palautetaan ohjelmointirajapinnan tuotoksessa.</span><span class="sxs-lookup"><span data-stu-id="e236c-149">To define how product quantity should be returned in the API output, follow these steps.</span></span>

1. <span data-ttu-id="e236c-150">Valitse **Vähittäismyynti ja kauppa \> Pääkonttorin asetukset \> Parametrit \> Kaupan parametrit**.</span><span class="sxs-lookup"><span data-stu-id="e236c-150">Go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce parameters**.</span></span>
1. <span data-ttu-id="e236c-151">Valitse **Varasto**-välilehti ja määritä sitten **Sähköisen kaupankäynnin varaston käytettävyyden ohjelmointirajapinnat** -pikavälilehdessä **Ohjelmointirajapinnan tuotoksen määrä** -asetuksen arvo.</span><span class="sxs-lookup"><span data-stu-id="e236c-151">Select the **Inventory** tab, and then on the **Inventory availability APIs for e-Commerce** FastTab configure the value of the **Quantity in API output** setting.</span></span>
1. <span data-ttu-id="e236c-152">Synkronoi uusin asetus kanaviin suorittamalla **1070** (**Kanavan määritys**) -työ.</span><span class="sxs-lookup"><span data-stu-id="e236c-152">Run the **1070** (**Channel configuration**) job to sync the latest setting to channels.</span></span>

<span data-ttu-id="e236c-153">**Ohjelmointirajapinnan tuotoksen määrä** -asetuksessa on kolme vaihtoehtoa:</span><span class="sxs-lookup"><span data-stu-id="e236c-153">The **Quantity in API output** setting provides three options:</span></span>

- <span data-ttu-id="e236c-154">**Palauta varastomäärä** - Pyydetyn tuotteen fyysinen käytettävissä oleva määrä ja käytettävissä oleva kokonaismäärä palautetaan palautetaan ohjelmointirajapinnan tuotoksessa.</span><span class="sxs-lookup"><span data-stu-id="e236c-154">**Return inventory quantity** - Physical available and total available quantity of a requested product are returned in API output.</span></span>
- <span data-ttu-id="e236c-155">**Palauta varastomäärä vähentämällä varastopuskuri** - Ohjelmointirajapinnan tuotoksen palauttama määrä oikaistaan vähentämällä varastopuskurin arvo.</span><span class="sxs-lookup"><span data-stu-id="e236c-155">**Return inventory quantity subtracting inventory buffer** - The quantity returned in the API output is adjusted by subtracting the inventory buffer value.</span></span> <span data-ttu-id="e236c-156">Lisätietoja varastopuskurista on kohdassa [Varastopuskureiden ja varastotasojen konfiguroiminen](inventory-buffers-levels.md).</span><span class="sxs-lookup"><span data-stu-id="e236c-156">For more information about the inventory buffer, see [Configure inventory buffers and inventory levels](inventory-buffers-levels.md).</span></span>
- <span data-ttu-id="e236c-157">**Ei palauta varastomäärää** - Vain varastotaso palautetaan ohjelmointirajapinnan tuotoksessa.</span><span class="sxs-lookup"><span data-stu-id="e236c-157">**Not return inventory quantity** - Only the inventory level is returned in the API output.</span></span> <span data-ttu-id="e236c-158">Lisätietoja varastotasoista on kohdassa [Varastopuskureiden ja varastotasojen konfiguroiminen](inventory-buffers-levels.md).</span><span class="sxs-lookup"><span data-stu-id="e236c-158">For more information about inventory levels, see [Configure inventory buffers and inventory levels](inventory-buffers-levels.md).</span></span>

<span data-ttu-id="e236c-159">`QuantityUnitTypeValue`-ohjelmointirajapinnan parametrin avulla voit määrittää yksikkötyypin, joissa haluat ohjelmointirajapintojen palauttavan määrän.</span><span class="sxs-lookup"><span data-stu-id="e236c-159">You can use the `QuantityUnitTypeValue` API parameter to specify the unit type in which you would like the APIs to return quantity.</span></span> <span data-ttu-id="e236c-160">Tämä parametri tukee **Varastoyksikkö**- (oletusarvo), **Ostoyksikkö**- ja **Myyntiyksikkö**-vaihtoehtoja.</span><span class="sxs-lookup"><span data-stu-id="e236c-160">This parameter supports the **inventory unit** (default), **purchase unit**, and **sell unit** options.</span></span> <span data-ttu-id="e236c-161">Palautettu määrä pyöristetään vastaavan mittayksikön määritettyyn tarkkuuteen pääkonttorissa.</span><span class="sxs-lookup"><span data-stu-id="e236c-161">The returned quantity is rounded to the defined precision of the corresponding unit of measure (UOM) in headquarters.</span></span>

<span data-ttu-id="e236c-162">**GetEstimatedAvailability**-ohjelmointirajapinta tarjoaa seuraavat syöteparametrit tukemaan erilaisia kyselyskenaarioita:</span><span class="sxs-lookup"><span data-stu-id="e236c-162">The **GetEstimatedAvailability** API offers the following input parameters to support different query scenarios:</span></span>

- <span data-ttu-id="e236c-163">`DefaultWarehouseOnly` - Tämän parametrin avulla voit tehdä kyselyn tuotteelle varastosta online-kanavan oletusvarastossa.</span><span class="sxs-lookup"><span data-stu-id="e236c-163">`DefaultWarehouseOnly` - Use this parameter to query inventory for a product in the online channel's default warehouse.</span></span> 
- <span data-ttu-id="e236c-164">`FilterByChannelFulfillmentGroup` ja `SearchArea` - Näiden kahden parametrin avulla voit tehdä kyselyn tuotteelle varastosta kaikista tietyn hakualueen noutosijainneista, perustana `longitude`, `latitude` ja `radius`.</span><span class="sxs-lookup"><span data-stu-id="e236c-164">`FilterByChannelFulfillmentGroup` and `SearchArea` - Use these two parameters to query inventory for a product from all pickup locations within a specific search area, based on `longitude`, `latitude`, and `radius`.</span></span> 
- <span data-ttu-id="e236c-165">`FilterByChannelFulfillmentGroup` ja `DeliveryModeTypeFilterValue` - Näiden kahden parametrin avulla voit tehdä kyselyn tuotteelle tietyistä varastoista, jotka on linkitetty online-kanavan täytäntöönpanoryhmään ja jotka on määritetty tukemaan tiettyjä toimitustapoja.</span><span class="sxs-lookup"><span data-stu-id="e236c-165">`FilterByChannelFulfillmentGroup` and `DeliveryModeTypeFilterValue` - Use these two parameters to query inventory for a product from specific warehouses that are linked to an online channel's fulfillment group and are configured to support certain modes of delivery.</span></span> <span data-ttu-id="e236c-166">`DeliveryModeTypeFilterValue`-parametri tukee **kaikki**- (oletusarvo), **lähetys**- ja **nouto**-vaihtoehtoja.</span><span class="sxs-lookup"><span data-stu-id="e236c-166">The `DeliveryModeTypeFilterValue` parameter supports the **all** (default), **shipping**, and **pickup** options.</span></span> <span data-ttu-id="e236c-167">Jos esimerkiksi online-tilaus voidaan täyttää useista lähetysvarastoista, voit tehdä kyselyn tuotteen varaston saatavuudesta näiden kahden parametrin avulla kaikissa lähetysvarastoissa.</span><span class="sxs-lookup"><span data-stu-id="e236c-167">For example, in a scenario where an online order can be fulfilled from multiple shipping warehouses, you can use these two parameters to query a product's inventory availability in all of those shipping warehouses.</span></span> <span data-ttu-id="e236c-168">Tässä tapauksessa ohjelmointirajapinta palauttaa tuotteen käytettävissä olevan määrän ja varaston tason kaikissa lähetysvarastoissa sekä koostetun määrän ja koostetun varastotason kyselyn laajuuden kaikista lähetysvarastoista.</span><span class="sxs-lookup"><span data-stu-id="e236c-168">The API in this case returns the product's on-hand quantity and inventory level in each of the shipping warehouses, plus an aggregated quantity and an aggregated inventory level from all shipping warehouses in the query scope.</span></span>
 
<span data-ttu-id="e236c-169">Commercen ostoruutu-, myymälän valitsin-, toivelista-, ostoskori- ja ostokorikuvakemoduulit käyttävät yllä mainittuja ohjelmointirajapintoja ja parametreja varastotason sanomien tarkastelemiseksi koko sähköisen kaupan sivustossa.</span><span class="sxs-lookup"><span data-stu-id="e236c-169">The Commerce buy box, store selector, wishlist, cart, and cart icon modules consume the APIs and parameters mentioned above to display inventory level messages across the e-commerce site.</span></span> <span data-ttu-id="e236c-170">Commercen sivustonmuodostin tarjoaa useita varastoasetuksia myynninedistämisen ja oston toiminnan ohjaamista varten.</span><span class="sxs-lookup"><span data-stu-id="e236c-170">Commerce site builder provides various inventory settings to control merchandising and purchase behavior.</span></span> <span data-ttu-id="e236c-171">Lisätietoa kohdassa [Varastoasetusten käyttöönotto](inventory-settings.md).</span><span class="sxs-lookup"><span data-stu-id="e236c-171">For more information, see [Apply inventory settings](inventory-settings.md).</span></span>

## <a name="pos-inventory-lookup-with-channel-side-calculation"></a><span data-ttu-id="e236c-172">Myyntipisteen varastohaku ja kanavanpuoleisella laskennalla</span><span class="sxs-lookup"><span data-stu-id="e236c-172">POS inventory lookup with channel-side calculation</span></span>

<span data-ttu-id="e236c-173">Commercen versiossa 10.0.9 ja vanhemmissa versioissa myyntipisteen **Varastohaku**-toiminto käytti reaaliaikaista palvelukutsua pääkonttoriin hakiessaan tietyn tuotteen varaston tietoja sekä käyttäjän myymälässä että muissa myymälöissä, jotka on määritetty täyttämisryhmälle osana myymälän kanavan määritystä.</span><span class="sxs-lookup"><span data-stu-id="e236c-173">In the Commerce release 10.0.9 and earlier, the **Inventory lookup** operation in POS used a real-time service call to headquarters to get inventory information for the selected product for both the user's current store and any other stores that are configured for the fulfillment group as part of the channel configuration for the store.</span></span> <span data-ttu-id="e236c-174">Commerce-versiossa 10.0.10 ja uudemmassa versiossa reaaliaikaiset palvelukutsut voidaan poistaa käytöstä pääkonttoriin. Sen sijaan voidaan käyttää kanavan laskentaa Commerce-palvelimessa, kun määritetään myymälässä ja muissa täyttämisryhmän määritetyissä sijainneissa fyysinen käytettävissä oleva varasto.</span><span class="sxs-lookup"><span data-stu-id="e236c-174">In Commerce release 10.0.10 and later, you can turn off real-time service calls to headquarters and instead use channel-side calculation on the Commerce server to determine the on-hand inventory that is physically available for the store and any other locations that are defined in the fulfillment group.</span></span> <span data-ttu-id="e236c-175">Tämä kanavan laskema varaston määritys on hyödyllinen myös sijainneissa, joissa internet-yhteys ei toimi kunnolla, koska pääkonttorisovelluksesta voi tehdä varastohakuja myös online-tilan ulkopuolella.</span><span class="sxs-lookup"><span data-stu-id="e236c-175">This channel-calculated inventory configuration is also useful for locations where internet connectivity is unreliable, because you don't have to be online to get inventory lookups headquarters.</span></span>

<span data-ttu-id="e236c-176">Kun kanavan laskenta on oikein määritetty ja hallittu, se voi tuottaa luotettavia arvioita myymälän nykyisestä varastosta, koska se käyttää Commerce-kanavan tietokannan tapahtumatietoja. Pääkonttori ei välttämättä vielä sisällä näitä tietoja.</span><span class="sxs-lookup"><span data-stu-id="e236c-176">When channel-side calculation is correctly configured and managed, it can provide a more reliable estimate of the current store inventory because it uses the transactional data that is in the Commerce channel database but that headquarters might not yet have information about.</span></span> <span data-ttu-id="e236c-177">Jos esimerkiksi käytössä on myyntipisteen varastohakujen olemassa oleva reaaliaikainen palvelukutsu, pääkonttori ei ehkä vielä sisällä tietoja tuotteen juuri tapahtuneesta noutotukkumyynnistä.</span><span class="sxs-lookup"><span data-stu-id="e236c-177">For example, if you use the existing real-time service call for inventory lookups in POS, headquarters probably won't yet have information about a cash-and-carry sale that just occurred for a product.</span></span> <span data-ttu-id="e236c-178">Tämän vuoksi käytettävissä oleva varastoarvo, jonka pääkonttori palauttaa tuotteelle, todennäköisesti ylittää myymälän toteutuneen käytettävissä olevan varaston yhdellä yksiköllä.</span><span class="sxs-lookup"><span data-stu-id="e236c-178">Therefore, the on-hand inventory value that headquarters returns for that product will probably exceed the store's actual on-hand inventory by one unit.</span></span> <span data-ttu-id="e236c-179">Jos kuitenkin käytät kanavan laskentaa, noutotukkumyynti voidaan kohdistaa laskentaan ja vähentää näkyvillä olevasta käytettävissä olevasta varastoarvosta.</span><span class="sxs-lookup"><span data-stu-id="e236c-179">However, if you use channel-side calculation, the cash-and-carry sale can be factored into the calculation and deducted from the on-hand value that is shown.</span></span> <span data-ttu-id="e236c-180">Vaikka sekä kanavan laskennan että reaaliaikaisen palvelukutsun antamat arvot ovat vain arvioita käytettävissä olevasta varastosta, kanavan laskennan arvo on todennäköisemmin oikeassa nykyistä myymälää ajatellen.</span><span class="sxs-lookup"><span data-stu-id="e236c-180">Although the values that both the channel-side calculation and the real-time service call provide are only estimates of on-hand inventory, the value that the channel-side calculation provides is much more likely to be accurate for the current store.</span></span>

<span data-ttu-id="e236c-181">Kun haluat määrittää pääkonttorin myyntipisteen **Varastohaku**-toiminnon käyttämään kanavanpuoleista laskentalogiikkaa ja poistaa reaaliaikaisen huoltokutsun käytöstä, noudata seuraavia ohjeita.</span><span class="sxs-lookup"><span data-stu-id="e236c-181">To configure the POS **Inventory lookup** operation in headquarters to use the channel-side calculation logic and turn off real-time service call, follow these steps.</span></span>

1. <span data-ttu-id="e236c-182">Siirry kohtaan **Retail ja Commerce \> Kanavan asetukset \> POS-asetukset \> POS-profiilit \> Toimintoprofiilit**.</span><span class="sxs-lookup"><span data-stu-id="e236c-182">Go to **Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**.</span></span>
1. <span data-ttu-id="e236c-183">Valitse toimintoprofiili.</span><span class="sxs-lookup"><span data-stu-id="e236c-183">Select a functionality profile.</span></span>
1. <span data-ttu-id="e236c-184">Muuta **Toiminnot**-pikavälilehden **Varaston saatavuuden laskenta** -osassa **Varaston saatavuuden laskentatila** -kohdan arvo **Reaaliaikainen palvelu** -arvosta **Kanava**-arvoksi.</span><span class="sxs-lookup"><span data-stu-id="e236c-184">On the **Functions** FastTab, in the **Inventory availability calculation** section, change the value of **Inventory availability calculation mode** from **Real time service** to **Channel**.</span></span> <span data-ttu-id="e236c-185">Oletusarvoisesti kaikki toimintoprofiilit käyttävät reaaliaikaisia palvelukutsuja.</span><span class="sxs-lookup"><span data-stu-id="e236c-185">By default, all functionality profiles use real-time service calls.</span></span> <span data-ttu-id="e236c-186">Sinun on muutettava tämän kentän arvoa, jos haluat käyttää kanavan laskentalogiikkaa.</span><span class="sxs-lookup"><span data-stu-id="e236c-186">You must change the value of this field if you want to use channel-side calculation logic.</span></span> <span data-ttu-id="e236c-187">Tämä muutos vaikuttaa jokaiseen valittuun toimintoprofiiliin linkitettyyn vähittäismyymälään.</span><span class="sxs-lookup"><span data-stu-id="e236c-187">Every retail store that is linked to the selected functionality profile will be affected by this change.</span></span>

<span data-ttu-id="e236c-188">Muutokset on sitten synkronoitava kanaviin pääkonttorin jakelun aikataulutusprosessilla seuraavien ohjeiden mukaisesti.</span><span class="sxs-lookup"><span data-stu-id="e236c-188">You must then sync the changes to the channels through the distribution schedule process in headquarters by following these steps.</span></span>

1. <span data-ttu-id="e236c-189">Mene kohtaan **Retail ja Commerce \> Retail ja Commerce IT \> Jakeluaikataulu**.</span><span class="sxs-lookup"><span data-stu-id="e236c-189">Go to **Retail and Commerce \> Retail and Commerce IT \> Distribution schedule**.</span></span>
1. <span data-ttu-id="e236c-190">Suorita **1070** (**Kanavan määritys**) -työ.</span><span class="sxs-lookup"><span data-stu-id="e236c-190">Run the **1070** (**Channel configuration**) job.</span></span>

<span data-ttu-id="e236c-191">Kun määritys on valmis, fyysisen käytettävissä olevan varaston tiedot eivät enää käytä reaaliaikaista palvelukutsua, kun myyntipistesovelluksen käyttäjä käyttää **Varastohaku**-toimintoa (vakio- ja matriisinäkymät).</span><span class="sxs-lookup"><span data-stu-id="e236c-191">After the configuration is completed, the information that is provided about physically available inventory no longer uses a real-time service call when a user in the POS application uses the **Inventory lookup** operation (standard and matrix views).</span></span> <span data-ttu-id="e236c-192">Sen sijaan nykyisen myymälän ja kaikkien täyttämisryhmän myymälöiden fyysisesti käytettävissä olevan varaston tiedot lasketaan edellisen tunnetun Commerce Headquarters -sovelluksesta kanavan tietokantaan toimitetun tilannevedoksen mukaan.</span><span class="sxs-lookup"><span data-stu-id="e236c-192">Instead, data about physically available inventory for the current store and all the stores in the fulfillment group is calculated based on the last-known snapshot that was delivered to the channel database from Commerce Headquarters.</span></span> <span data-ttu-id="e236c-193">Kanavan laskenta muuttaa tilannevedoksen arvoa niin, että fyysisesti käytettävissä olevan varaston arvo muuttuu kanavan tietokannan sen valitun tuotteen lisämyynnin tai palautustapahtumien perusteella, jota ei sisällytetty edelliseen synkronoituun tilannevedokseen 1130-työstä.</span><span class="sxs-lookup"><span data-stu-id="e236c-193">The snapshot value is further refined by the channel-side calculation to adjust the physically available value, based on additional sales or return transactions that exist for the selected product in the channel database that were not included in the last synchronized snapshot from the 1130 job.</span></span> <span data-ttu-id="e236c-194">Jos kanavan tietokanta ei sisällä tapahtumatietoja mistään täyttämisryhmän varastossa tai myymälässä, se ei sisällä muita tapahtumia arvon uudelleenlaskentaa varten.</span><span class="sxs-lookup"><span data-stu-id="e236c-194">If the channel database doesn't contain transactional data for any of the warehouses or stores in the fulfillment group, it contains no additional transactions that can be factored into a recalculation of the value.</span></span> <span data-ttu-id="e236c-195">Tämän vuoksi paras käytettävissä olevan varaston arvio, joka voidaan näyttää varastoille tai myymälöille, on edellisen tunnetun Commerce Headquarters -tilannevedoksesta saatavat tiedot.</span><span class="sxs-lookup"><span data-stu-id="e236c-195">Therefore, the best estimate of on-hand inventory that can be shown for those warehouses or stores is the data from the last-known Commerce Headquarters snapshot.</span></span>

<span data-ttu-id="e236c-196">**Tilauksen täyttäminen** -näytöt myyntipisteessä hyödyntävät myös kanavan laskentaa nimikkeiden käytettävissä olevan varaston näyttämisessä, kun tilauksen täyttämisen rivi valitaan ja käyttäjä tarkastelee valitun nimikkeen käytettävissä olevan varaston **Tiedot**-paneelia.</span><span class="sxs-lookup"><span data-stu-id="e236c-196">The **Order fulfillment** screens of POS also leverage the channel side calculation to show on-hand inventory for items when an order fulfillment line is selected and a user views the **Details** panel for on-hand inventory for the selected item.</span></span>

## <a name="optimize-your-inventory-data"></a><span data-ttu-id="e236c-197">Varastotietojen optimoiminen</span><span class="sxs-lookup"><span data-stu-id="e236c-197">Optimize your inventory data</span></span>

<span data-ttu-id="e236c-198">Voit varmistaa varaston parhaan mahdollisen arvion saamisen, jos käytät seuraavia Commerce-erätöitä ja suoritat ne säännöllisesti:</span><span class="sxs-lookup"><span data-stu-id="e236c-198">To ensure the best possible estimate of inventory, it's critical that you use the following Commerce batch jobs and run them frequently:</span></span>

- <span data-ttu-id="e236c-199">**P-työ** – P-työ löytyy **Jakeluaikataulut**-sivulta. Se tulee suorittaa säännöllisesti.</span><span class="sxs-lookup"><span data-stu-id="e236c-199">**P-job** – The P-job is found on the **Distribution schedules** page and should be run frequently.</span></span> <span data-ttu-id="e236c-200">Tämä työ tuo sähköisen kaupankäynnin tilaukset, myyntipisteen luomat asynkroniset asiakastilaukset ja myyntipisteen kanavan tietokannoista Commerce Headquarters -sovellukseen luomat noutotukkutilaukset, jotta niitä voidaan käsitellä lisää.</span><span class="sxs-lookup"><span data-stu-id="e236c-200">This job brings e-Commerce orders, asynchronous customer orders that POS created, and cash-and-carry orders that POS created from the channel databases into Commerce Headquarters, so that they can be processed further.</span></span> <span data-ttu-id="e236c-201">Commerce Headquarters ei sisällä tietoja näiden tapahtumien aiheuttamista varaston tuotteiden varasto-oikaisuista ennen kuin nämä tiedot on synkronoitu kanavasta Commerce Headquarters -sovellukseen.</span><span class="sxs-lookup"><span data-stu-id="e236c-201">Until this data is synced from the channel to Commerce Headquarters, Commerce Headquarters has no information about inventory adjustments to products in the warehouses that result from those transactions.</span></span>
- <span data-ttu-id="e236c-202">**Synkronoi tilaukset** – Tämä työ käsittelee P-työn määrittämät tapahtuman raakatiedot Commerce Headquarters -sovelluksessa ja muuntaa sähköisen kaupankäynnin ja asynkronisen asiakastilauksen tapahtumat myyntitilauksiksi Commerce Headquarters -sovelluksessa.</span><span class="sxs-lookup"><span data-stu-id="e236c-202">**Synchronize orders** – This job processes the raw transactional data in Commerce Headquarters that the P-job provides and converts e-Commerce and asynchronous customer order transactions into sales orders in Commerce Headquarters.</span></span> <span data-ttu-id="e236c-203">Varastotapahtumia luodaan vasta sen jälkeen, kun tämä työ on käsitelty ja myyntitilaukset on luotu.</span><span class="sxs-lookup"><span data-stu-id="e236c-203">Until this job is processed and the sales orders are created, no inventory transactions are created.</span></span> <span data-ttu-id="e236c-204">Tämän vuoksi Commerce Headquarters -sovelluksen käytettävissä olevaa varastoa ei oteta huomioon tapahtumissa.</span><span class="sxs-lookup"><span data-stu-id="e236c-204">Therefore, on-hand inventory in Commerce Headquarters won't consider the transactions.</span></span>
- <span data-ttu-id="e236c-205">**Laske tapahtumaraportit eräajona** – Myymälässä luotujen noutotukkutapahtumien vähittäin suoritettava kirjausprosessi varmistaa, että myyntiin liittyvä varasto päivitetään tehokkaasti.</span><span class="sxs-lookup"><span data-stu-id="e236c-205">**Calculate transactional statements in batch** – For cash-and-carry transactions that are created in the store, the trickle feed posting process ensures that inventory that is related to the sales is updated efficiently.</span></span> <span data-ttu-id="e236c-206">Noutotukkutilausten varastotapahtumien käsittelyn tehokkuuden varmistamiseksi kannattaa tarkistaa, että järjestelmä on määritetty käyttämään [vähittäin suoritettavaa kirjausta](./trickle-feed.md).</span><span class="sxs-lookup"><span data-stu-id="e236c-206">To get the most efficient processing of inventory transactions for cash-and-carry orders, make sure that you configure your system to use [trickle feed posting](./trickle-feed.md).</span></span>
- <span data-ttu-id="e236c-207">**Kirjaa tapahtumaraportit eräajona** – Tämä työ on myös pakollinen vähittäin suoritettavassa kirjauksessa.</span><span class="sxs-lookup"><span data-stu-id="e236c-207">**Post transactional statements in batch** – This job is also required for trickle feed posting.</span></span> <span data-ttu-id="e236c-208">Se seuraa **Laske tapahtumaraportit eräajona** -työtä.</span><span class="sxs-lookup"><span data-stu-id="e236c-208">It follows the **Calculate transactional statements in batch** job.</span></span> <span data-ttu-id="e236c-209">Tämä työ kirjaa lasketut laskelmat järjestelmällisesti niin, että noutotukkumyynnin myyntitilaukset luodaan Commerce Headquarters -sovelluksessa. Näin Commerce Headquarters vastaa aiempaa tarkemmin myymälän varastoa.</span><span class="sxs-lookup"><span data-stu-id="e236c-209">This job systematically posts the calculated statements, so that sales orders for cash-and-carry sales are created in Commerce Headquarters and Commerce Headquarters more accurately reflects your store's inventory.</span></span>
- <span data-ttu-id="e236c-210">**Tuotteen saatavuus** – Tämä työ luo tilannevedoksen Commerce Headquarters -sovelluksen varastosta.</span><span class="sxs-lookup"><span data-stu-id="e236c-210">**Product availability** – This job creates the snapshot of inventory from Commerce Headquarters.</span></span>
- <span data-ttu-id="e236c-211">**1130 (Tuotteen saatavuus)** – Tämä työ löytyy **Jakeluaikataulut**-sivulta. Se tulee suorittaa heti **Tuotteen saatavuus** -työn jälkeen.</span><span class="sxs-lookup"><span data-stu-id="e236c-211">**1130 (Product availability)** – This job is found on the **Distribution schedules** page and should be run immediately after the **Product availability** job.</span></span> <span data-ttu-id="e236c-212">Tämä työ siirtää varaston tilannevedoksen tiedot Commerce Headquarters -sovelluksesta kanavan tietokantoihin.</span><span class="sxs-lookup"><span data-stu-id="e236c-212">This job transports the inventory snapshot data from Commerce Headquarters to the channel databases.</span></span>

> [!NOTE]
> - <span data-ttu-id="e236c-213">Hyvänä käytäntönä on käyttää **tuotteiden saatavuutta** ja **1130**-töitä tuntitasolla ja ajoittaa P-työtä, synkronoida tilauksia ja määrittää, että yhtä usein tai tiheämmin toistuviin töihin kirjataan liittyviä töitä.</span><span class="sxs-lookup"><span data-stu-id="e236c-213">It is a best practice to run the **Product availability** and **1130** jobs on an hourly basis, and to schedule P-job, synchronize orders, and trickle feed posting-related jobs with the same or higher frequency.</span></span>
> - <span data-ttu-id="e236c-214">Kun kanavan varaston saatavuuden laskelmia käytetään varaston saatavuuspyynnön luomisessa sähköisen kaupankäynnin ohjelmointirajapintaa tai myyntipisteen kanavan varastointilogiikkaa, suorituskyvyn varmistamiseksi laskelma käyttää välimuistia ja määrittää sen avulla, onko laskentalogiikan suorittamisesta kulunut riittävästi aikaa, jotta sen suorittaminen uudelleen on perusteltua.</span><span class="sxs-lookup"><span data-stu-id="e236c-214">For performance reasons, when channel-side inventory availability calculations are used to make an inventory availability request using the e-Commerce API's or the POS channel-side inventory logic, the calculation uses a cache to determine whether enough time has passed to justify running the calculation logic again.</span></span> <span data-ttu-id="e236c-215">Välimuistin oletusarvoksi on määritetty 60 sekuntia.</span><span class="sxs-lookup"><span data-stu-id="e236c-215">The default cache is set to 60 seconds.</span></span> <span data-ttu-id="e236c-216">Tässä esimerkissä otetaan käyttöön kanavan laskennan myymälässä ja tarkastellaan tuotteen käytettävissä olevaa varastoa **Varastohaku**-sivulla.</span><span class="sxs-lookup"><span data-stu-id="e236c-216">For example, you turned on channel-side calculation for your store and viewed the on-hand inventory for a product on the **Inventory lookup** page.</span></span> <span data-ttu-id="e236c-217">Jos tuotetta tämän jälkeen myydään yksi yksikkö, **Varastohaku**-sivulla ei näy vähennetty varasto ennen välimuistin tyhjentämistä.</span><span class="sxs-lookup"><span data-stu-id="e236c-217">If one unit of the product is then sold, the **Inventory lookup** page won't show the reduced inventory until the cache has been cleared.</span></span> <span data-ttu-id="e236c-218">Käyttäjien kirjattua tapahtumia myyntipisteeseen, heidän tulee odottaa 60 sekuntia. Tämän jälkeen he voivat tarkistaa, onko käytettävissä olevaa varastoa vähennetty tapahtuman mukaan.</span><span class="sxs-lookup"><span data-stu-id="e236c-218">After users post transactions in POS, they should wait 60 seconds before they verify that the on-hand inventory has been reduced.</span></span>

<span data-ttu-id="e236c-219">Jos liiketoimintaskenaario edellyttää lyhyempää välimuistin aikaa, ota yhteyttä tuotetuen edustajaan.</span><span class="sxs-lookup"><span data-stu-id="e236c-219">If your business scenario requires a smaller cache time, contact your product support representative for assistance.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]
