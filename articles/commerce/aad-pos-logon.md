---
title: Azure Active Directory -todennuksen määrittäminen myyntipistekirjautumisessa
description: Tässä aiheessa kerrotaan, miten Azure Active Directory määritetään todennusmenetelmäksi Microsoft Dynamics 365 Commerce -myyntipisteessä.
author: boycezhu
ms.date: 04/23/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.scope: Core, Operations, Retail
ms.search.region: global
ms.author: boycez
ms.search.validFrom: ''
ms.dyn365.ops.version: 10.0.11
ms.openlocfilehash: 63121a9b5f1b062b7ca927f6b9eb1689ce8aa698
ms.sourcegitcommit: dc4898aa32f381620c517bf89c7856e693563ace
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 06/17/2021
ms.locfileid: "6270680"
---
# <a name="configure-azure-active-directory-authentication-for-pos-sign-in"></a><span data-ttu-id="f9e12-103">Azure Active Directory -todennuksen määrittäminen myyntipistekirjautumisessa</span><span class="sxs-lookup"><span data-stu-id="f9e12-103">Configure Azure Active Directory authentication for POS sign-in</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="f9e12-104">Tässä aiheessa kerrotaan, miten Azure Active Directory (Azure AD) määritetään todennusmenetelmäksi Microsoft Dynamics 365 Commerce -myyntipisteessä.</span><span class="sxs-lookup"><span data-stu-id="f9e12-104">This topic explains how to configure Azure Active Directory (Azure AD) as the authentication method in Microsoft Dynamics 365 Commerce point of sale (POS).</span></span>

<span data-ttu-id="f9e12-105">Vähittäismyyjät, jotka käyttävät Dynamics 365 Commercea yhdessä muiden Microsoftin pilvipalveluiden kanssa, kuten Microsoft Azure, Microsoft 365 ja Microsoft Teams, yleensä haluavat käyttää Azure AD:tä keskitettyä hallintaa varten suojattuun ja sujuvaan kirjautumiseen sovelluksissa.</span><span class="sxs-lookup"><span data-stu-id="f9e12-105">Retailers who use Dynamics 365 Commerce along with other Microsoft cloud services such as Microsoft Azure, Microsoft 365, and Microsoft Teams typically want to use Azure AD for centralized management of user credentials for a secure and seamless sign-in experience across applications.</span></span> <span data-ttu-id="f9e12-106">Jotta Azure AD -todennusta voi käyttää Commercen myyntipisteelle, todennusmenetelmäksi on ensin määritettävä Azure AD Commerce-pääkonttorisovelluksessa.</span><span class="sxs-lookup"><span data-stu-id="f9e12-106">To use Azure AD authentication for Commerce POS, you must first configure Azure AD as the authentication method in Commerce headquarters.</span></span>

## <a name="configure-pos-authentication-method"></a><span data-ttu-id="f9e12-107">Myyntipisteen todennusmenetelmän määrittäminen</span><span class="sxs-lookup"><span data-stu-id="f9e12-107">Configure POS authentication method</span></span>

<span data-ttu-id="f9e12-108">Voit määrittää myyntipisteen todennusmenetelmän Commerce-pääkonttorisovelluksessaa seuraavasti.</span><span class="sxs-lookup"><span data-stu-id="f9e12-108">To configure the POS authentication method in Commerce headquarters, follow these steps.</span></span>
    
1. <span data-ttu-id="f9e12-109">Siirry kohtaan **Vähittäismyynti ja kauppa \> Kanavan asetukset \> POS-asetukset \> POS-profiilit \> Toimintoprofiilit** ja valitse muutettava toimintoprofiili.</span><span class="sxs-lookup"><span data-stu-id="f9e12-109">Go to **Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**, and select a functionality profile to change.</span></span>
1. <span data-ttu-id="f9e12-110">**Myyntipisteen henkilöstön sisäänkirjaus** -osasta **Toiminnot**-pikavälilehdellä haluamasi todennusmenetelmä avattavasta **Sisäänkirjauksen todennusmenetelmä** -luettelosta.</span><span class="sxs-lookup"><span data-stu-id="f9e12-110">In the **POS staff logon** section of the **Functions** FastTab, select a desired authentication method option from the **Logon authentication method** drop-down list.</span></span>

    <span data-ttu-id="f9e12-111">**Sisäänkirjauksen todennusmenetelmässä** on kolme vaihtoehtoa:</span><span class="sxs-lookup"><span data-stu-id="f9e12-111">The **Logon authentication method** has three options:</span></span>
    
    - <span data-ttu-id="f9e12-112">**Henkilöstön tunnus ja salasana** - Tämä oletusasetus edellyttää, että myyntipisteen käyttäjät syöttävät henkilöstötunnuksen ja salasanan kirjautuakseen sisään myyntipisteeseen ja käyttääkseen esimiehen ohitustoimintoa.</span><span class="sxs-lookup"><span data-stu-id="f9e12-112">**Personnel ID and Password** - This default option requires POS users to enter a personnel ID and password to sign in to the POS and to access manager override functionality.</span></span>
    - <span data-ttu-id="f9e12-113">**Azure AD ilman kertakirjausta** - Tämä asetus edellyttää, että myyntipisteen käyttäjät kirjautuvat sisään myyntipisteeseen ja käyttävät esimiehen ohitustoimintoa Azure AD -tunnistetiedoilla.</span><span class="sxs-lookup"><span data-stu-id="f9e12-113">**Azure AD without single sign-on** - This option requires POS users to use Azure AD credentials to sign in to the POS and access manager override functionality.</span></span> <span data-ttu-id="f9e12-114">Kun myyntipisteen asiakasohjelma päivitetään tai avataan uudelleen, myyntipisteen käyttäjän on annettava Azure AD -tunnistetiedot kirjautumista varten uudelleen.</span><span class="sxs-lookup"><span data-stu-id="f9e12-114">When the POS client is refreshed or reopened, the POS user must provide Azure AD credentials to sign in again.</span></span>
    - <span data-ttu-id="f9e12-115">**Azure AD kertakirjauksella** - Kun tämä vaihtoehto on valittuna, myyntipisteen käyttäjät voivat kirjautua pilvimyyntipisteeseen (CPOS) aktiivisia Azure AD -tunnistetietoja, joita muut verkkosovellukset käyttävät samassa selaimessa, tai kirjautua Modern POS -myyntipisteeseen (MPOS) käyttäen Windowsiin kirjautuneena Azure AD -tunnistetietoja.</span><span class="sxs-lookup"><span data-stu-id="f9e12-115">**Azure AD with single sign-on** - When this option is selected, POS users are able to sign in to Cloud POS (CPOS) using active Azure AD credentials that are being used by other web applications in the same web browser, or sign in to Modern POS (MPOS) using Azure AD credentials signed in to Windows.</span></span> <span data-ttu-id="f9e12-116">Molemmat menetelmät sallivat kirjautumisen tarvitsematta syöttää Azure AD -tunnistetietoja myyntipisteen kirjautumisnäytössä.</span><span class="sxs-lookup"><span data-stu-id="f9e12-116">Both methods allow sign-in without needing to enter Azure AD credentials on the POS sign-in screen.</span></span> <span data-ttu-id="f9e12-117">Myyntipisteen esimiehen ohitustoimintojen käyttäminen edellyttää kuitenkin kirjautumista Azure AD -tunnistetiedoilla.</span><span class="sxs-lookup"><span data-stu-id="f9e12-117">However, accessing the POS manager override functionality will still require sign-in using Azure AD credentials.</span></span>

1. <span data-ttu-id="f9e12-118">Siirry kohtaan **Retail ja Commerce > Retail ja Commerce IT > Jakeluaikataulu** ja synkronoi viimeisimmät toimintoprofiilin asetukset myyntipisteen asiakkaille suorittamalla **1070 (kanavan konfiguraatio)** -työ.</span><span class="sxs-lookup"><span data-stu-id="f9e12-118">Go to **Retail and Commerce > Retail and Commerce IT > Distribution schedule** and run the **1070 (Channel configuration)** job to synchronize the latest functionality profile settings to POS clients.</span></span>

> [!NOTE]
> - <span data-ttu-id="f9e12-119">**Azure AD ilman kertakirjausta** -todennusmenetelmä korvaa **Azure Active Directory** vaihtoehdon Commerce-versiossa 10.0.18 ja sitä aiemmissa versioissa.</span><span class="sxs-lookup"><span data-stu-id="f9e12-119">The **Azure AD without single sign-on** authentication method option replaces the **Azure Active Directory** option in Commerce version 10.0.18 and earlier.</span></span>
> - <span data-ttu-id="f9e12-120">Azure AD -todennus edellyttää aktiivista Internet-yhteyttä, eikä se toimi, kun myynti on offline-tilassa.</span><span class="sxs-lookup"><span data-stu-id="f9e12-120">Azure AD authentication requires an active internet connection, and won't function when the POS is offline.</span></span>

## <a name="associate-azure-ad-accounts-with-pos-users"></a><span data-ttu-id="f9e12-121">Azure AD -tilien liittäminen myyntipisteen käyttäjiin</span><span class="sxs-lookup"><span data-stu-id="f9e12-121">Associate Azure AD accounts with POS users</span></span>

<span data-ttu-id="f9e12-122">Jos haluat käyttää Azure AD:tä myyntipisteen todennusmenetelmämä, sinun on liitettävä Azure AD -tilit Commerce-pääkonttorisovelluksen myyntipistekäyttäjiin.</span><span class="sxs-lookup"><span data-stu-id="f9e12-122">To use Azure AD as the POS authentication method, you must associate Azure AD accounts with POS users in Commerce headquarters.</span></span> 

<span data-ttu-id="f9e12-123">Voit liittää Azure AD -tilejä Commerce-pääkonttorisovelluksen myyntipistekäyttäjiin noudattamalla seuraavia ohjeita.</span><span class="sxs-lookup"><span data-stu-id="f9e12-123">To associate Azure AD accounts with POS users in Commerce headquarters, follow these steps.</span></span>
    
1. <span data-ttu-id="f9e12-124">Valitse **Retail ja Commerce > Työntekijät > Työntekijät** ja avaa työntekijätietue.</span><span class="sxs-lookup"><span data-stu-id="f9e12-124">Go to **Retail and Commerce > Employees > Workers** and open a worker record.</span></span>
1. <span data-ttu-id="f9e12-125">Valitse toimintoruudussa **Kauppa**-välilehti ja sitten **Ulkoinen tunnus** -kohdassa **Liitä aiemmin luotu tunnus**.</span><span class="sxs-lookup"><span data-stu-id="f9e12-125">On the Action Pane, select the **Commerce** tab, then under **External identity** select **Associate existing identity**.</span></span> 
1. <span data-ttu-id="f9e12-126">Valitse **Käytä aiemmin määritettyä ulkoista tunnusta** -valintaikkunassa **Hae sähköpostiosoitteen avulla**, anna Azure AD -sähköpostiosoite ja valitse **Hae**.</span><span class="sxs-lookup"><span data-stu-id="f9e12-126">In the **Use existing external identity** dialog box, select **Search using email**, enter an Azure AD email address, and then select **Search**.</span></span>
1. <span data-ttu-id="f9e12-127">Valitse palautettu Azure AD -tili ja valitse sitten **OK**.</span><span class="sxs-lookup"><span data-stu-id="f9e12-127">Select the Azure AD account that is returned, then select **OK**.</span></span>

<span data-ttu-id="f9e12-128">Yllä olevien määritysvaiheiden jälkeen työntekijän tietosivun **Alias**, **Täydellinen käyttäjätunnus**- ja **Ulkoinen alitunnus** -kentät **Kauppa**-välilehdessä täytetään.</span><span class="sxs-lookup"><span data-stu-id="f9e12-128">After the configuration steps above, the **Alias**, **UPN**, and **External sub identifier** fields on the **Commerce** tab of the worker's details page will be filled in.</span></span>

<span data-ttu-id="f9e12-129">Suorita **1060 (Henkilökunta)** -työ kohdassa **Retail ja Commerce > Retail ja Commerce IT > Jakeluaikataulu** synkronoidaksesi viimeisimmät myyntipisteen käyttäjän ja Azure AD -tilin tiedot kanavaan.</span><span class="sxs-lookup"><span data-stu-id="f9e12-129">You must run the **1060 (Staff)** job in **Retail and Commerce > Retail and Commerce IT > Distribution schedule** to synchronize the latest POS user and Azure AD account data to the channel.</span></span>

> [!NOTE]
> <span data-ttu-id="f9e12-130">Parhaan käytännön mukaisesti on suositeltavaa, että kun työntekijätiedot, kuten salasana, myyntipisteen käyttöoikeus, liittyvä Azure AD -tili tai työntekijän osoitekirja, on päivitetty Commerce-pääkonttorisovelluksessa, on suositeltavaa suorittaa **1060 (Henkilökunta)** -työ viimeisimpien työntekijätietojen synkronoimiseksi kanavaan.</span><span class="sxs-lookup"><span data-stu-id="f9e12-130">As a best practice, after worker information such as password, POS permission, associated Azure AD account, or employee address book is updated in Commerce headquarters, it is highly recommended to run the **1060 (Staff)** job to synchronize the latest worker information to the channel.</span></span> <span data-ttu-id="f9e12-131">Näin myyntipisteen asiakasohjelma voi hakea oikeat tiedot käyttäjän valtuutusta ja valtuutuksen tarkistusta varten.</span><span class="sxs-lookup"><span data-stu-id="f9e12-131">The POS client can then fetch the correct data for user authentication and authorization checks.</span></span>

## <a name="pos-lock-register-and-sign-out-with-azure-ad-authentication"></a><span data-ttu-id="f9e12-132">Myyntipisteen lukitusrekisteri ja uloskirjautuminen Azure AD -todennuksen avulla</span><span class="sxs-lookup"><span data-stu-id="f9e12-132">POS lock register and sign-out with Azure AD authentication</span></span>

<span data-ttu-id="f9e12-133">Kun myynti on määritetty käyttämään Azure AD -todennusmenetelmää, tapahtuu seuraavaa:</span><span class="sxs-lookup"><span data-stu-id="f9e12-133">The following occurs when POS is configured to use the Azure AD authentication method:</span></span>

- <span data-ttu-id="f9e12-134">**Lukitusrekisteri**-toiminto ei ole käytettävissä myyntipistesovelluksessa.</span><span class="sxs-lookup"><span data-stu-id="f9e12-134">The **Lock register** function will not be available in the POS application.</span></span> 
- <span data-ttu-id="f9e12-135">**Automaattinen lukitus** -toiminto toimii samoin kuin **Automaattinen uloskirjaus** -toiminto.</span><span class="sxs-lookup"><span data-stu-id="f9e12-135">The **Automatically lock** function will behave the same as the **Automatically logoff** function.</span></span>
- <span data-ttu-id="f9e12-136">Jos myyntipisteen käyttäjä valitsee **Kirjaudu ulos**, käyttäjää pyydetään kirjautumaan sisään Azure AD -tunnistetiedoilla kun myyntipiste käynnistetään seuraavan kerran riippumatta siitä, onko kertakirjautuminen käytössä.</span><span class="sxs-lookup"><span data-stu-id="f9e12-136">If the POS user selects **Log off**, the user will be asked to sign in with Azure AD credentials the next time the POS launches, regardless of whether single sign-in is enabled.</span></span>

## <a name="manager-override-functionality-with-azure-ad-authentication"></a><span data-ttu-id="f9e12-137">Ohitustoimintojen hallinta Azure AD -todennuksella</span><span class="sxs-lookup"><span data-stu-id="f9e12-137">Manager override functionality with Azure AD authentication</span></span>

<span data-ttu-id="f9e12-138">Kun myyntipiste on määritetty käyttämään Azure AD -todennusta, esimiehen ohitustoiminto avaa valintaikkunan, jossa pyydetään esimiehen käyttäjän Azure AD -käyttöoikeudet.</span><span class="sxs-lookup"><span data-stu-id="f9e12-138">When the POS is configured to use Azure AD authentication, the manager override functionality will open a dialog box that prompts for the manager user's Azure AD credentials.</span></span> <span data-ttu-id="f9e12-139">Kun esimiehen kirjautuminen on hyväksytty, esimiehen Azure AD -tunnistetiedot poistetaan ja edellisen käyttäjän Azure AD -tunnistetietoja käytetään myöhemmissä myyntipistetoiminnoissa.</span><span class="sxs-lookup"><span data-stu-id="f9e12-139">After manager sign-in is approved, the manager's Azure AD credentials will be dropped and the previous user's Azure AD credentials will be used for subsequent POS operations.</span></span>

> [!NOTE]
> - <span data-ttu-id="f9e12-140">Commerce-versioissa 10.0.18 ja sitä aiemmissa versioissa esimiehen ohitustoiminto ei tue Azure AD:tä.</span><span class="sxs-lookup"><span data-stu-id="f9e12-140">In Commerce versions 10.0.18 and earlier, the manager override function does not support Azure AD.</span></span> <span data-ttu-id="f9e12-141">Henkilöstötunnus ja salasana ovat pakollisia, vaikka myyntipiste olisi määritetty käyttämään Azure AD -todennusmenetelmää.</span><span class="sxs-lookup"><span data-stu-id="f9e12-141">A personnel ID and password are required even if the POS is configured to use the Azure AD authentication method.</span></span>
> - <span data-ttu-id="f9e12-142">Kun käytät CPOS:ää Safari-selaimessa Apple iOS -laitteella, sinun on ensin poistettava **Estä ponnahdusikkunat** käytöstä Safari-asetuksissa, jotta esimiehen ohitustoiminto voi käyttää Azure AD -todennusta.</span><span class="sxs-lookup"><span data-stu-id="f9e12-142">When using CPOS with the Safari web browser on an Apple iOS device, you must first turn off **Block Pop-ups** in Safari settings for the manager override functionality to work with Azure AD authentication.</span></span> 

## <a name="security-best-practices-for-azure-ad-based-pos-authentication-on-shared-devices"></a><span data-ttu-id="f9e12-143">Suojauksen parhaat käytännöt Azure AD -pohjaiselle myyntipisteen todentamiselle jaetuissa laitteissa</span><span class="sxs-lookup"><span data-stu-id="f9e12-143">Security best practices for Azure AD-based POS authentication on shared devices</span></span>

<span data-ttu-id="f9e12-144">Useat vähittäismyyjät ovat määrittäneet vähittäismyyntiympäristönsä niin, että useiden käyttäjien on tarpeen käyttää myyntipistesovellusta jaetusta fyysisestä laitteesta.</span><span class="sxs-lookup"><span data-stu-id="f9e12-144">Many retailers set up their retail store environment in a way that multiple users need to access the POS application from a shared physical device.</span></span> <span data-ttu-id="f9e12-145">Samalla kun kertakirjaus tarjoaa kätevän ja sujuvan todennusmenetelmän, se voi myös luoda aukon suojauksessa, koska nykyinen myyntipisteen käyttäjä ei välttämättä huomaa, että toisen käyttäjän tunnistetietoja käytetään tapahtumien tai toimintojen suorittamiseen myyntipisteessä.</span><span class="sxs-lookup"><span data-stu-id="f9e12-145">In that context, while single sign-in provides a convenient and seamless authentication experience, it may also create a security loophole where the current POS user may not realize that another user's credentials are being used to perform transactions or operations in the POS.</span></span> <span data-ttu-id="f9e12-146">Ennen kuin määrität myyntipisteen käyttämään Azure AD -todennusmenetelmää, on suositeltavaa tarkistaa suojauskäytäntösi ja jaetun laitteen kirjautumisasetukset ja päättää, mikä vaihtoehto sopii parhaiten.</span><span class="sxs-lookup"><span data-stu-id="f9e12-146">Before you configure the POS to use the Azure AD authentication method, it is highly recommended to review your security policy and the shared device's sign-in settings to decide which option is the best fit.</span></span>

- <span data-ttu-id="f9e12-147">Jos vähittäismyyntiympäristö käyttää fyysistä kirjautumista varten jaettua tiliä (esimerkiksi paikallista tiliä), on suositeltavaa käyttää **Azure AD ilman kertakirjausta** -vaihtoehtoa.</span><span class="sxs-lookup"><span data-stu-id="f9e12-147">If your retail environment uses a shared account (for example, a local account) for physical device sign-in, it's recommended to use the **Azure AD without single sign-on** option.</span></span> <span data-ttu-id="f9e12-148">Näin varmistetaan, että kukin myyntipisteen käyttäjä antaa Azure AD -tunnistetietonsa kirjautuessaan myyntipisteeseen.</span><span class="sxs-lookup"><span data-stu-id="f9e12-148">This ensures that each POS user explicitly provides Azure AD credentials to sign in to the POS.</span></span>
- <span data-ttu-id="f9e12-149">Jos vähittäismyyntiympäristö edellyttää, että työntekijät kirjautuvat sisään myyntipisteeseen omalla Azure AD -tilillään ja käytössä on fyysinen laite, on suositeltavaa käyttää **Azure AD kertakirjautuksella** -vaihtoehtoa.</span><span class="sxs-lookup"><span data-stu-id="f9e12-149">If your retail environment requires employees to use their own Azure AD accounts to sign in to the POS and its hosting physical device, it's recommended to use the **Azure AD with single sign-on** option.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="f9e12-150">Lisäresurssit</span><span class="sxs-lookup"><span data-stu-id="f9e12-150">Additional resources</span></span>

[<span data-ttu-id="f9e12-151">Työntekijän konfiguroiminen</span><span class="sxs-lookup"><span data-stu-id="f9e12-151">Configure a worker</span></span>](tasks/worker.md)

[<span data-ttu-id="f9e12-152">Vähittäismyynnin toimintoprofiilin luominen</span><span class="sxs-lookup"><span data-stu-id="f9e12-152">Create a retail functionality profile</span></span>](retail-functionality-profile.md)


[<span data-ttu-id="f9e12-153">Laajennetun MPOS- ja pilvimyyntipistekirjautumisen määrittäminen</span><span class="sxs-lookup"><span data-stu-id="f9e12-153">Set up extended logon functionality for MPOS and Cloud POS</span></span>](extended-logon.md)

[<span data-ttu-id="f9e12-154">Suojauksen parhaat käytännöt pilvimyyntipisteelle jaetuissa ympäristöissä</span><span class="sxs-lookup"><span data-stu-id="f9e12-154">Security best practices for Cloud POS in shared environments</span></span>](dev-itpro/secure-retail-cloud-pos.md)



[!INCLUDE[footer-include](../includes/footer-banner.md)]
