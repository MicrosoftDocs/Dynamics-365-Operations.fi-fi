---
title: Jaettu tilausten hallinta (JTH)
description: Tässä aiheessa kuvataan Dynamics 365 Commerce -ohjelman jaetun tilausten hallinnan (JTH) toimintoja.
author: josaw1
manager: AnnBe
ms.date: 01/08/2021
ms.topic: index-page
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.custom: ''
ms.assetid: ed0f77f7-3609-4330-bebd-ca3134575216
ms.search.region: global
ms.search.industry: Retail
ms.author: josaw
ms.search.validFrom: 2018-11-15
ms.dyn365.ops.version: ''
ms.openlocfilehash: 367eaebfdd59d15040bfd4824b0b6f4621cb7147
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 01/15/2021
ms.locfileid: "4982588"
---
# <a name="distributed-order-management-dom"></a><span data-ttu-id="2d37f-103">Jaettu tilausten hallinta (JTH)</span><span class="sxs-lookup"><span data-stu-id="2d37f-103">Distributed order management (DOM)</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="2d37f-104">Kaupankäynnin uudella aikakaudella myyjät pyrkivät tarjoamaan mukautettuja asiakkaan aktivointitoimia, monikanavaisia käyttökokemuksia ja sujuvaa vuorovaikutusta.</span><span class="sxs-lookup"><span data-stu-id="2d37f-104">In the new paradigm for commerce operations, retailers strive to provide personalized customer engagement, omni-channel experiences, and frictionless interactions.</span></span> <span data-ttu-id="2d37f-105">Koska valinnanmahdollisuudet ovat lähes rajattomat, kuluttajat ostavat sieltä, mistä he saavat miellyttävimmän ostokokemuksen.</span><span class="sxs-lookup"><span data-stu-id="2d37f-105">Because so many choices are available, consumers will shop wherever they can have the most favorable experience.</span></span> <span data-ttu-id="2d37f-106">Pelkät hinnat ja tuotteet eivät välttämättä enää ole tärkeimpiä perusteita kuluttajille.</span><span class="sxs-lookup"><span data-stu-id="2d37f-106">In many cases, prices and products are no longer the top deciding factors for consumers.</span></span>

<span data-ttu-id="2d37f-107">Asiakaskokemuksen parantamiseksi vähittäismyyjillä on oltava näkyvyys varastoon reaaliaikaisesti ja kaikissa eri kanavissa.</span><span class="sxs-lookup"><span data-stu-id="2d37f-107">To help improve the customer experience, retailers must have visibility into their inventory in real time, across all their channels.</span></span> <span data-ttu-id="2d37f-108">Yksi kokonaisvaltainen näkymä varastoon voi auttaa optimoimaan tilausten toteuttamisen, kohdistamisen ja jakelun.</span><span class="sxs-lookup"><span data-stu-id="2d37f-108">A single, holistic view of all the inventory can help optimize order fulfillment, allocation, and distribution.</span></span> <span data-ttu-id="2d37f-109">Siksi jaetun tilausten hallinnan (JTH) järjestelmän käyttöönotto on muuttumassa entistä tärkeämmäksi vähittäismyyjille.</span><span class="sxs-lookup"><span data-stu-id="2d37f-109">Therefore, adoption and implementation of a distributed order management (DOM) system are becoming more imperative for retailers.</span></span>

<span data-ttu-id="2d37f-110">JTH optimoi tilausten toteutuksen järjestelmien ja prosessien monimutkaisessa verkostossa.</span><span class="sxs-lookup"><span data-stu-id="2d37f-110">DOM optimizes order fulfillment across a complex network of systems and processes.</span></span> <span data-ttu-id="2d37f-111">Se perustuu yhteen yhtenäiseen varastonäkymään kaikkialla organisaatiossa, jotta tilauksia voitaisiin hallita ja toteuttaa entistä tarkemmin ja kustannustehokkaammin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-111">It relies on a single, global view of inventory across the whole organization to intelligently manage orders, so that they are fulfilled accurately and in a more cost-effective manner.</span></span> <span data-ttu-id="2d37f-112">Parantamalla vähittäismyyjän toimitusketjun tehokkuutta JTH auttaa vähittäismyyjää vastaamaan asiakkaiden odotuksiin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-112">By improving the efficiency of a retailer's supply chain, DOM helps the retailer better meet customer expectations.</span></span>

<span data-ttu-id="2d37f-113">Seuraavassa kuvassa näkyy myyntitilauksen elinkaari JTH-järjestelmässä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-113">The following illustration shows the lifecycle of a sales order in a DOM system.</span></span>

<span data-ttu-id="2d37f-114">![Myyntitilauksen elinkaari JTH-kontekstissa](./media/flow.png "Myyntitilauksen elinkaari JTH-kontekstissa")</span><span class="sxs-lookup"><span data-stu-id="2d37f-114">![Sales order lifecycle in the context of DOM](./media/flow.png "Sales order lifecycle in the context of DOM")</span></span>

## <a name="set-up-dom"></a><span data-ttu-id="2d37f-115">JTH:n määrittäminen</span><span class="sxs-lookup"><span data-stu-id="2d37f-115">Set up DOM</span></span>

1. <span data-ttu-id="2d37f-116">Valitse **Järjestelmän hallinta \> Asetukset \> Käyttöoikeuden konfiguraatio**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-116">Go to **System administration \> Setup \> License configuration**.</span></span>
2. <span data-ttu-id="2d37f-117">Laajenna **Konfigurointiavaimet**-välilehdessä **Commerce**-solmu ja valitse **Jaettu tilausten hallinta** -valintaruutu.</span><span class="sxs-lookup"><span data-stu-id="2d37f-117">On the **Configuration keys** tab, expand the **Commerce** node, and then select the **Distributed Order Management** check box.</span></span>
3. <span data-ttu-id="2d37f-118">Siirry kohtaan **Retail ja Commerce \> Jaettu tilausten hallinta \> Asetukset \> JTH-parametrit**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-118">Go to **Retail and Commerce \> Distributed order management \> Setup \> DOM parameters**.</span></span>
4. <span data-ttu-id="2d37f-119">Määritä **Yleiset**-välilehdessä seuraavat arvot:</span><span class="sxs-lookup"><span data-stu-id="2d37f-119">On the **General** tab, set the following values:</span></span>

    - <span data-ttu-id="2d37f-120">**Ota jaettu tilausten hallinta käyttöön** – Määritä tähän arvoksi **Kyllä**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-120">**Enable distributed order management** – Set this option to **Yes**.</span></span>
    - <span data-ttu-id="2d37f-121">**Vahvista Bing Maps -palvelun käyttö JTH:ssa** – Määritä tähän arvoksi **Kyllä**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-121">**Confirm Bing Maps usage for DOM** – Set this option to **Yes**.</span></span>


        > [!NOTE]
        > <span data-ttu-id="2d37f-122">Voit määrittää tähän arvoksi **Kyllä** vain, jos **Ota Bing Maps käyttöön** -asetuksen arvo **Bing Maps** -välilehdessä **Commercen yhteiset parametrit** -sivulla (**Retail ja Commerce \> Pääkonttorin asetukset \> Parametrit \> Commercen yhteiset parametrit**) on myös **Kyllä** ja jos **Bing Maps -avain** -kenttään annetaan kelvollinen avain.</span><span class="sxs-lookup"><span data-stu-id="2d37f-122">You can set this option to **Yes** only if the **Enable Bing Maps** option on the **Bing Maps** tab of the **Commerce shared parameters** page (**Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**) is also set to **Yes**, and if a valid key is entered in the **Bing Maps key** field.</span></span>
        >
        > <span data-ttu-id="2d37f-123">[Bing Mapsin kehityskeskusportaalin](https://www.bingmapsportal.com/) avulla voit rajoittaa Bing Mapsin ‑ohjelmointirajapinnan avaimia niin, että ne ovat käytettävissä vain määrittämiltäsi toimialueilta.</span><span class="sxs-lookup"><span data-stu-id="2d37f-123">The [Bing Maps Dev Center](https://www.bingmapsportal.com/) portal allows you to restrict access on your Bing Maps API keys to a set of domains that you specify.</span></span> <span data-ttu-id="2d37f-124">Tämän ominaisuuden avulla asiakkaat voivat määrittää tiukat viittaaja-arvot tai IP-osoitealueet, joiden mukaan avain vahvistetaan.</span><span class="sxs-lookup"><span data-stu-id="2d37f-124">With this feature, customers can define a strict set of referrer values or IP address ranges that the key will be validated against.</span></span> <span data-ttu-id="2d37f-125">Sallittujen IP-osoitteiden luettelosta peräisin olevat pyynnöt käsitellään normaalisti, kun taas luettelon ulkopuolelta tulevat pyynnöt palauttavat Käyttö estetty ‑vastausten.</span><span class="sxs-lookup"><span data-stu-id="2d37f-125">Requests originating from your allow list will process normally, while requests from outside of your list will return an access denied response.</span></span> <span data-ttu-id="2d37f-126">Toimialueen suojauksen lisääminen API-avaimeen on valinnaista, ja entiselleen jätetyt avaimet toimivat edelleen.</span><span class="sxs-lookup"><span data-stu-id="2d37f-126">Adding domain security to your API key is optional and keys left as-is will continue to function.</span></span> <span data-ttu-id="2d37f-127">Avaimen sallittujen IP-osoitteiden luettelo ei ole riippuvainen muista avaimistasi, joten voit määrittää erilliset säännöt kullekin avaimellesi.</span><span class="sxs-lookup"><span data-stu-id="2d37f-127">The allow list for a key is independent from all of your other keys, enabling you to have distinct rules for each of your keys.</span></span> <span data-ttu-id="2d37f-128">Jaettu tilausten hallinta ei tue toimialueella viitattujen ominaisuuksien määrittämistä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-128">Distributed Order Management does not support the setting up of domain-referred properties.</span></span>


    - <span data-ttu-id="2d37f-129">**Pidätyskausi päivinä** – määritä, kauanko JTH-ajojen luomia täyttämistilauksia säilytetään järjestelmässä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-129">**Retention period in days** – Specify how long the fulfillment plans that DOM runs generate are kept in the system.</span></span> <span data-ttu-id="2d37f-130">**JTH-täyttämistietojen poistotyön asetukset** -erätyö poistaa kaikki täyttämissuunnitelmat, jotka ovat tässä määritettyä päivien määrää vanhempia.</span><span class="sxs-lookup"><span data-stu-id="2d37f-130">The **DOM fulfillment data deletion job setup** batch job will delete any fulfillment plan that is older than the number of days that you specify here.</span></span>
    - <span data-ttu-id="2d37f-131">**Hylkäämiskausi (päivinä)** – Määritä, kuinka paljon aikaa pitää kulua, ennen kuin hylätty tilausrivi voidaan määrittää samaan sijaintiin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-131">**Rejection period (in days)** – Specify how much time must pass before a rejected order line can be assigned to the same location.</span></span>

5. <span data-ttu-id="2d37f-132">Määritä **Selvitys**-välilehdessä seuraavat arvot:</span><span class="sxs-lookup"><span data-stu-id="2d37f-132">On the **Solver** tab, set the following values:</span></span>

    - <span data-ttu-id="2d37f-133">**Automaattisten täyttämisyritysten enimmäismäärä** – Määritä, kuinka monta kertaa JTH-moduuli yrittää välittää tilausrivin valittuun sijaintiin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-133">**Max auto-fulfillment attempts** – Specify how many times the DOM engine will try to broker an order line to a location.</span></span> <span data-ttu-id="2d37f-134">Jos JTH-moduuli ei voi välittää tilausriviä sijaintiin määritetyillä yrityskerroilla, se merkitsee tilausrivin poikkeukseksi.</span><span class="sxs-lookup"><span data-stu-id="2d37f-134">If the DOM engine can't broker an order line to a location in the specified number of attempts, it will flag the order line as an exception.</span></span> <span data-ttu-id="2d37f-135">Tämän jälkeen rivi ohitetaan tulevissa suorituksissa, kunnes tila nollataan manuaalisesti.</span><span class="sxs-lookup"><span data-stu-id="2d37f-135">It will then skip that line in future runs until the status is manually reset.</span></span>
    - <span data-ttu-id="2d37f-136">**Paikallisen myymälän alueen säde** – Kirjoita arvo.</span><span class="sxs-lookup"><span data-stu-id="2d37f-136">**Local store region radius** – Enter a value.</span></span> <span data-ttu-id="2d37f-137">Tämän kentän avulla määritetään, miten sijainnit ryhmitellään ja määritetään tasaveroisiksi etäisyyden osalta.</span><span class="sxs-lookup"><span data-stu-id="2d37f-137">This field helps determine how locations are grouped and considered equal in terms of distance.</span></span> <span data-ttu-id="2d37f-138">Jos esimerkiksi annat arvon **100**, jokaista myymälää ja jakelukeskusta 100 mailin säteellä täyttämistilauksen osoitteesta pidetään tasaveroisena etäisyyden osalta.</span><span class="sxs-lookup"><span data-stu-id="2d37f-138">For example, if you enter **100**, every store or distribution center within a 100-mile radius of the fulfillment address is considered equal in terms of distance.</span></span>
    - <span data-ttu-id="2d37f-139">**Selvityksen tyyppi** – Valitse arvo.</span><span class="sxs-lookup"><span data-stu-id="2d37f-139">**Solver type** – Select a value.</span></span> <span data-ttu-id="2d37f-140">Commercessa vapautetaan kaksi selvityksen tyyppiä: **Tuotannon selvitys** ja **Yksinkertaistettu selvitys**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-140">Two solver types are released with Commerce: **Production Solver** and **Simplified Solver**.</span></span> <span data-ttu-id="2d37f-141">Kaikille koneille, jotka suorittavat JTH:n (siis kaikki palvelimet, jotka kuuluvat DOMBatch-ryhmään), on valittava **Tuotannon selvitys**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-141">For all machines that will run DOM (that is, all servers that are part of the DOMBatch group), **Production Solver** must be selected.</span></span> <span data-ttu-id="2d37f-142">Tuotannon selvitys edellyttää erityisen lisenssiavaimen, joka oletusarvoisesti lisensoidaan ja otetaan käyttöön tuotantoympäristöissä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-142">The Production Solver requires the special license key that, by default, is licensed and deployed in production environments.</span></span> <span data-ttu-id="2d37f-143">Muille kuin tuotantoympäristöille tämä lisenssiavain on otettava käyttöön manuaalisesti.</span><span class="sxs-lookup"><span data-stu-id="2d37f-143">For non-production environments, this license key must be manually deployed.</span></span> <span data-ttu-id="2d37f-144">Voit ottaa lisenssiavaimen käyttöön manuaalisesti toimimalla seuraavasti:</span><span class="sxs-lookup"><span data-stu-id="2d37f-144">To manually deploy the license key, follow these steps:</span></span>

        1. <span data-ttu-id="2d37f-145">Avaa Microsoft Dynamics Lifecycle Servicesissa jaettu omaisuuskirjasto, valitse omaisuustyypiksi **Malli**, ja lataa **JTH-license**-tiedosto.</span><span class="sxs-lookup"><span data-stu-id="2d37f-145">In Microsoft Dynamics Lifecycle Services, open the Shared asset library, select **Model** as the asset type, and download the **DOM license** file.</span></span>
        1. <span data-ttu-id="2d37f-146">Käynnistä Microsoft IIS -palveluiden hallinta, valitse hiiren kakkospainikkeella **AOSService-verkkosivusto** ja valitse sitten **Selaa**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-146">Start Microsoft Internet Information Services (IIS) Manager, right-click **AOSService website**, and then select **Explore**.</span></span> <span data-ttu-id="2d37f-147">Windowsin resurssienhallintaikkuna avautuu kansiossa **\<AOS service root\>\\webroot**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-147">A Windows Explorer window is opened at **\<AOS service root\>\\webroot**.</span></span> <span data-ttu-id="2d37f-148">Kirjoita muistiin hakemiston \<AOS Service root\> polku, sillä sitä käytetään seuraavassa vaiheessa.</span><span class="sxs-lookup"><span data-stu-id="2d37f-148">Make a note of the \<AOS Service root\> path, because you will use it in the next step.</span></span>
        1. <span data-ttu-id="2d37f-149">Kopioi määritystiedosto hakemistoon **\<AOS Service root\>\\PackagesLocalDirectory\\DOM\\bin**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-149">Copy the configuration file in the **\<AOS Service root\>\\PackagesLocalDirectory\\DOM\\bin** directory.</span></span>
        1. <span data-ttu-id="2d37f-150">Siirry Headquarters-asiakasohjelmaan ja avaa **DOM-parametrit**-sivu.</span><span class="sxs-lookup"><span data-stu-id="2d37f-150">Go to the Headquarters client, and open the **DOM parameters** page.</span></span> <span data-ttu-id="2d37f-151">Valitse **Selvitys**-välilehden **Selvityksen tyyppi** -kentässä **Tuotannon selvitys** ja varmista, ettei virhesanomia ole näkyvissä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-151">On the **Solver** tab, in the **Solver type** field, select **Production solver**, and confirm that no error messages appear.</span></span>


        > [!NOTE]
        > <span data-ttu-id="2d37f-152">Yksinkertaistettu selvitys on vaihtoehto silloin, kun vähittäismyyjä haluaa kokeilla JTH-ominaisuutta ottamatta käyttöön erityistä lisenssiä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-152">The Simplified Solver is provided so that retailers can try out the DOM feature without having to deploy the special license.</span></span> <span data-ttu-id="2d37f-153">Organisaatioiden ei tulisi käyttää yksinkertaistettua selvitystä tuotantoympäristöissä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-153">Organizations should not use the Simplified Solver in production environments.</span></span>
        >
        > <span data-ttu-id="2d37f-154">Tuotannon selvitys parantaa suorituskykyä (kuten tilauksien ja tilausrivien määrää, joka voidaan käsitellä yhden suorituksen aikana) ja tulosten yhdistämistä (koska tilauserä ei ehkä tuota parhaita tuloksia joissakin tilanteissa).</span><span class="sxs-lookup"><span data-stu-id="2d37f-154">The Production Solver improves performance (such as the number of orders and order lines that can be handled in a run) and convergence of results (since a batch of orders might not yield the best result in some scenarios).</span></span> <span data-ttu-id="2d37f-155">Jotkin säännöt, kuten **Osittaistilaukset**-sääntö ja **Sijaintien enimmäismäärä** -sääntö, edellyttävät tuotannon selvitystä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-155">Some rules like the **Partial orders** rule and the **Maximum number of locations** rule require Production Solver.</span></span>
     
6. <span data-ttu-id="2d37f-156">Siirry takaisin kohtaan **Retail ja Commerce \> Jaettu tilausten hallinta \> Asetukset \> JTH-parametrit**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-156">Go back to **Retail and Commerce \> Distributed order management \> Setup \> DOM parameters**.</span></span>
7. <span data-ttu-id="2d37f-157">Määritä **Numerosarjat**-välilehdessä tarvittavat numerosarjat eri JTH-yksiköille.</span><span class="sxs-lookup"><span data-stu-id="2d37f-157">On the **Number sequences** tab, assign the required number sequences to the various DOM entities.</span></span>

    > [!NOTE]
    > <span data-ttu-id="2d37f-158">Ennen kuin numerosarjat voidaan määrittää näille yksiköille, ne on määritettävä **Numerosarjat**-sivulla (**Organisaation hallinto \> Numerosarjat \> Numerosarjat**).</span><span class="sxs-lookup"><span data-stu-id="2d37f-158">Before the number sequences can be assigned to the entities, they must be defined on the **Number sequences** page (**Organization administration \> Number sequences \> Number sequences**).</span></span>

8. <span data-ttu-id="2d37f-159">JTH-ominaisuus tukee erilaisia JTH-sääntöjen määrityksiä, ja organisaatiot voivat määrittää useita sääntöjä liiketoiminnan tarpeiden mukaan.</span><span class="sxs-lookup"><span data-stu-id="2d37f-159">The DOM feature supports the definition of various types of DOM rules, and organizations can configure multiple rules, depending on their business needs.</span></span> <span data-ttu-id="2d37f-160">JTH-säännöt voidaan määrittää sijaintiryhmälle tai yksittäiselle sijainnille sekä tietylle tuoteluokalle, tuotteelle tai variantille.</span><span class="sxs-lookup"><span data-stu-id="2d37f-160">DOM rules can be defined for a group of locations or individual locations, and for a specific product category, product, or variant.</span></span> <span data-ttu-id="2d37f-161">Voit luoda JTH-säännöissä käytettävät sijaintien ryhmittelyt seuraavasti:</span><span class="sxs-lookup"><span data-stu-id="2d37f-161">To create the grouping of locations that must be used for the DOM rules, follow these steps:</span></span>

    1. <span data-ttu-id="2d37f-162">Siirry kohtaan **Retail ja Commerce \> Kanavan asetukset \> Täytäntöönpanoryhmät**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-162">Go to **Retail and Commerce \> Channel setup \> Fulfillment groups**.</span></span>
    2. <span data-ttu-id="2d37f-163">Valitse **Uusi** ja kirjoita uuden ryhmän nimi ja kuvaus.</span><span class="sxs-lookup"><span data-stu-id="2d37f-163">Select **New**, and enter a name and description for the new group.</span></span>
    3. <span data-ttu-id="2d37f-164">Valitse **Tallenna**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-164">Select **Save**.</span></span>
    4. <span data-ttu-id="2d37f-165">Voit lisätä ryhmään yksittäisen sijainnin valitsemalla **Lisää rivi**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-165">Select **Add line** to add a single location to the group.</span></span> <span data-ttu-id="2d37f-166">Vaihtoehtoisesti voit lisätä useita sijainteja valitsemalla **Lisää rivejä**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-166">Alternatively, select **Add lines** to add multiple locations.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="2d37f-167">Commerce 10.0.12:ssa ja sitä uudemmassa versiossa **Mahdollisuus määrittää sijainniksi Lähetys tai Nouto on otettu käyttöön täyttämisryhmässä** -vaihtoehto on oltava otettuna käyttöön **Ominaisuuden hallinta** -työtilassa.</span><span class="sxs-lookup"><span data-stu-id="2d37f-167">In Commerce version 10.0.12 and higher, **Ability to specify locations as 'Shipping' or 'Pickup' enabled within Fulfillment group** must be enabled in the **Feature Management** workspace.</span></span>
    >
    > <span data-ttu-id="2d37f-168">Tämä ominaisuus lisää uudet määritykset **Täyttämisryhmä**-sivulla, joten voit määrittää, käytetäänkö varastoa lähetykseen vai käytetäänkö varastoa ja myymälää yhdessä lähetykseen, noutoon tai molempiin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-168">This feature add new configurations on the **Fulfillment group** page so you can define if the warehouse can be used for shipping or if the warehouse/store combination can be used for shipping, pickup, or both.</span></span> 
    >
    > <span data-ttu-id="2d37f-169">Jos otat ominaisuuden käyttöön, sijainnin valintavaihtoehdot päivitetään, kun nouto- tai toimitustilauksia luodaan myyntipisteessä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-169">If you enable the feature, the options available for location selection when you create pickup or shipment orders in POS will be updated.</span></span>
    >
    > <span data-ttu-id="2d37f-170">Kun ominaisuus otetaan käyttöön, myyntipisteen sivut päivitetään, kun valitaan kaikkien tai valittujen toimitus.</span><span class="sxs-lookup"><span data-stu-id="2d37f-170">Enabling the feature also results in updated pages in POS when the "ship all" or "ship selected" operations are selected.</span></span>

9. <span data-ttu-id="2d37f-171">Voit määrittää säännöt valitsemalla **Retail ja Commerce \> Jaettu tilausten hallinta \> Asetukset \> Sääntöjen hallinta**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-171">To define rules, go to **Retail and Commerce \> Distributed order management \> Setup \> Manage rules**.</span></span> <span data-ttu-id="2d37f-172">Tällä hetkellä tuetaan seuraavia DOM-sääntöjä:</span><span class="sxs-lookup"><span data-stu-id="2d37f-172">The following DOM rules are currently supported:</span></span>

    - <span data-ttu-id="2d37f-173">**Vähimmäisvarastosääntö** – Tämäntyyppisen säännön avulla organisaatiot voivat merkitä tuotteen tietyn määrän erityiseksi muihin tarkoituksiin kuin tilauksen täytäntöönpanoon.</span><span class="sxs-lookup"><span data-stu-id="2d37f-173">**Minimum inventory rule** – This rule type lets organizations "ring fence" a specific quantity of a product for purposes other than order fulfillment.</span></span> <span data-ttu-id="2d37f-174">Esimerkiksi organisaatiot eivät ehkä halua DOM-ajon kohdistavan myymälässä saatavilla olevan varaston koko määrää tilausten täytäntöönpanoon.</span><span class="sxs-lookup"><span data-stu-id="2d37f-174">For example, organizations might not want DOM to consider all the inventory that is available in a store for order fulfillment.</span></span> <span data-ttu-id="2d37f-175">Sen sijaan voidaan haluta varata osa saldosta fyysiseen kauppaan tuleville asiakkaille.</span><span class="sxs-lookup"><span data-stu-id="2d37f-175">Instead, they might want to reserve some inventory for walk-in customers.</span></span> <span data-ttu-id="2d37f-176">Kun käytetään tämäntyyppistä sääntöä, voidaan määrittää vähimmäisvarasto, jota täytyy ylläpitää tietylle tuoteluokalle, yksittäiselle tuotteelle tai tuotevariantille yhtä sijaintia tai sijaintiryhmää kohden.</span><span class="sxs-lookup"><span data-stu-id="2d37f-176">When this rule type is used, you can define the minimum inventory to keep for a category of products, an individual product, or a product variant per location or group of locations.</span></span>
    - <span data-ttu-id="2d37f-177">**Täyttämissijainnin prioriteettisääntö** – Tämäntyyppisen säännön avulla organisaatiot voivat määrittää sijaintihierarkian DOM-moduulin priorisointia varten, kun se yrittää tunnistaa tiettyjen tuotteiden täyttämissijainnit.</span><span class="sxs-lookup"><span data-stu-id="2d37f-177">**Fulfillment location priority rule** – This rule type lets organizations define a hierarchy of locations to establish the priority that the DOM engine considers when it tries to identify fulfillment locations for specific products.</span></span> <span data-ttu-id="2d37f-178">Prioriteettien arvot voivat olla välillä on 1–10, jossa 1 on suurin prioriteetti ja 10 on pienin prioriteetti.</span><span class="sxs-lookup"><span data-stu-id="2d37f-178">The valid range of priorities is 1 through 10, where 1 is the highest priority and 10 is the lowest priority.</span></span> <span data-ttu-id="2d37f-179">Suuren prioriteetin sijainteja käytetään ennen sijainteja, joilla on alhaisempi prioriteetti.</span><span class="sxs-lookup"><span data-stu-id="2d37f-179">Locations that have higher priority are considered before locations that have lower priority.</span></span> <span data-ttu-id="2d37f-180">Jos sääntö määritetään kovana rajoitussääntönä, tilaukset välitetään vain sijainteihin, joille on määritetty prioriteetti.</span><span class="sxs-lookup"><span data-stu-id="2d37f-180">If the rule is defined as a hard constraint rule, orders are brokered only to locations that priorities are defined for.</span></span>
    - <span data-ttu-id="2d37f-181">**Osittaistilausten sääntö** – Tämän säännön avulla organisaatiot voivat määrittää, voidaanko tilaus tai tilausrivit toteuttaa vain osittain.</span><span class="sxs-lookup"><span data-stu-id="2d37f-181">**Partial orders rule** – This rule lets organizations define whether an order or order lines can be partially fulfilled.</span></span> <span data-ttu-id="2d37f-182">Seuraavat parametrit ovat käytettävissä:</span><span class="sxs-lookup"><span data-stu-id="2d37f-182">The following parameters are available:</span></span>

        - <span data-ttu-id="2d37f-183">**Täytetäänkö osittaistilaukset?**</span><span class="sxs-lookup"><span data-stu-id="2d37f-183">**Fulfill partial orders?**</span></span> <span data-ttu-id="2d37f-184">– Jos tämä asetus on **Kyllä**, JTH voi täyttää vain osan tilausrivin määrästä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-184">– If this option is set to **Yes**, DOM can fulfill only part of the quantity on an order line.</span></span> <span data-ttu-id="2d37f-185">Osittainen täyttäminen saavutetaan jakamalla tilausrivi.</span><span class="sxs-lookup"><span data-stu-id="2d37f-185">This partial fulfillment is achieved by splitting the order line.</span></span>
        - <span data-ttu-id="2d37f-186">**Täytetäänkö osittaiset rivit?**</span><span class="sxs-lookup"><span data-stu-id="2d37f-186">**Fulfill partial lines?**</span></span> <span data-ttu-id="2d37f-187">– Jos tämä asetus on **Kyllä**, JTH voi täyttää vain osan tilausrivien määristä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-187">– If this option is set to **Yes**, DOM can fulfill a partial quantity of order lines.</span></span> <span data-ttu-id="2d37f-188">Osittainen täyttäminen saavutetaan jakamalla tilausrivi.</span><span class="sxs-lookup"><span data-stu-id="2d37f-188">This partial fulfillment is achieved by splitting the order line.</span></span>
        - <span data-ttu-id="2d37f-189">**Täytä tilaus vain yhdestä sijainnista** – Jos tämä asetus on **Kyllä**, JTH varmistaa, että tilauksen kaikki rivit täytetään yhdestä sijainnista.</span><span class="sxs-lookup"><span data-stu-id="2d37f-189">**Fulfill order from one location only** – If this option is set to **Yes**, DOM makes sure that all lines on an order are fulfilled from a single location.</span></span>


        <span data-ttu-id="2d37f-190">Seuraavassa taulukossa kuvataan toimintaa, kun määritetään näiden parametrien yhdistelmiä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-190">The following table explains the behavior when a combination of these parameters is defined.</span></span>

        | <span data-ttu-id="2d37f-191">Yhdistelmänumero</span><span class="sxs-lookup"><span data-stu-id="2d37f-191">Combination number</span></span> | <span data-ttu-id="2d37f-192">Täytä osittaistilaukset</span><span class="sxs-lookup"><span data-stu-id="2d37f-192">Fulfill partial orders</span></span> | <span data-ttu-id="2d37f-193">Täytä osittaiset rivit</span><span class="sxs-lookup"><span data-stu-id="2d37f-193">Fulfill partial lines</span></span> | <span data-ttu-id="2d37f-194">Täytä tilaus vain yhdestä sijainnista</span><span class="sxs-lookup"><span data-stu-id="2d37f-194">Fulfill order from one location only</span></span> | <span data-ttu-id="2d37f-195">Kuvaus</span><span class="sxs-lookup"><span data-stu-id="2d37f-195">Description</span></span> |
        |------|------------------------|-----------------------|--------------------------------------|-------------|
        | <span data-ttu-id="2d37f-196">1</span><span class="sxs-lookup"><span data-stu-id="2d37f-196">1</span></span>    | <span data-ttu-id="2d37f-197">Kyllä</span><span class="sxs-lookup"><span data-stu-id="2d37f-197">Yes</span></span>                    | <span data-ttu-id="2d37f-198">Kyllä</span><span class="sxs-lookup"><span data-stu-id="2d37f-198">Yes</span></span>                   | <span data-ttu-id="2d37f-199">Kyllä</span><span class="sxs-lookup"><span data-stu-id="2d37f-199">Yes</span></span>                                  | <span data-ttu-id="2d37f-200">Tilauksesta voidaan täyttää vain muutama rivi ja yksittäiset rivit voidaan täyttää osittain, mutta kaikki rivit tulee täyttää samasta sijainnista JTH-suoritusesiintymän yhteydessä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-200">A few lines of the order can be fulfilled, and individual lines can be partially fulfilled, but all the lines must be from the same location in an instance of the DOM run.</span></span> <span data-ttu-id="2d37f-201">(Tätä yhdistelmää ei tueta tällä hetkellä.)</span><span class="sxs-lookup"><span data-stu-id="2d37f-201">(This combination isn't currently supported.)</span></span> |
        | <span data-ttu-id="2d37f-202">2</span><span class="sxs-lookup"><span data-stu-id="2d37f-202">2</span></span>    | <span data-ttu-id="2d37f-203">Kyllä</span><span class="sxs-lookup"><span data-stu-id="2d37f-203">Yes</span></span>                    | <span data-ttu-id="2d37f-204">Ei</span><span class="sxs-lookup"><span data-stu-id="2d37f-204">No</span></span>                    | <span data-ttu-id="2d37f-205">Kyllä</span><span class="sxs-lookup"><span data-stu-id="2d37f-205">Yes</span></span>                                  | <span data-ttu-id="2d37f-206">Tilauksesta voidaan täyttää vain muutama rivi, mutta yksittäisiä rivejä ei voida täyttää vain osittain, ja kaikki täytetyt rivit tulee täyttää samasta sijainnista JTH-suoritusesiintymän yhteydessä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-206">A few lines of the order can be fulfilled, but individual lines can't be partially fulfilled, and all the fulfilled lines must be from the same location in an instance of the DOM run.</span></span> <span data-ttu-id="2d37f-207">(Tätä yhdistelmää ei tueta tällä hetkellä.)</span><span class="sxs-lookup"><span data-stu-id="2d37f-207">(This combination isn't currently supported.)</span></span> |
        | <span data-ttu-id="2d37f-208">3</span><span class="sxs-lookup"><span data-stu-id="2d37f-208">3</span></span>    | <span data-ttu-id="2d37f-209">Kyllä</span><span class="sxs-lookup"><span data-stu-id="2d37f-209">Yes</span></span>                    | <span data-ttu-id="2d37f-210">Kyllä</span><span class="sxs-lookup"><span data-stu-id="2d37f-210">Yes</span></span>                   | <span data-ttu-id="2d37f-211">Ei</span><span class="sxs-lookup"><span data-stu-id="2d37f-211">No</span></span>                                   | <span data-ttu-id="2d37f-212">Tilauksesta voidaan täyttää vain muutama rivi, yksittäiset rivit voidaan täyttää vain osittain, ja kukin rivi voidaan täyttää useammasta kuin yhdestä sijainnista JTH-suoritusesiintymän yhteydessä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-212">A few lines of the order can be fulfilled, individual lines can be partially fulfilled, and each line can be fulfilled from more than one location in an instance of the DOM run.</span></span> |
        | <span data-ttu-id="2d37f-213">4\*</span><span class="sxs-lookup"><span data-stu-id="2d37f-213">4\*</span></span>  | <span data-ttu-id="2d37f-214">Ei</span><span class="sxs-lookup"><span data-stu-id="2d37f-214">No</span></span>                     | <span data-ttu-id="2d37f-215">Ei käytettävissä</span><span class="sxs-lookup"><span data-stu-id="2d37f-215">Not applicable</span></span>        | <span data-ttu-id="2d37f-216">Ei</span><span class="sxs-lookup"><span data-stu-id="2d37f-216">No</span></span>                                   | <span data-ttu-id="2d37f-217">Kaikki tilausrivit on täytettävä, yksittäisiä rivejä ei voida täyttää vain osittain ja kukin tilausrivi voidaan täyttää eri sijainnista.</span><span class="sxs-lookup"><span data-stu-id="2d37f-217">All order lines must be fulfilled, individual lines can't be partially fulfilled, and each order line can be fulfilled from a different location.</span></span> |
        | <span data-ttu-id="2d37f-218">5\*</span><span class="sxs-lookup"><span data-stu-id="2d37f-218">5\*</span></span>  | <span data-ttu-id="2d37f-219">Ei</span><span class="sxs-lookup"><span data-stu-id="2d37f-219">No</span></span>                     | <span data-ttu-id="2d37f-220">Ei käytettävissä</span><span class="sxs-lookup"><span data-stu-id="2d37f-220">Not applicable</span></span>        | <span data-ttu-id="2d37f-221">Kyllä</span><span class="sxs-lookup"><span data-stu-id="2d37f-221">Yes</span></span>                                  | <span data-ttu-id="2d37f-222">Kaikki tilausrivit on täytettävä, yksittäisiä rivejä ei voida täyttää vain osittain ja kaikki tilausrivit voidaan toimittaa vain yhdestä sijainnista.</span><span class="sxs-lookup"><span data-stu-id="2d37f-222">All order lines must be fulfilled, individual lines can't be partially fulfilled, and all the order lines can be delivered from one location only.</span></span> |
        | <span data-ttu-id="2d37f-223">6\*</span><span class="sxs-lookup"><span data-stu-id="2d37f-223">6\*</span></span>  | <span data-ttu-id="2d37f-224">Ei</span><span class="sxs-lookup"><span data-stu-id="2d37f-224">No</span></span>                     | <span data-ttu-id="2d37f-225">Ei käytettävissä</span><span class="sxs-lookup"><span data-stu-id="2d37f-225">Not applicable</span></span>        | <span data-ttu-id="2d37f-226">Ei</span><span class="sxs-lookup"><span data-stu-id="2d37f-226">No</span></span>                                   | <span data-ttu-id="2d37f-227">Tämä yhdistelmä toimii samalla tavalla kuin yhdistelmä 4, koska **Täytä osittaiset rivit** -asetukseksi ei voi määrittää **Kyllä**, kun **Täytä osittaistilaukset** -asetuksella on arvo **Ei**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-227">This combination works like combination 4, because **Fulfill partial lines** can't be set to **Yes** when **Fulfill partial orders** is set to **No**.</span></span> |
        | <span data-ttu-id="2d37f-228">7\*</span><span class="sxs-lookup"><span data-stu-id="2d37f-228">7\*</span></span>  | <span data-ttu-id="2d37f-229">Ei</span><span class="sxs-lookup"><span data-stu-id="2d37f-229">No</span></span>                     | <span data-ttu-id="2d37f-230">Ei käytettävissä</span><span class="sxs-lookup"><span data-stu-id="2d37f-230">Not applicable</span></span>        | <span data-ttu-id="2d37f-231">Kyllä</span><span class="sxs-lookup"><span data-stu-id="2d37f-231">Yes</span></span>                                  | <span data-ttu-id="2d37f-232">Tämä yhdistelmä toimii samalla tavalla kuin yhdistelmä 5, koska **Täytä osittaiset rivit** -asetukseksi ei voi määrittää **Kyllä**, kun **Täytä osittaistilaukset** -asetuksella on arvo **Ei**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-232">This combination works like combination 5, because **Fulfill partial lines** can't be **Yes** when **Fulfill partial orders** is **No**.</span></span> |
        | <span data-ttu-id="2d37f-233">8</span><span class="sxs-lookup"><span data-stu-id="2d37f-233">8</span></span>    | <span data-ttu-id="2d37f-234">Kyllä</span><span class="sxs-lookup"><span data-stu-id="2d37f-234">Yes</span></span>                    | <span data-ttu-id="2d37f-235">Ei</span><span class="sxs-lookup"><span data-stu-id="2d37f-235">No</span></span>                    | <span data-ttu-id="2d37f-236">Ei</span><span class="sxs-lookup"><span data-stu-id="2d37f-236">No</span></span>                                   | <span data-ttu-id="2d37f-237">Tilauksesta voidaan täyttää vain muutama rivi, mutta yksittäisiä rivejä ei voida toteuttaa vain osittain, ja eri tilausrivit voidaan täyttää useammasta kuin yhdestä sijainnista DOM-suoritusesiintymän yhteydessä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-237">A few lines of the order can be fulfilled, but individual lines can't be partially fulfilled, and the various order lines can be fulfilled from more than one location in an instance of the DOM run.</span></span> |
        | <span data-ttu-id="2d37f-238">9\*</span><span class="sxs-lookup"><span data-stu-id="2d37f-238">9\*</span></span>  | <span data-ttu-id="2d37f-239">Ei</span><span class="sxs-lookup"><span data-stu-id="2d37f-239">No</span></span>                     | <span data-ttu-id="2d37f-240">Ei käytettävissä</span><span class="sxs-lookup"><span data-stu-id="2d37f-240">Not applicable</span></span>        | <span data-ttu-id="2d37f-241">Kyllä</span><span class="sxs-lookup"><span data-stu-id="2d37f-241">Yes</span></span>                                  | <span data-ttu-id="2d37f-242">Kaikki tilausrivit on täytettävä ja ne on täytettävä vain yhdestä sijainnista.</span><span class="sxs-lookup"><span data-stu-id="2d37f-242">All order lines must be fulfilled, and all the order lines must be fulfilled from one location only.</span></span> |

        <span data-ttu-id="2d37f-243">\* Jos **Täytä osittaistilaukset** -asetukseksi määritetään **Ei**, **Täytä osittaiset rivit** -asetuksen arvona on aina arvo **Ei** riippumatta siitä, mikä arvo asetukseen on määritetty.</span><span class="sxs-lookup"><span data-stu-id="2d37f-243">\* If **Fulfill partial orders** is set to **No**, **Fulfill partial lines** is always considered to be set to **No**, regardless of how it's actually set.</span></span>

        > [!NOTE]
        > <span data-ttu-id="2d37f-244">Retail-sovelluksen versiossa 10.0.5 **Täytä tilaus vain yhdestä sijainnista** -parametrin arvoksi muutettiin **Täyttämissijaintien enimmäismäärä**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-244">In Retail version 10.0.5, the parameter **Fulfill order from one location only** was changed to **Maximum fulfilling locations**.</span></span> <span data-ttu-id="2d37f-245">Sen sijaan, että käyttäjä voisi määrittää tilausten täyttämisen vain yhdestä sijainnista tai niin useasta sijainnista kuin mahdollista, käyttäjät voivat nyt määrittää, voidaanko tilaus täyttää tietystä sijaintijoukosta (enintään 5 sijaintia) tai niin useasta sijainnista kuin on mahdollista.</span><span class="sxs-lookup"><span data-stu-id="2d37f-245">Instead of allowing a user to configure whether orders can be fulfilled from one location only or fulfilled from as many locations as it can be, users can now specify whether the fulfillment can be from a definite set of locations (up to 5) or from as many locations as it can be.</span></span> <span data-ttu-id="2d37f-246">Tämä mahdollistaa aiempaa joustavamman tilauksen täyttämissijaintien määrän määrittämisen.</span><span class="sxs-lookup"><span data-stu-id="2d37f-246">This provides more flexibility in terms of how many locations the order can be fulfilled from.</span></span> <span data-ttu-id="2d37f-247">Tämä sääntö toimii vain tuotannon selvityksen kanssa.</span><span class="sxs-lookup"><span data-stu-id="2d37f-247">This rule only works with Production Solver.</span></span> 

   - <span data-ttu-id="2d37f-248">**Offline-täyttämisen sijaintisääntö** – tämän säännön avulla organisaatiot voivat määrittää sijainnin tai sijaintiryhmän offline-sijainniksi tai DOM:n ulkopuolelle, jotta tilauksia ei voi määrittää täytettäväksi näistä sijainneista.</span><span class="sxs-lookup"><span data-stu-id="2d37f-248">**Offline fulfillment location rule** – This rule lets organizations specify a location or group of locations as offline or unavailable to DOM, so that orders can't be assigned to those locations for fulfillment.</span></span>
    - <span data-ttu-id="2d37f-249">**Hylkäysten enimmäismäärän sääntö** – Tämän säännön avulla organisaatiot voivat määrittää hylkäyksille raja-arvon.</span><span class="sxs-lookup"><span data-stu-id="2d37f-249">**Maximum rejects rule** – This rule lets organizations define a threshold for rejections.</span></span> <span data-ttu-id="2d37f-250">Kun raja-arvo saavutetaan, JTH-käsittelijä merkitsee tilauksen vai tilausrivin poikkeukseksi ja jättää sen jatkokäsittelyn ulkopuolelle.</span><span class="sxs-lookup"><span data-stu-id="2d37f-250">When the threshold is reached, the DOM processor will mark an order or order line as an exception, and exclude it from further processing.</span></span>

        <span data-ttu-id="2d37f-251">Sen jälkeen, kun tilausrivit on määritetty sijaintiin, sijainti voi hylätä määritetyn tilausrivin, koska se ei jostakin syystä pysty täyttämään tilausriviä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-251">After order lines are assigned to a location, the location can reject an assigned order line, because it might not be able to fulfill that line for some reasons.</span></span> <span data-ttu-id="2d37f-252">Hylätyt rivit merkitään poikkeukseksi ja palautetaan takaisin pooliin seuraavaa suorituskertaa varten.</span><span class="sxs-lookup"><span data-stu-id="2d37f-252">Rejected lines are marked as an exception and put back into the pool for processing in the next run.</span></span> <span data-ttu-id="2d37f-253">Seuraavan ajon aikana JTH yrittää määrittää hylätyn rivin toiseen sijaintiin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-253">During the next run, DOM will try to assign the rejected line to a different location.</span></span> <span data-ttu-id="2d37f-254">Myös uusi sijainti voi hylätä määritetyn tilausrivin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-254">The new location can also reject the assigned order line.</span></span> <span data-ttu-id="2d37f-255">Tämä määrittämisen ja hylkäämisen sykli voi tapahtua useita kertoja.</span><span class="sxs-lookup"><span data-stu-id="2d37f-255">This cycle of assignment and rejection can occur multiple times.</span></span> <span data-ttu-id="2d37f-256">Kun hylkäysten määrä ylittää määritetyn raja-arvon, JTH merkitsee tilausrivin pysyväksi poikkeukseksi eikä enää ota kyseistä tilausriviä määritettäväksi.</span><span class="sxs-lookup"><span data-stu-id="2d37f-256">When the rejection count hits the threshold that is defined, DOM will mark the order line as a permanent exception and won't pick the line for assignment again.</span></span> <span data-ttu-id="2d37f-257">JTH ottaa tilausrivin uudelleen määritettäväksi vain, jos käyttäjä nollaa tilausrivin tilan manuaalisesti.</span><span class="sxs-lookup"><span data-stu-id="2d37f-257">DOM will consider the order line again for reassignment only if a user manually resets the status of the order line.</span></span>

   - <span data-ttu-id="2d37f-258">**Enimmäisetäisyyssääntö** – Tämä säännön avulla organisaatiot voivat määrittää enimmäisetäisyyden tilauksen täyttävälle sijainnille tai sijaintiryhmälle.</span><span class="sxs-lookup"><span data-stu-id="2d37f-258">**Maximum distance rule** – This rule lets organizations define the maximum distance that a location or group of locations can be to fulfill the order.</span></span> <span data-ttu-id="2d37f-259">Jos sijainnille on määritetty päällekkäisiä enimmäisetäisyyssääntöjä, JTH käyttää pienintä sijainnille määritettyä enimmäisetäisyyttä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-259">If overlapping maximum distance rules are defined for a location, DOM will apply the lowest maximum distance that is defined for that location.</span></span>
    - <span data-ttu-id="2d37f-260">**Tilausten enimmäismäärän sääntö** – Tämän säännön avulla organisaatiot voivat määrittää tilausten enimmäismäärän, jonka sijainti tai sijaintiryhmä voi käsitellä kalenteripäivän aikana.</span><span class="sxs-lookup"><span data-stu-id="2d37f-260">**Maximum orders rule** – This rule lets organizations define the maximum number of orders that a location or group of locations can process during a calendar day.</span></span> <span data-ttu-id="2d37f-261">Jos sijainnille määritetään tilausten enimmäismäärä yhden päivän aikana, JTH ei määritä uusia tilauksia kyseiseen sijaintiin kyseisen kalenteripäivän aikana.</span><span class="sxs-lookup"><span data-stu-id="2d37f-261">If the maximum number of orders is assigned to a location in a single day, DOM won't assign any more orders to that location for the rest of that calendar day.</span></span>

   <span data-ttu-id="2d37f-262">Seuraavassa on lueteltu yleisiä määritteitä, joita voidaan määrittää edellä esitellyille sääntötyypeille:</span><span class="sxs-lookup"><span data-stu-id="2d37f-262">Here are some of the common attributes that can be defined for all the preceding rule types:</span></span>

   - <span data-ttu-id="2d37f-263">**Aloituspäivä** ja **Päättymispäivä** – Jokaiselle säännölle voidaan määrittää päivämääräväli voimassaoloajaksi näiden kenttien avulla.</span><span class="sxs-lookup"><span data-stu-id="2d37f-263">**Start date** and **End date** – Every rule can be made date-effective by using the these fields.</span></span>
   - <span data-ttu-id="2d37f-264">**Ei käytössä** – Vain ne säännöt, joiden arvo tässä kentässä on **Ei**, otetaan huomioon JTH-suorituksessa.</span><span class="sxs-lookup"><span data-stu-id="2d37f-264">**Disabled** – Only rules that have a value of **No** for this field are considered in a DOM run.</span></span>
   - <span data-ttu-id="2d37f-265">**Tiukka rajoitus** – Sääntö voidaan määrittää tiukaksi rajoitukseksi tai ei-tiukaksi rajoitukseksi.</span><span class="sxs-lookup"><span data-stu-id="2d37f-265">**Hard constraint** – A rule can be defined as either a hard constraint or not a hard constraint.</span></span> <span data-ttu-id="2d37f-266">Kukin JTH-suoritus käy läpi kaksi toistoa.</span><span class="sxs-lookup"><span data-stu-id="2d37f-266">Every DOM run goes through two iterations.</span></span> <span data-ttu-id="2d37f-267">Ensimmäisessä toistossa jokaista sääntöä pidetään tiukkana rajoituksena riippumatta tämän kentän arvosta.</span><span class="sxs-lookup"><span data-stu-id="2d37f-267">In the first iteration, every rule is treated as a hard constraint rule, regardless of the setting of this field.</span></span> <span data-ttu-id="2d37f-268">Toisin sanoen kaikki säännöt ovat käytössä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-268">In other words, every rule is applied.</span></span> <span data-ttu-id="2d37f-269">Ainoa poikkeus on **Sijainnin prioriteetti** -sääntö.</span><span class="sxs-lookup"><span data-stu-id="2d37f-269">The only exception is the **Location priority** rule.</span></span> <span data-ttu-id="2d37f-270">Toisessa toistossa säännöt, joita ei ole määritetty tiukoiksi rajoituksiksi, poistetaan, ja tilauksille tai tilausriveille, joille ei määritetty sijaintia kaikkia sääntöjä käytettäessä, määritetään sijainnit.</span><span class="sxs-lookup"><span data-stu-id="2d37f-270">In the second iteration, the rules that weren't defined as hard constraint rules are removed, and the order or order lines that weren't assigned to locations when all the rules were applied are assigned to locations.</span></span>

10. <span data-ttu-id="2d37f-271">Täyttämisprofiileja käytetään sääntökokoelmien, yritysten, myyntitilausten alkuperien ja toimitustapojen ryhmittelyyn.</span><span class="sxs-lookup"><span data-stu-id="2d37f-271">Fulfillment profiles are used to group a collection of rules, legal entities, sales order origins, and modes of delivery.</span></span> <span data-ttu-id="2d37f-272">Jokainen JTH-suoritus on tiettyä täyttämisprofiilia varten.</span><span class="sxs-lookup"><span data-stu-id="2d37f-272">Every DOM run is for a specific fulfillment profile.</span></span> <span data-ttu-id="2d37f-273">Näin organisaatiot voivat määrittää ja suorittaa sääntöjoukkoja yritysjoukossa sellaisille tilauksille, joilla on tietyt myyntitilauksen alkuperät ja toimitustavat.</span><span class="sxs-lookup"><span data-stu-id="2d37f-273">In this way, organizations can define and run a set of rules for a set of legal entities, on orders that have specific sales order origins and modes of delivery.</span></span> <span data-ttu-id="2d37f-274">Jos siis pitää suorittaa eri sääntöjoukkoja myyntitilausten alkuperän tai toimitustavan mukaan, täyttämisprofiilit voidaan määrittää vastaavasti.</span><span class="sxs-lookup"><span data-stu-id="2d37f-274">Therefore, if different set of rules must be run for different sets of sales order origins or modes of delivery, the fulfillment profiles can be defined accordingly.</span></span> <span data-ttu-id="2d37f-275">Voit määrittää täyttämisprofiileita noudattamalla seuraavia ohjeita:</span><span class="sxs-lookup"><span data-stu-id="2d37f-275">To set up fulfillment profiles, follow these steps:</span></span>  

    1. <span data-ttu-id="2d37f-276">Siirry kohtaan **Retail ja Commerce \> Jaettu tilausten hallinta \> Asetukset \> Täyttämisprofiilit**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-276">Go to **Retail and Commerce \> Distributed order management \> Setup \> Fulfillment profiles**.</span></span>
    2. <span data-ttu-id="2d37f-277">Valitse **Uusi**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-277">Select **New**.</span></span>
    3. <span data-ttu-id="2d37f-278">Kirjoita arvot **Profiili**- ja **Kuvaus**-kenttiin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-278">Enter values in the **Profile** and **Description** fields.</span></span>
    4. <span data-ttu-id="2d37f-279">Määritä **Automaattinen tuloksen käyttö** -asetus.</span><span class="sxs-lookup"><span data-stu-id="2d37f-279">Set the **Auto apply result** option.</span></span> <span data-ttu-id="2d37f-280">Jos määrität tämän asetuksen arvoksi **Kyllä**, profiilin JTH-ajon tulokset kohdistetaan automaattisesti myyntitilauksen riveille.</span><span class="sxs-lookup"><span data-stu-id="2d37f-280">If you set this option to **Yes**, the results of the DOM run for the profile will be automatically applied to the sales order lines.</span></span> <span data-ttu-id="2d37f-281">Jos määrität arvoksi **Ei**, tuloksia voi tarkastella vain täyttämissuunnitelmassa.</span><span class="sxs-lookup"><span data-stu-id="2d37f-281">If you set it to **No**, the results can only be viewed in the fulfillment plan.</span></span> <span data-ttu-id="2d37f-282">Niitä ei kohdisteta myyntitilausriveille.</span><span class="sxs-lookup"><span data-stu-id="2d37f-282">They won't be applied to the sales order lines.</span></span>
    5. <span data-ttu-id="2d37f-283">Jos haluat, että DOM-profiili suoritetaan tilauksille, joilla on kaikki myyntitilausten alkuperät (mukaan lukien tilaukset, joissa myyntitilauksen alkuperää ei ole määritetty), määritä **Käsittele tilaukset, joilla on tyhjä myynnin alkuperä** -asetuksen arvoksi **Kyllä**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-283">If you want the DOM profile to be run for orders that have every sales order origin, including orders where the sales order origin is undefined, set the **Process orders with empty sales origin** option to **Yes**.</span></span> <span data-ttu-id="2d37f-284">Voit suorittaa profiilin vain joillekin myyntitilauksen alkuperille määrittämällä ne **Myynnin alkuperät** -sivulla jäljempänä esitetyllä tavalla.</span><span class="sxs-lookup"><span data-stu-id="2d37f-284">To run the profile for only a few sales order origins, you can define them on the **Sales origins** page, as explained later.</span></span>

    > [!NOTE]
    > <span data-ttu-id="2d37f-285">Commerce 10.0.12:ssa ja sitä uudemmassa versiossa **Mahdollisuus määrittää täyttämisryhmä täyttämisprofiiliin** -vaihtoehto on oltava otettuna käyttöön **Ominaisuuden hallinta** -työtilassa.</span><span class="sxs-lookup"><span data-stu-id="2d37f-285">In Commerce version 10.0.12 and higher, **Ability to assign Fulfillment group to a Fulfillment Profile** must be enabled in the **Feature Management** workspace.</span></span> 
    >
    > <span data-ttu-id="2d37f-286">Tämä toiminto lisää **Täyttämisprofiili**-sivulle uuden profiilin, joka voidaan liittää yhteen täyttämisryhmään.</span><span class="sxs-lookup"><span data-stu-id="2d37f-286">This feature adds a new configuration on the **Fulfillment profile** page that can be associated to a single fulfilment group.</span></span> 
    >
    > <span data-ttu-id="2d37f-287">Jos valitset täyttämisryhmän, kyseisen täyttämisprofiilin DOM-säännöt voidaan suorittaa täyttämisryhmään sisältyvissä toimitusvarastoissa.</span><span class="sxs-lookup"><span data-stu-id="2d37f-287">If you select the fulfilment group, the DOM rules for that fulfilment profile will efficiently run against the "shipping" warehouses included in the fulfilment group.</span></span> 
    > 
    > <span data-ttu-id="2d37f-288">Tämän toiminnon käyttö tehokkaasti edellyttää, että yksi täyttämisryhmä sisältää kaikki toimitusvarastot ja että kyseinen täyttämisryhmä liitetään sitten täyttämisprofiiliin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-288">To effectively use this feature, ensure that there is one fulfillment group that contains all the shipping warehouses, and then associate that fulfillment group to the fulfillment profile.</span></span>
    
    6. <span data-ttu-id="2d37f-289">Valitse **Yritykset**-pikavälilehdessä **Lisää** ja sitten sopiva yritys.</span><span class="sxs-lookup"><span data-stu-id="2d37f-289">On the **Legal entities** FastTab, select **Add**, and then select a legal entity.</span></span>
    7. <span data-ttu-id="2d37f-290">Valitse **Säännöt**-pikavälilehdessä **Lisää** ja sitten profiiliin linkitettävä sääntö.</span><span class="sxs-lookup"><span data-stu-id="2d37f-290">On the **Rules** FastTab, select **Add**, and then select the rule to link to the profile.</span></span>
    8. <span data-ttu-id="2d37f-291">Toista kahta edellistä vaihetta, kunnes kaikki tarvittavat säännöt on liitetty profiiliin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-291">Repeat the previous two steps until all the required rules are associated with the profile.</span></span>
    9. <span data-ttu-id="2d37f-292">Valitse **Tallenna**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-292">Select **Save**.</span></span>
    10. <span data-ttu-id="2d37f-293">Valitse toimintoruudun **Asetukset**-välilehdessä **Toimitustavat**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-293">On the Action Pane, on the **Setup** tab, select **Modes of delivery**.</span></span>
    11. <span data-ttu-id="2d37f-294">Valitse **Toimitustavat**-sivulla **Uusi**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-294">On the **Modes of delivery** page, select **New**.</span></span>
    12. <span data-ttu-id="2d37f-295">Valitse yritys kentässä **Yritys**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-295">In the **Company** field, select the legal entity.</span></span> <span data-ttu-id="2d37f-296">Yritysten luettelossa on vain aikaisemmin lisätyt yritykset.</span><span class="sxs-lookup"><span data-stu-id="2d37f-296">The list of companies is limited to the legal entities that you added earlier.</span></span>
    13. <span data-ttu-id="2d37f-297">Valitse **Toimitustapa**-kentässä tähän profiiliin liitettävä toimitustapa.</span><span class="sxs-lookup"><span data-stu-id="2d37f-297">In the **Mode of delivery** field, select the mode of delivery to associate with this profile.</span></span> <span data-ttu-id="2d37f-298">Toimitustapaa ei voi liittää useisiin aktiivisiin profiileihin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-298">A mode of delivery can't be associated with multiple active profiles.</span></span>
    14. <span data-ttu-id="2d37f-299">Toista kahta edellistä vaihetta, kunnes kaikki tarvittavat toimitustavat on liitetty profiiliin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-299">Repeat the previous two steps until all the required modes of delivery are associated with the profile.</span></span>
    15. <span data-ttu-id="2d37f-300">Sulje **Toimitustavat**-sivu.</span><span class="sxs-lookup"><span data-stu-id="2d37f-300">Close the **Modes of delivery** page.</span></span>
    16. <span data-ttu-id="2d37f-301">Valitse toimintoruudun **Asetukset**-välilehdessä **Myyntitilauksen alkuperät**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-301">On the Action Pane, on the **Setup** tab, select **Sales order origins**.</span></span>
    17. <span data-ttu-id="2d37f-302">Valitse **Myynnin alkuperät** -sivulla **Uusi**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-302">On the **Sales origins** page, select **New**.</span></span>
    18. <span data-ttu-id="2d37f-303">Valitse yritys kentässä **Yritys**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-303">In the **Company** field, select the legal entity.</span></span> <span data-ttu-id="2d37f-304">Yritysten luettelossa on vain aikaisemmin lisätyt yritykset.</span><span class="sxs-lookup"><span data-stu-id="2d37f-304">The list of companies is limited to the legal entities that you added earlier.</span></span>
    19. <span data-ttu-id="2d37f-305">Valitse **Myynnin alkuperä** -kentässä tähän profiiliin liitettävä myynnin alkuperä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-305">In the **Sales origin** field, select the sales origin to associate with this profile.</span></span> <span data-ttu-id="2d37f-306">Myynnin alkuperää ei voi liittää useisiin aktiivisiin profiileihin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-306">A sales origin can't be associated with multiple active profiles.</span></span>
    20. <span data-ttu-id="2d37f-307">Toista kahta edellistä vaihetta, kunnes kaikki tarvittavat myynnin alkuperät on liitetty profiiliin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-307">Repeat the previous two steps until all the required sales origins are associated with the profile.</span></span>
    21. <span data-ttu-id="2d37f-308">Sulje **Myynnin alkuperät** -sivu.</span><span class="sxs-lookup"><span data-stu-id="2d37f-308">Close the **Sales origins** page.</span></span>
    22. <span data-ttu-id="2d37f-309">Määritä **Ota profiili käyttöön** -asetukseksi **Kyllä**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-309">Set the **Enable profile** option to **Yes**.</span></span> <span data-ttu-id="2d37f-310">Jos asetuksissa on virheitä, saat varoitussanoman.</span><span class="sxs-lookup"><span data-stu-id="2d37f-310">If there are any errors in the setup, you receive a warning message.</span></span>

## <a name="dom-processing"></a><span data-ttu-id="2d37f-311">JTH-käsittely</span><span class="sxs-lookup"><span data-stu-id="2d37f-311">DOM processing</span></span>

<span data-ttu-id="2d37f-312">JTH suoritetaan vain erätyönä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-312">DOM will run only in a batch job.</span></span> <span data-ttu-id="2d37f-313">Voit määrittää JTH-ajojen erätyön seuraavasti.</span><span class="sxs-lookup"><span data-stu-id="2d37f-313">To configure the batch job for DOM runs, follow these steps.</span></span>

1. <span data-ttu-id="2d37f-314">Siirry kohtaan **Retail ja Commerce \> Jaettu tilausten hallinta \> Eräkäsittely \> JTH-käsittelijän työasetukset**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-314">Go to **Retail and Commerce \> Distributed order management \> Batch processing \> DOM processor job setup**.</span></span>
1. <span data-ttu-id="2d37f-315">Valitse **Parametrit**-pikavälilehden **Täyttämisprofiili** -kentässä profiili, jota varten JTH suoritetaan.</span><span class="sxs-lookup"><span data-stu-id="2d37f-315">On the **Parameters** FastTab, in the **Fulfillment profile** field, select a profile that DOM must be run for.</span></span>
1. <span data-ttu-id="2d37f-316">Valitse **Suorita taustalla** -pikavälilehden **Eräryhmä**-kentässä määritetty eräryhmä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-316">On the **Run in the background** FastTab, in the **Batch group** field, select a configured batch group.</span></span>
1. <span data-ttu-id="2d37f-317">Kirjoita **Tehtävän kuvaus** -kenttään erätyön nimi.</span><span class="sxs-lookup"><span data-stu-id="2d37f-317">In the **Task description** field, enter a name for the batch job.</span></span>
1. <span data-ttu-id="2d37f-318">Määritä **Toistuminen**-kohdassa erätyön toistuminen.</span><span class="sxs-lookup"><span data-stu-id="2d37f-318">Select **Recurrence**, and define the recurrence of the batch job.</span></span>
1. <span data-ttu-id="2d37f-319">Valitse **OK**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-319">Select **OK**.</span></span>

<span data-ttu-id="2d37f-320">Käsittelyn aikana JTH ottaa huomioon seuraavassa kuvatut tilaukset ja tilausrivit:</span><span class="sxs-lookup"><span data-stu-id="2d37f-320">At the time of processing, DOM will consider the order and order lines as described here:</span></span>

- <span data-ttu-id="2d37f-321">Myyntitilauksen alkuperään, toimitustapaan ja yritykseen liittyvät JTH-profiilissa määritetyt ehdot täyttävät tilausrivit, jotka täyttävät myös jonkin seuraavista ehdoista:</span><span class="sxs-lookup"><span data-stu-id="2d37f-321">Order lines that meet the criteria for sales order origins, modes of delivery, and legal entity as defined in the DOM profile, and that also meet any of these criteria:</span></span>

    - <span data-ttu-id="2d37f-322">Ne on luotu Commerce-kanavista.</span><span class="sxs-lookup"><span data-stu-id="2d37f-322">They are created from commerce channels.</span></span>
    - <span data-ttu-id="2d37f-323">JTH ei ole koskaan välittänyt niitä</span><span class="sxs-lookup"><span data-stu-id="2d37f-323">They have never been brokered by DOM.</span></span>
    - <span data-ttu-id="2d37f-324">JTH on välittänyt niitä aiemmin, mutta ne on merkitty poikkeuksiksi ja ovat yritysten määrän raja-arvon alapuolella.</span><span class="sxs-lookup"><span data-stu-id="2d37f-324">They have been brokered by DOM before, but they are marked as exceptions and are below the maximum threshold for attempts.</span></span>
    - <span data-ttu-id="2d37f-325">Toimitustapa ei ole nouto tai sähköinen toimitus.</span><span class="sxs-lookup"><span data-stu-id="2d37f-325">The mode of delivery isn't pick-up or electronic delivery.</span></span>
    - <span data-ttu-id="2d37f-326">Niitä ei ole merkitty toimitusta varten.</span><span class="sxs-lookup"><span data-stu-id="2d37f-326">They aren't marked for delivery.</span></span>
    - <span data-ttu-id="2d37f-327">Niitä ei ole manuaalisesti poissuljettu.</span><span class="sxs-lookup"><span data-stu-id="2d37f-327">They aren't manually excluded.</span></span>

- <span data-ttu-id="2d37f-328">Tilaukset,jotka eivät ole pidossa.</span><span class="sxs-lookup"><span data-stu-id="2d37f-328">Orders that aren't on hold</span></span>

<span data-ttu-id="2d37f-329">Sen jälkeen, kun JTH on käyttänyt sääntöjä, varaston rajoituksia ja optimointia, JTH valitsee sijainnin, joka on lähinnä asiakkaan toimitusosoitetta.</span><span class="sxs-lookup"><span data-stu-id="2d37f-329">After it applies the rules, inventory constraints, and optimization, DOM picks the location that is closest to the customer's delivery address.</span></span>

<span data-ttu-id="2d37f-330">![Myyntitilausten ehdot](./media/ordercriteria.png "Myyntitilausten ehdot")</span><span class="sxs-lookup"><span data-stu-id="2d37f-330">![Sales order criteria](./media/ordercriteria.png "Sales order criteria")</span></span>

## <a name="results-of-dom-runs"></a><span data-ttu-id="2d37f-331">JTH-suoritusten tulokset</span><span class="sxs-lookup"><span data-stu-id="2d37f-331">Results of DOM runs</span></span>

<span data-ttu-id="2d37f-332">Jos täyttämisprofiiliksi valitaan **Automaattinen käyttö**, ajon tulokset kohdistetaan automaattisesti myyntitilausriveille ja täyttämissuunnitelmaa voi tarkastella erikseen.</span><span class="sxs-lookup"><span data-stu-id="2d37f-332">If the fulfillment profile is set to **Auto apply**, the results of the run will be automatically applied to the sales order lines, and the fulfillment plan can be viewed separately.</span></span> <span data-ttu-id="2d37f-333">Jos täyttämisprofiiliksi ei kuitenkaan ole määritetty **Automaattinen käyttö**, ajon tulokset näkyvät vain täyttämissuunnitelman näkymässä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-333">However, if the fulfillment profile isn't set to **Auto apply**, the results of the run can be seen only from the fulfillment plan view.</span></span> 

<span data-ttu-id="2d37f-334">Näet kaikki luodut täyttämissuunnitelmat seuraavasti.</span><span class="sxs-lookup"><span data-stu-id="2d37f-334">To view all the fulfillment plans that are generated, follow these steps.</span></span>

1. <span data-ttu-id="2d37f-335">Siirry kohtaan **Retail ja Commerce \> Jaettu tilausten hallinta \> Jaettu tilausten hallinta**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-335">Go to **Retail and Commerce \> Distributed order management \> Distributed order management**.</span></span>
2. <span data-ttu-id="2d37f-336">Valitse **Jaettu tilausten hallinta** -työtilassa **Täyttämissuunnitelmat**-ruutu.</span><span class="sxs-lookup"><span data-stu-id="2d37f-336">In the **Distributed order management** workspace, select the **Fulfillment Plans** tile.</span></span>
3. <span data-ttu-id="2d37f-337">Voit tarkastella haluttua täyttämissuunnitelmaa valitsemalla sen tunnuksen.</span><span class="sxs-lookup"><span data-stu-id="2d37f-337">Select the ID of the relevant order fulfillment plan to view the fulfillment plan.</span></span>

    <span data-ttu-id="2d37f-338">Täyttämissuunnitelman tilaustietojen osassa näkyvät alkuperäiset myyntitilausrivit, jotka kuuluivat ajoon.</span><span class="sxs-lookup"><span data-stu-id="2d37f-338">The order details section of the fulfillment plan shows the original sales order lines that were part of the run.</span></span> <span data-ttu-id="2d37f-339">Normaalien myyntitilausrivien kenttien lisäksi tilaustietojen osassa on myös seuraavat kolme JTH-kenttää:</span><span class="sxs-lookup"><span data-stu-id="2d37f-339">Besides the standard sales order line fields, the order details section also includes the following three DOM-related fields:</span></span>

    - <span data-ttu-id="2d37f-340">**Täyttämistyyppi** – Kenttä ilmaisee, onko myyntitilausrivi kokonaan vai osittain välitetty vai onko sitä ollenkaan välitetty sijaintiin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-340">**Fulfillment type** – This field indicates whether the sales order line is fully brokered, partially brokered, or not brokered at all to a location.</span></span>
    - <span data-ttu-id="2d37f-341">**Jako** – Tämä kenttä ilmaisee, onko jokin myyntitilausrivi jaettu ja välitetty eri sijainteihin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-341">**Split** – This field indicates whether one sales order line has been split and brokered to different locations.</span></span>
    - <span data-ttu-id="2d37f-342">**Täyttämissijaintien määrä** – Tämä kenttä ilmaisee, kuinka monta täyttämisriviä luotiin yhdelle myyntitilausriville (perustuen niiden sijaintien määrään, joihin alkuperäinen myyntitilausrivi välitettiin).</span><span class="sxs-lookup"><span data-stu-id="2d37f-342">**Number of fulfillment locations** – This field indicates how many fulfillment lines were created for one sales order line (based on the number of locations that the original sales order line was brokered to).</span></span>

    <span data-ttu-id="2d37f-343">Tilauksen täyttämistiedoissa näkyy alkuperäisten myyntitilausrivien määritys eri sijainteihin sekä niiden määrät.</span><span class="sxs-lookup"><span data-stu-id="2d37f-343">The order fulfillment details section shows the assignment of the original sales order lines to different locations, together with their quantities.</span></span>

## <a name="order-line-actions-and-statuses"></a><span data-ttu-id="2d37f-344">Tilausrivin toiminnot ja tilat</span><span class="sxs-lookup"><span data-stu-id="2d37f-344">Order line actions and statuses</span></span>

<span data-ttu-id="2d37f-345">Seuraavassa kuvataan tilausrivin asetukset.</span><span class="sxs-lookup"><span data-stu-id="2d37f-345">The following describes settings on the order line.</span></span> <span data-ttu-id="2d37f-346">Voit avata tilausrivin siirtymällä kohtaan **Retail ja Commerce \> Asiakkaat \> Kaikki myyntitilaukset**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-346">To open the order line, go to **Retail and Commerce \> Customers \> All sales orders**.</span></span>
- <span data-ttu-id="2d37f-347">Jos määrität **Jätä pois JTH-käsittelystä** -asetuksen (myyntitilausrivin **Yleiset**-välilehdessä) arvoksi **Kyllä**, tilaus tai tilausrivi jätetään pois JTH-käsittelystä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-347">If you set the **Exclude from DOM processing** option on the **General** tab of the sales order line to **Yes**, the order or order line will be excluded from DOM processing.</span></span>
- <span data-ttu-id="2d37f-348">**JTH-tila**-kenttään (myyntitilausrivin **Yleiset**-välilehdessä) voidaan määrittää jokin seuraavista arvoista:</span><span class="sxs-lookup"><span data-stu-id="2d37f-348">The **DOM status** field on the **General** tab of the sales order line can be set to one of the following values:</span></span>

    - <span data-ttu-id="2d37f-349">**Ei mitään** – tilausriviä ei ole koskaan välitetty.</span><span class="sxs-lookup"><span data-stu-id="2d37f-349">**None** – The order line has never been brokered.</span></span>
    - <span data-ttu-id="2d37f-350">**Valmis** – tilausrivi on onnistuneesti välitetty ja määritetty sijaintiin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-350">**Complete** – The order line has been successfully brokered and assigned to a location.</span></span>
    - <span data-ttu-id="2d37f-351">**Poikkeus** – Tilausrivi on välitetty, mutta sitä ei voi määrittää sijaintiin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-351">**Exception** – The order line has been brokered but can't be assigned to a location.</span></span> <span data-ttu-id="2d37f-352">Poikkeuksia on useita alatyyppejä, joita voidaan tarkastella JTH-työtilassa:</span><span class="sxs-lookup"><span data-stu-id="2d37f-352">Exceptions have multiple subtypes that can be viewed from the DOM workspace:</span></span>

        - <span data-ttu-id="2d37f-353">**Ei käytettävissä olevaa määrää** – ei ole olemassa käytettävissä olevaa varastoa tilauksen määrittämiseksi sijainteihin.</span><span class="sxs-lookup"><span data-stu-id="2d37f-353">**No quantity available** – There is no available inventory to assign the order to in the locations.</span></span>
        - <span data-ttu-id="2d37f-354">**Hylkäysten enimmäismäärä** – tilausrivi on saavuttanut hylkäysten määrän ylärajan.</span><span class="sxs-lookup"><span data-stu-id="2d37f-354">**Maximum rejections** – The order line has reached the maximum threshold for rejections.</span></span>
        - <span data-ttu-id="2d37f-355">**Tietojen muutoksen ristiriita** – myyntitilausriviä on muutettu tilauksen välittämisen jälkeen.</span><span class="sxs-lookup"><span data-stu-id="2d37f-355">**Data modification conflict** – The sales order line has been changed since the order was brokered.</span></span> <span data-ttu-id="2d37f-356">Siksi täyttämissuunnitelmaa ei voi käyttää tilaukseen.</span><span class="sxs-lookup"><span data-stu-id="2d37f-356">Therefore, the fulfillment plan can't be applied to the order.</span></span>
        - <span data-ttu-id="2d37f-357">**Tilausrivikohtainen poikkeus** – tilausrivillä on useita poikkeuksia.</span><span class="sxs-lookup"><span data-stu-id="2d37f-357">**Order line specific exception** – There are multiple exceptions on the order line.</span></span>

- <span data-ttu-id="2d37f-358">Myyntitilausta syötettäessä JTH voidaan suorittaa vuorovaikutteisessa tilassa.</span><span class="sxs-lookup"><span data-stu-id="2d37f-358">During the sales order entry, DOM can be run in an interactive mode.</span></span> <span data-ttu-id="2d37f-359">Kun olet syöttämässä tilausriviä ja olet määrittänyt tuotteen ja määrän, voit valita **Päivitä rivi** ja sitten (kohdassa **JTH**) **Ehdota täyttämissijaintia**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-359">While you're entering an order line, after you specify the product and quantity, you can select **Update line** and then, under **DOM**, select **Suggest fulfillment location**.</span></span> <span data-ttu-id="2d37f-360">Tällöin näet sijaintiluettelon, joka perustuu JTH-sääntöihin, jotka voivat täyttää tilausrivin määrän.</span><span class="sxs-lookup"><span data-stu-id="2d37f-360">You then see a list of locations that is based on DOM rules that can fulfill the quantity on the order line.</span></span> <span data-ttu-id="2d37f-361">Tämä luettelo on lajiteltu etäisyyden mukaan.</span><span class="sxs-lookup"><span data-stu-id="2d37f-361">This list is sorted by distance.</span></span> <span data-ttu-id="2d37f-362">Valitse sijainti määrittääksesi asianmukaisen toimipisteen ja varaston myyntitilausrivillä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-362">Select a location to set the relevant site and warehouse on the sales order line.</span></span> <span data-ttu-id="2d37f-363">Jotta tätä toimintoa voisi käyttää, on oltava olemassa aktiivinen täyttämisprofiili, joka vastaa myyntirivin myynnin alkuperää ja toimitustapaa.</span><span class="sxs-lookup"><span data-stu-id="2d37f-363">For this functionality to work, there must be an existing, active fulfillment profile that matches the sales origin and delivery mode on the sales line.</span></span>
- <span data-ttu-id="2d37f-364">Voit tarkastella JTH-ajojen myyntitilausriviä koskevia lokeja valitsemalla **Myyntitilausrivi** ja sitten kohdassa **JTH** **Näytä JTH-lokit**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-364">To view the DOM run logs for a sales order line, select **Sales order line**, and then, under **DOM**, select **View DOM Logs**.</span></span> <span data-ttu-id="2d37f-365">JTH-lokeissa näkyvät kaikki JTH-ajon luomat tapahtumat ja lokit.</span><span class="sxs-lookup"><span data-stu-id="2d37f-365">The DOM logs show all the events and logs that were generated by the DOM run.</span></span> <span data-ttu-id="2d37f-366">Lokien avulla voit selvittää, miksi tietty sijainti määritettiin tietylle tilausriville ja mitä sääntöjä ja rajoituksia määrityksessä otettiin huomioon.</span><span class="sxs-lookup"><span data-stu-id="2d37f-366">The logs can help you understand why a specific location was assigned to the order line, and what rules and constraints were considered as a part of the assignment.</span></span> <span data-ttu-id="2d37f-367">**Hallinta**-välilehdessä JTH-lokeja voi tarkastella myös myyntitilauksen otsikon tasolla.</span><span class="sxs-lookup"><span data-stu-id="2d37f-367">On the **Manage** tab, the DOM logs are also available at the level of the sales order header.</span></span>

## <a name="run-a-clean-up-job-for-dom-fulfillment-plans"></a><span data-ttu-id="2d37f-368">JTH-täyttämissuunnitelmien puhdistusajo</span><span class="sxs-lookup"><span data-stu-id="2d37f-368">Run a clean-up job for DOM fulfillment plans</span></span>

<span data-ttu-id="2d37f-369">JTH-käsittelyn aikana luodaan täyttämissuunnitelmia.</span><span class="sxs-lookup"><span data-stu-id="2d37f-369">As DOM processing is run, fulfillment plans are created.</span></span> <span data-ttu-id="2d37f-370">Ajan kuluessa järjestelmään kertyy paljon täyttämissuunnitelmia.</span><span class="sxs-lookup"><span data-stu-id="2d37f-370">Over time, the system will keep numerous fulfillment plans.</span></span> <span data-ttu-id="2d37f-371">Voit hallita järjestelmän säilyttämien täyttämissuunnitelmien määrää määrittämällä erätyön, joka poistaa vanhoja täyttämissuunnitelma **Pidätyskausi päivinä** -arvon perusteella.</span><span class="sxs-lookup"><span data-stu-id="2d37f-371">To manage the number of fulfillment plans that the system keeps, you can configure a batch job that deletes older fulfillment plans, based on the **Retention period in days** value.</span></span>

1. <span data-ttu-id="2d37f-372">Siirry kohtaan **Retail ja Commerce \> Jaettu tilausten hallinta \> Eräkäsittely \> JTH-täyttämistietojen poistotyön asetukset**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-372">Go to **Retail and Commerce \> Distributed order management \> Batch processing \> DOM fulfillment data deletion job setup**.</span></span> 
1. <span data-ttu-id="2d37f-373">Valitse määritetty eräryhmä **Eräryhmä**-kentässä.</span><span class="sxs-lookup"><span data-stu-id="2d37f-373">In the **Batch group** field, select a configured batch group.</span></span>
1. <span data-ttu-id="2d37f-374">Määritä **Toistuminen**-kohdassa erätyön toistuminen.</span><span class="sxs-lookup"><span data-stu-id="2d37f-374">Select **Recurrence**, and define the recurrence of the batch job.</span></span>
1. <span data-ttu-id="2d37f-375">Valitse **OK**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-375">Select **OK**.</span></span>

## <a name="more-information"></a><span data-ttu-id="2d37f-376">Lisätietoja</span><span class="sxs-lookup"><span data-stu-id="2d37f-376">More information</span></span>

<span data-ttu-id="2d37f-377">Seuraavat asiat on hyvä huomioida JTH-ominaisuutta käytettäessä:</span><span class="sxs-lookup"><span data-stu-id="2d37f-377">Here are some things to consider when you use the DOM feature:</span></span>

- <span data-ttu-id="2d37f-378">Tällä hetkellä JTH tarkastelee vain Commerce-kanavissa luotuja tilauksia.</span><span class="sxs-lookup"><span data-stu-id="2d37f-378">Currently, DOM looks only at orders that are created from commerce channels.</span></span> <span data-ttu-id="2d37f-379">Myyntilaukset tunnistetaan vähittäismyynnin myyntitilauksiksi, kun **Commerce-myynti**-asetukseksi on määritetty **Kyllä**.</span><span class="sxs-lookup"><span data-stu-id="2d37f-379">Sales orders are identified as sales orders when the **Commerce sale** option is set to **Yes**.</span></span>
- <span data-ttu-id="2d37f-380">Microsoft ei ole testannut JTH-ominaisuutta edistyneen varastonhallinnan ominaisuuksien kanssa.</span><span class="sxs-lookup"><span data-stu-id="2d37f-380">Microsoft hasn't tested DOM with advanced warehouse management features.</span></span> <span data-ttu-id="2d37f-381">Asiakkaiden ja kumppanien on huolellisesti selvitettävä, onko JTH yhteensopiva heille tärkeiden edistyneen varastonhallinnan ominaisuuksien ja prosessien kanssa.</span><span class="sxs-lookup"><span data-stu-id="2d37f-381">Customers and partners must be careful to determine whether DOM is compatible with the advanced warehouse management capabilities and processes that are relevant to them.</span></span>
- <span data-ttu-id="2d37f-382">JTH on saatavissa vain Commerce-ratkaisun pilvipalveluversioon.</span><span class="sxs-lookup"><span data-stu-id="2d37f-382">DOM is available only on the cloud version of Commerce.</span></span> <span data-ttu-id="2d37f-383">Sitä ei tueta paikallisissa käyttöönotoissa.</span><span class="sxs-lookup"><span data-stu-id="2d37f-383">It isn't supported in on-premises deployments.</span></span>
