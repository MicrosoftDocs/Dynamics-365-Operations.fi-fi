---
title: ER-mallien varmuuskopion tallennustila
description: Tässä ohjeaiheessa käsitellään tapaa, jolla malleja voi palauttaa sähköisen raportoinnin (ER) varmuuskopion tallennustilan avulla.
author: NickSelin
manager: AnnBe
ms.date: 08/19/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERWorkspace, ERSolutionTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Operations
ms.custom: 27621
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-08-13
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: 5dad101ffe56c9266c0d81ede8be1f72b684a8fb
ms.sourcegitcommit: fbc106af09bdadb860677f590464fb93223cbf65
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 11/06/2019
ms.locfileid: "2771418"
---
# <a name="backup-storage-of-er-templates"></a><span data-ttu-id="8ce4b-103">ER-mallien varmuuskopion tallennustila</span><span class="sxs-lookup"><span data-stu-id="8ce4b-103">Backup storage of ER templates</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="8ce4b-104">Yrityskäyttäjät voivat määrittää [sähköisen raportoinnin (ER) yleiskatsauksen](general-electronic-reporting.md) avulla lähtevien asiakirjojen muodot eri maiden ja alueiden lakisääteisten vaatimusten mukaisiksi.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-104">The [Electronic reporting (ER) overview](general-electronic-reporting.md) lets business users configure formats for outbound documents according to the legal requirements of various countries and regions.</span></span> <span data-ttu-id="8ce4b-105">Määritetyt ER-muodot voivat luoda valmiiksi määritettyjen mallien avulla erimuotoisia lähteviä asiakirjoja, kuten Microsoft Excel -työkirjoja, Microsoft Word -asiakirjoja tai PDF-tiedostoja.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-105">Configured ER formats can use predefined templates to generate outbound documents in various formats, such as Microsoft Excel workbooks, Microsoft Word documents, or PDF documents.</span></span> <span data-ttu-id="8ce4b-106">Malleihin täytetään ne tiedot, joita luotavia asiakirjoja varten määritetty tiedonkulku edellyttää.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-106">The templates are filled with data that the configured dataflow for generated documents requires.</span></span>

<span data-ttu-id="8ce4b-107">Kukin määritetty muoto voidaan julkaista ER-ratkaisun osana.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-107">Each configured format can be published as part of an ER solution.</span></span> <span data-ttu-id="8ce4b-108">Kukin ER-ratkaisu voidaan viedä yhdestä Finance and Operationsin esiintymästä ja tuoda toiseen esiintymään.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-108">Each ER solution can be exported from one instance of Finance and Operations and imported into another instance.</span></span>

<span data-ttu-id="8ce4b-109">ER-kehys säilyttää nykyisen Finance and Operations -esiintymän pakolliset mallit [tiedostojen hallinnan määrityksen](../../fin-ops/organization-administration/configure-document-management.md) avulla.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-109">The ER framework uses the [Configure document management](../../fin-ops/organization-administration/configure-document-management.md) to keep the required templates for the current Finance and Operations instance.</span></span> <span data-ttu-id="8ce4b-110">ER-kehyksen asetusten perusteella Microsoft Azure Blob Storage tai Microsoft SharePoint -kansio voidaan valita mallien ensisijaiseksi fyysiseksi tallennussijainniksi.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-110">Depending on the settings of the ER framework, Microsoft Azure Blob storage or a Microsoft SharePoint folder can be selected as the physical primary storage location for templates.</span></span> <span data-ttu-id="8ce4b-111">(Lisätietoja on kohdassa [Sähköisen raportoinnin (ER) kehyksen määrittäminen](electronic-reporting-er-configure-parameters.md).) DocuValue-taulu sisältää kunkin mallin yksittäisen tietueen.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-111">(For more information, see [Configure the Electronic reporting (ER) framework](electronic-reporting-er-configure-parameters.md).) The DocuValue table holds an individual record for each template.</span></span> <span data-ttu-id="8ce4b-112">Kunkin tietueen **AccessInformation**-kenttä sisältää määritetyssä tallennussijainnissa sijaitsevan mallitiedoston polun.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-112">In each record, the **AccessInformation** field stores the path of a template file that is located in the configured storage location.</span></span>

<span data-ttu-id="8ce4b-113">Finance and Operations -esiintymiä hallittaessa nykyinen esiintymä voidaan päättää siirtää toiseen sijaintiin.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-113">When you manage your Finance and Operations instances, you might decide to migrate the current instance to another location.</span></span> <span data-ttu-id="8ce4b-114">Voit esimerkiksi siirtää tuotantoesiintymän uuteen eristysympäristöön.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-114">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="8ce4b-115">Jos määrität ER-kehyksen tallentamaan mallit Blob-objektisäilöön, uuden eritysympäristön DocuValue-taulu viittaa tuotantoympäristön Blob-objektisäilöön.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-115">If you configured the ER framework to store templates in Blob storage, the DocuValue table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="8ce4b-116">Tätä esiintymää ei kuitenkaan voi käyttää eristysympäristössä, koska siirtoprosessi ei tue artefaktien siirtoa Blob-objektisäilössä.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-116">However, this instance can't be accessed from the sandbox environment, because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="8ce4b-117">Jos sitten yrität luoda liiketoiminta-asiakirjoja suorittamalla mallia käyttävän ER-muodon, tapahtuukin poikkeus ja saat ilmoituksen puuttuvasta mallista.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-117">Therefore, if you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="8ce4b-118">Sinut myös ohjataan käyttämään ER-poistotyökalua sekä poistamaan ja tuomaan uudelleen mallin sisältävä ER-muodon määritys.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-118">You're also guided to use the ER cleanup tool to delete and then re-import the ER format configuration that contains the template.</span></span> <span data-ttu-id="8ce4b-119">Koska ER-muodon määrityksiä voi olla useita, tämä prosessi voi kestää kauan.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-119">Because you might have several ER format configurations, this process can be time consuming.</span></span>

<span data-ttu-id="8ce4b-120">ER-mallien varmuuskopion tallennustilatoiminnon avulla voi olla mahdollista luoda mallit niin, että ne ovat aina käytettävissä liiketoiminta-asiakirjojen luontia varten.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-120">The Backup storage of ER templates feature can help you make your templates so that they are always available to generate business documents.</span></span>

> [!NOTE]
> <span data-ttu-id="8ce4b-121">Tätä toimintoa voi käyttää vain, jos Blob-objektisäilö on valittu ER-mallien fyysiseksi tallennussijainniksi.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-121">This feature can be used only when Blob storage has been selected as the physical storage location for ER templates.</span></span>

<span data-ttu-id="8ce4b-122">Tätä toimintoa varten jokainen nykyisen ympäristön uusi ER-muodon määritys tallennetaan automaattisesti mallien varmuuskopion tallennussijaintiin (ERDocuDatabaseStorage-tietokantataulu) seuraavien tapahtumien yhteydessä:</span><span class="sxs-lookup"><span data-stu-id="8ce4b-122">For this feature, every template of a new ER format configuration in the current environment is automatically saved to the backup storage location for templates (the ERDocuDatabaseStorage database table) when the following events occur:</span></span>

- <span data-ttu-id="8ce4b-123">Uusi mallin sisältävä ER-muodon määritys tuodaan.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-123">You import a new ER format configuration that contains a template.</span></span>
- <span data-ttu-id="8ce4b-124">Mallin sisältävän ER-muodon määrityksen luonnosversio viimeistellään.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-124">You complete the draft version of an ER format configuration that contains a template.</span></span>

<span data-ttu-id="8ce4b-125">Mallien varmuuskopiot siirretään uuteen Finance and Operations -esiintymään sovellustietokannan osana.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-125">Backup copies of templates are migrated to a new instance of Finance and Operations as part of the application database.</span></span>

<span data-ttu-id="8ce4b-126">Jos ER-muodon malli tarvitaan esimerkiksi lähtevien asiakirjojen luontiin ja toimittajan maksujen käsittelyyn, mukaan lukien maksuilmoituksen ja valvontaraporttien luontiin, mutta tarvittavaa mallia ei löytynyt ensisijaisesta tallennussijainnista, tapahtuu seuraavaa:</span><span class="sxs-lookup"><span data-stu-id="8ce4b-126">If a template of an ER format is required for generation of outbound documents, to process vendor payments including generation of payment advice and control reports, for example, but the required template isn't found in the primary storage location, the following events occur:</span></span>

- <span data-ttu-id="8ce4b-127">Jos malli on käytettävissä varmuuskopioinnin tallennussijainnissa, se haetaan automaattisesti sieltä ja palautetaan ensisijaiseen tallennussijaintiin, jonka jälkeen sitä voidaan käyttää nykyisessä toteutuksessa.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-127">If the template is available in the backup storage location, it is automatically taken from the backup storage location, restored to the primary storage location, and used for the current execution.</span></span>
- <span data-ttu-id="8ce4b-128">Jokaiselle käyttäjälle, jolle on määritetty **Sähköisen raportoinnin kehittäjä**- tai **Järjestelmänvalvoja**-rooli, ilmoitetaan puuttuvasta mallista toimintokeskuksen kautta.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-128">Every user who is assigned to the **Electronic reporting developer** or **System administrator** role is notified about the missing template issue through the Action center.</span></span> <span data-ttu-id="8ce4b-129">Sanoman sisältö määräytyy **Suorita rikkoutuneiden mallien palautusmenettely automaattisesi eränä** -parametrin arvon mukaan:</span><span class="sxs-lookup"><span data-stu-id="8ce4b-129">The message that appears depends on the value of the **Automatically run the procedure of restoring the broken templates in batch** parameter:</span></span>

    - <span data-ttu-id="8ce4b-130">Jos parametrin arvoksi on valittu **Ei käytössä**, sanoma suosittelee eräprosessin automaattista käynnistämistä, jotta vastaavat muiden ER-muodon määritysmallien ongelmat korjataan automaattisesti.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-130">If this parameter is set to **Off**, the message recommends that you start the batch process to automatically fix similar issues for other ER format configuration templates.</span></span> <span data-ttu-id="8ce4b-131">Sanomassa on linkki, jolla eräprosessin voi aloittaa.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-131">The message includes a link that you can use to start the batch process.</span></span>
    - <span data-ttu-id="8ce4b-132">Jos parametrin arvoksi on valittu **Käytössä**, sanoma ilmoittaa, että puuttuvaan malliin liittyvä ongelma on havaittu ja että uusi eräprosessi **Palauta rikkoutuneet mallit sisäisestä tietokannan varmuuskopiosta** on ajoitettu automaattisesti.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-132">If this parameter is set to **On**, the message notifies you that a missing templates issue has been discovered, and that a new batch process, **Restore broken templates from internal database backup**, has been automatically scheduled.</span></span> <span data-ttu-id="8ce4b-133">Tämä eräprosessi korjaa automaattisesti vastaavat ongelmat muissa malleissa.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-133">This batch process will automatically fix similar issues for other templates.</span></span>

<span data-ttu-id="8ce4b-134">Määritä **Suorita rikkoutuneiden mallien palautusmenettely automaattisesi eränä** -parametri seuraavasti:</span><span class="sxs-lookup"><span data-stu-id="8ce4b-134">To set up the he **Automatically run the procedure of restoring the broken templates in batch** parameter, complete the following steps:</span></span>

1. <span data-ttu-id="8ce4b-135">Avaa Finance and Operationsissa **Organisaation hallinto \> Sähköinen raportointi \> Konfiguroinnit-sivu**.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-135">In Finance and Operations, open the **Organization administration \> Electronic reporting \> Configurations page**.</span></span>
2. <span data-ttu-id="8ce4b-136">Valitse **Määritykset**-sivun toimintoruudun **Määritykset**-välilehden **Lisämääritykset**-ryhmässä **Käyttäjäparametrit**.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-136">On the **Configurations** page, on the Action Pane, on the **Configurations** tab, in the **Advanced settings** group, select **User parameters**.</span></span>
3. <span data-ttu-id="8ce4b-137">Määritä **Käyttäjän parametrit** -valintaikkunassa tarvittava **Suorita rikkoutuneiden mallien palautusmenettely automaattisesi eränä** -parametrin arvo.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-137">In the **User parameters** dialog box, set the required value for the **Automatically run the procedure of restoring the broken templates in batch** parameter.</span></span>

> [!NOTE]
> <span data-ttu-id="8ce4b-138">Tämä parametri määritetään sovelluksen käyttäjänä ja se on koskee sitä yritystä, johon on kirjauduttu.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-138">This parameter is defined as application user and logged company specific.</span></span>

![Sähköisen raportoinnin konfiguroinnit -sivu](./media/GER-BackupTemplates-1.png)

<span data-ttu-id="8ce4b-140">Seuraavassa kuvassa on esimerkki sanomasta, joka avautuu, kun **Suorita rikkoutuneiden mallien palautusmenettely automaattisesi eränä** -parametrin arvoksi on määritetty **Käytössä**.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-140">The following illustration shows an example of the message that appears when the **Automatically run the procedure of restoring the broken templates in batch** parameter is set to **On**.</span></span>

![Toimittajan maksukirjauskansio -sivu](./media/GER-BackupTemplates-2.png)

<span data-ttu-id="8ce4b-142">Seuraavassa kuvassa on **Erätyö**-sivun **Palauta rikkoutuneet mallit sisäisestä tietokannan varmuuskopiosta** -eräprosessi.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-142">The following illustration shows the **Restore broken templates from internal database backup** batch process on the **Batch job** page.</span></span>

![Erätyö-sivu](./media/GER-BackupTemplates-3.png)

<span data-ttu-id="8ce4b-144">Suoritetun **Palauta rikkoutuneet mallit sisäisestä tietokannan varmuuskopiosta** -eräprosessin suoritusloki sisältää tietoja malleista, jotka on palautettu varmuuskopion tallennussijainnista ensisijaiseen tallennussijaintiin.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-144">The execution log of the completed **Restore broken templates from internal database backup** batch process includes information about the templates that have been restored from the backup storage location to the primary storage location.</span></span>

![Erätyöhistoria-sivu](./media/GER-BackupTemplates-4.png)

<span data-ttu-id="8ce4b-146">ER-muodon määrityksessä olevien mallien automaattisen varmuuskopioiden luontiprosessi on oletusarvoisesti otettu käyttöön.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-146">By default, the process of automatically creating backup copies of templates that reside in ER format configurations is turned on.</span></span> <span data-ttu-id="8ce4b-147">Voit lopettaa mallin varmuuskopioinnin määrittämällä **Sähköisen raportoinnin parametrit** -sivun **Liitteet**-välilehdessä **Lopeta mallien varmuuskopiointi** -asetukseksi **Kyllä**.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-147">To stop making backup copies of templates, set the **Stop making backup copies of template** option to **Yes** on the **Attachments** tab of the **Electronic reporting parameters** page.</span></span> <span data-ttu-id="8ce4b-148">Voit avata sivun **Sähköinen raportointi** -työtilassa.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-148">You can open this page from the **Electronic reporting** workspace.</span></span>

<span data-ttu-id="8ce4b-149">Jos määrität **Lopeta mallien varmuuskopiointi** -asetukseksi **Kyllä** etkä halua säilyttää malleista aiemmin tehtyjä varmuuskopioita, valitse **Tyhjennä varmuuskopioinnin tallennustila** **Sähköisen raportoinnin parametrit** -sivulla.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-149">If you set the **Stop making backup copies of templates** option to **Yes** and don't want to keep the backup copies that were previously made of templates, select **Clean up backup storage** on the **Electronic reporting parameters** page.</span></span>

<span data-ttu-id="8ce4b-150">Jos päivität ympäristön Finance and Operationsin versioon 10.0.5 (lokakuu 2019) ja haluat siirtyä uuteen suoritettavia ER-muodon määrityksiä sisältävään ympäristöön, valitse **Täytä varmuuskopioinnin tallennustila** **Sähköisen raportoinnin parametrit** -sivulla ennen kuin siirto tehdään.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-150">If you upgraded your environment to Finance and Operations version 10.0.5 (October 2019) and want to migrate to a new environment that includes ER format configurations that can be run, select **Fill in backup storage** on the **Electronic reporting parameters** page before the migration occurs.</span></span> <span data-ttu-id="8ce4b-151">Tämä painike aloittaa prosessin, jolla kaikki käytettävissä olevat mallit varmuuskopioidaan, jotta ne voidaan tallentaa mallien ER-varmuuskopioinnin tallennussijaintiin.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-151">This button starts the process of making backup copies of all available templates, so that they can be stored in the ER backup storage location for templates.</span></span>

![Sähköisen raportoinnin parametrit -sivu](./media/GER-BackupTemplates-5.png)

## <a name="supported-deployments"></a><span data-ttu-id="8ce4b-153">Tuetut käyttöönotot</span><span class="sxs-lookup"><span data-stu-id="8ce4b-153">Supported deployments</span></span>

<span data-ttu-id="8ce4b-154">Finance and Operationsin versiossa 10.0.5 ER-mallien varmuuskopioinnin tallennustila -toiminto on käytettävissä vain pilvikäyttöönotoissa.</span><span class="sxs-lookup"><span data-stu-id="8ce4b-154">In Finance and Operations version 10.0.5, the Backup storage of ER templates feature is available only in cloud deployments.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="8ce4b-155">Lisäresurssit</span><span class="sxs-lookup"><span data-stu-id="8ce4b-155">Additional resources</span></span>

[<span data-ttu-id="8ce4b-156">Sähköisen raportoinnin (ER) yleiskatsaus</span><span class="sxs-lookup"><span data-stu-id="8ce4b-156">Electronic reporting (ER) overview</span></span>](general-electronic-reporting.md)

[<span data-ttu-id="8ce4b-157">Sähköisen raportoinnin (ER) kehyksen määrittäminen</span><span class="sxs-lookup"><span data-stu-id="8ce4b-157">Configure the Electronic reporting (ER) framework</span></span>](electronic-reporting-er-configure-parameters.md)
