---
title: ER-muotoisten sarjaelementtien suorittamisen lykkäys
description: Tässä ohjeaiheessa selitetään, miten sähköisen raportoinnin (ER) muotoisten sarjaelementtien suorittamista lykätään.
author: NickSelin
manager: kfend
ms.date: 03/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: EROperationDesigner
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 58771
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-07-01
ms.dyn365.ops.version: AX 10.0.5
ms.openlocfilehash: b5534c9ed0ad6cab0bc827ff626bf65a34f9df08
ms.sourcegitcommit: b92c3e1b3403d0455fc4e0bf9132d6bc0d7aba5e
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 03/18/2020
ms.locfileid: "3138943"
---
# <a name="defer-the-execution-of-sequence-elements-in-er-formats"></a><span data-ttu-id="5d3e4-103">ER-muotoisten sarjaelementtien suorittamisen lykkäys</span><span class="sxs-lookup"><span data-stu-id="5d3e4-103">Defer the execution of sequence elements in ER formats</span></span>

[!include [banner](../includes/banner.md)]

## <a name="overview"></a><span data-ttu-id="5d3e4-104">Yleiskatsaus</span><span class="sxs-lookup"><span data-stu-id="5d3e4-104">Overview</span></span>

<span data-ttu-id="5d3e4-105">Voit käyttää [Sähköisen raportoinnin (ER)](general-electronic-reporting.md) kehyksen toimintojen suunnitteluohjelmaa [määrittääksesi](tasks/er-format-configuration-2016-11.md) lähtevien tekstimuotoisten asiakirjojen luomiseen käytettävän ER-ratkaisun [muotokomponenttia](general-electronic-reporting.md#FormatComponentOutbound).</span><span class="sxs-lookup"><span data-stu-id="5d3e4-105">You can use the Operations designer of the [Electronic reporting (ER)](general-electronic-reporting.md) framework to [configure](tasks/er-format-configuration-2016-11.md) the [format component](general-electronic-reporting.md#FormatComponentOutbound) of an ER solution that is used to generate outbound documents in a text format.</span></span> <span data-ttu-id="5d3e4-106">Määritetyn muotokomponentin hierarkiarakenne koostuu erityyppisistä muotoelementeistä.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-106">The hierarchical structure of the configured format component consists of format elements of various types.</span></span> <span data-ttu-id="5d3e4-107">Näitä muotoelementtejä käytetään luotujen asiakirjojen suorituksenaikaiseen täyttämiseen tarvittavilla tiedoilla.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-107">These format elements are used to fill generated documents with the required information at runtime.</span></span> <span data-ttu-id="5d3e4-108">Kun ER-muoto suoritetaan, muotoelementit suoritetaan oletusarvoisesti samassa järjestyksessä kuin ne esitetään muotohierarkiassa: yksi kerrallaan, ylhäältä alas.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-108">By default, when you run an ER format, the format elements are run in the same order as they are presented in the format hierarchy: one by one, from top to bottom.</span></span> <span data-ttu-id="5d3e4-109">Suunnittelun aikana voit kuitenkin muuttaa kaikkien määritetyn muotokomponentin sarjaelementtien suoritusjärjestystä.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-109">However, at design time, you can change the execution order for any sequence elements of the configured format component.</span></span>

<span data-ttu-id="5d3e4-110">Ottamalla käyttöön määritetyssä muodossa olevan muotosarjaelementin <a name="DeferredSequenceExecution"></a>**Lykätty suorittaminen** -asetuksen voit lykätä (siirtää myöhemmäksi) kyseisen elementin suorittamista.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-110">By turning on the <a name="DeferredSequenceExecution"></a>**Deferred execution** option for a sequence format element in the configured format, you can defer (postpone) the execution of that element.</span></span> <span data-ttu-id="5d3e4-111">Tällöin elementtiä ei suoriteta, ennen kuin kaikki muut sen pääelementin osat on suoritettu.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-111">In this case, the element isn't run until all other elements of its parent have been run.</span></span>

<span data-ttu-id="5d3e4-112">Saat lisätietoja tästä toiminnosta suorittamalla tämän ohjeaiheen seuraavan esimerkin.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-112">To learn more about this feature, complete the example in this topic.</span></span>

## <a name="limitations"></a><span data-ttu-id="5d3e4-113">Rajoitukset</span><span class="sxs-lookup"><span data-stu-id="5d3e4-113">Limitations</span></span>

<span data-ttu-id="5d3e4-114">**Lykätty suorittaminen** -asetusta tuetaan vain sellaisten sarjaelementtien osalta, jotka on määritetty **lähtevien** tekstimuotoisten asiakirjojen luonnissa käytettävää ER-muotoa varten.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-114">The **Deferred execution** option is supported only for sequence elements that are configured for an ER format that is used to generate **outbound** documents in text format.</span></span>

<span data-ttu-id="5d3e4-115">**Lykätty suorittaminen** -asetusta ei voi käyttää sarjoissa, jotka on määritetty enimmäispituudeltaan rajoitetuiksi katkaistuiksi sarjoiksi.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-115">The **Deferred execution** option isn't applicable to sequences that have been configured as trimmed sequences where the maximum length is limited.</span></span>

## <a name="example-defer-the-execution-of-a-sequence-element-in-an-er-format"></a><a name="Example"></a><span data-ttu-id="5d3e4-116">Esimerkki: ER-muotoisen sarjaelementin suorituksen lykkäys</span><span class="sxs-lookup"><span data-stu-id="5d3e4-116">Example: Defer the execution of a sequence element in an ER format</span></span>

<span data-ttu-id="5d3e4-117">Seuraavissa vaiheissa selitetään, miten järjestelmänvalvojan sähköisen raportoinnin toiminnallinen konsultin [rooli](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/sysadmin/tasks/assign-users-security-roles) voi määrittää ER-muodon, joka sisältää sarjaelementin, jossa suoritusjärjestys eroaa muotohierarkian järjestyksestä.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-117">The following steps explain how a user in the System administrator or Electronic reporting functional consultant [role](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/sysadmin/tasks/assign-users-security-roles) can configure an ER format that contains a sequence element where order of execution differs from the order in the format hierarchy.</span></span>

<span data-ttu-id="5d3e4-118">Nämä vaiheet voidaan suorittaa Microsoft Dynamics 365 Financen **USMF**-esimerkkiyrityksessä.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-118">These steps can be performed in the **USMF** company in Microsoft Dynamics 365 Finance.</span></span>

### <a name="prerequisites"></a><span data-ttu-id="5d3e4-119">Edellytykset</span><span class="sxs-lookup"><span data-stu-id="5d3e4-119">Prerequisites</span></span>

<span data-ttu-id="5d3e4-120">Tämän esimerkin suorittaminen edellyttää Financessa jonkin seuraavan roolin käyttöoikeutta **USMF**-yrityksessä:</span><span class="sxs-lookup"><span data-stu-id="5d3e4-120">To complete this example, you must have access to the **USMF** company in Finance for one of the following roles:</span></span>

- <span data-ttu-id="5d3e4-121">Sähköisen raportoinnin toiminnallinen konsultti</span><span class="sxs-lookup"><span data-stu-id="5d3e4-121">Electronic reporting functional consultant</span></span>
- <span data-ttu-id="5d3e4-122">Järjestelmänvalvoja</span><span class="sxs-lookup"><span data-stu-id="5d3e4-122">System administrator</span></span>

<span data-ttu-id="5d3e4-123">Jos et ole vielä suorittanut tätä esimerkkiä ohjeaiheessa [ER-muotoisten XML-elementtien suorittamisen lykkäys](er-defer-xml-element.md#Example), lataa seuraavat esimerkkinä käytettävän ER-ratkaisun [määritykset](general-electronic-reporting.md#Configuration).</span><span class="sxs-lookup"><span data-stu-id="5d3e4-123">If you haven't yet completed the example in the [Defer the execution of XML elements in ER formats](er-defer-xml-element.md#Example) topic, download the following [configurations](general-electronic-reporting.md#Configuration) of the sample ER solution.</span></span>

| <span data-ttu-id="5d3e4-124">Sisällön kuvaus</span><span class="sxs-lookup"><span data-stu-id="5d3e4-124">Content description</span></span>            | <span data-ttu-id="5d3e4-125">Tiedostonimi</span><span class="sxs-lookup"><span data-stu-id="5d3e4-125">File name</span></span> |
|--------------------------------|-----------|
| <span data-ttu-id="5d3e4-126">ER-tietomallin konfigurointi</span><span class="sxs-lookup"><span data-stu-id="5d3e4-126">ER data model configuration</span></span>    | [<span data-ttu-id="5d3e4-127">Model to learn deferred elements.version.1.xml</span><span class="sxs-lookup"><span data-stu-id="5d3e4-127">Model to learn deferred elements.version.1.xml</span></span>](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg) |
| <span data-ttu-id="5d3e4-128">ER-mallin yhdistämismääritys</span><span class="sxs-lookup"><span data-stu-id="5d3e4-128">ER model mapping configuration</span></span> | [<span data-ttu-id="5d3e4-129">Mapping to learn deferred elements.version.1.1.xml</span><span class="sxs-lookup"><span data-stu-id="5d3e4-129">Mapping to learn deferred elements.version.1.1.xml</span></span>](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg) |

<span data-ttu-id="5d3e4-130">Ennen kuin aloitat, sinun on myös ladattava ja tallennettava seuraavat esimerkkinä käytettävän ER-ratkaisun määritykset.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-130">Before you begin, you must also download and save the following configuration of the sample ER solution.</span></span>

| <span data-ttu-id="5d3e4-131">Sisällön kuvaus</span><span class="sxs-lookup"><span data-stu-id="5d3e4-131">Content description</span></span>     |<span data-ttu-id="5d3e4-132">Tiedostonimi</span><span class="sxs-lookup"><span data-stu-id="5d3e4-132">File name</span></span> |
|-------------------------|----------|
| <span data-ttu-id="5d3e4-133">ER-muodon konfigurointi</span><span class="sxs-lookup"><span data-stu-id="5d3e4-133">ER format configuration</span></span> | [<span data-ttu-id="5d3e4-134">Format to learn deferred sequences.version.1.1.xml</span><span class="sxs-lookup"><span data-stu-id="5d3e4-134">Format to learn deferred sequences.version.1.1.xml</span></span>](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg) |

### <a name="import-the-sample-er-configurations"></a><span data-ttu-id="5d3e4-135">ER-mallikonfiguraation tuonti</span><span class="sxs-lookup"><span data-stu-id="5d3e4-135">Import the sample ER configurations</span></span>

1. <span data-ttu-id="5d3e4-136">Valitse **Organisaation hallinto** \> **Työtilat** \> **Sähköinen raportointi**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-136">Go to **Organization administration** \> **Workspaces** \> **Electronic reporting**.</span></span>
2. <span data-ttu-id="5d3e4-137">Valitse **Raportointikonfiguraatiot**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-137">Select **Reporting configurations**.</span></span>
3. <span data-ttu-id="5d3e4-138">Jos **Määritykset**-sivun **Malli lykättyjen elementtien oppimiseen** -määritys ei ole saatavilla määrityspuussa, tuo ER-tietomallimääritys:</span><span class="sxs-lookup"><span data-stu-id="5d3e4-138">On the **Configurations** page, if the **Model to learn deferred elements** configuration isn't available in the configuration tree, import the ER data model configuration:</span></span>

    1. <span data-ttu-id="5d3e4-139">Vallitse **Vaihto** ja sitten **Lataa XML-tiedostosta**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-139">Select **Exchange**, and then select **Load from XML file**.</span></span>
    2. <span data-ttu-id="5d3e4-140">Valitse **Selaa**, etsi ja valitse tiedosto **Model to learn deferred elements.1.xml** ja valitse sitten **OK**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-140">Select **Browse**, find and select the **Model to learn deferred elements.1.xml** file, and then select **OK**.</span></span>

4. <span data-ttu-id="5d3e4-141">Jos **Yhdistäminen lykättyjen elementtien oppimista varten** -määritys ei ole saatavilla määrityspuussa, tuo ER-malliyhdistämismääritys:</span><span class="sxs-lookup"><span data-stu-id="5d3e4-141">If the **Mapping to learn deferred elements** configuration isn't available in the configuration tree, import the ER model mapping configuration:</span></span>

    1. <span data-ttu-id="5d3e4-142">Vallitse **Vaihto** ja sitten **Lataa XML-tiedostosta**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-142">Select **Exchange**, and then select **Load from XML file**.</span></span>
    2. <span data-ttu-id="5d3e4-143">Valitse **Selaa**, etsi ja valitse tiedosto **Mapping to learn deferred elements.1.xml** ja valitse sitten **OK**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-143">Select **Browse**, find and select the **Mapping to learn deferred elements.1.1.xml** file, and then select **OK**.</span></span>

5. <span data-ttu-id="5d3e4-144">Tuo ER-muotokonfiguraatio:</span><span class="sxs-lookup"><span data-stu-id="5d3e4-144">Import the ER format configuration:</span></span>

    1. <span data-ttu-id="5d3e4-145">Vallitse **Vaihto** ja sitten **Lataa XML-tiedostosta**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-145">Select **Exchange**, and then select **Load from XML file**.</span></span>
    2. <span data-ttu-id="5d3e4-146">Valitse **Selaa**, etsi ja valitse tiedosto **Format to learn deferred sequences.1.1.xml** ja valitse sitten **OK**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-146">Select **Browse**, find and select the **Format to learn deferred sequences.1.1.xml** file, and then select **OK**.</span></span>

6. <span data-ttu-id="5d3e4-147">Laajenna määrityspuussa **Malli lykättyjen elementtien oppimiseen**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-147">In the configuration tree, expand **Model to learn deferred elements**.</span></span>
7. <span data-ttu-id="5d3e4-148">Tarkista tuotujen ER-määritysten luettelo määrityspuussa.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-148">Review the list of imported ER configurations in the configuration tree.</span></span>

    ![Tuodut ER-määritykset määrityssivulla](./media/ER-DeferredSequence-Configurations.png)

### <a name="activate-a-configurations-provider"></a><span data-ttu-id="5d3e4-150">Aktivoi konfiguraatiolähde</span><span class="sxs-lookup"><span data-stu-id="5d3e4-150">Activate a configurations provider</span></span>

1. <span data-ttu-id="5d3e4-151">Valitse **Organisaation hallinto** \> **Työtilat** \> **Sähköinen raportointi**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-151">Go to **Organization administration** \> **Workspaces** \> **Electronic reporting**.</span></span>
2. <span data-ttu-id="5d3e4-152">Tarkista**Lokalisointikonfiguroinnit**-sivun **Konfiguraation lähteet** -osassa, että näyteyrityksen Litware, Inc. [konfiguraation lähde on luettelossa ja että sen tila on](general-electronic-reporting.md#Provider) aktiivinen (`http://www.litware.com`).</span><span class="sxs-lookup"><span data-stu-id="5d3e4-152">On the **Localization configurations** page, in the **Configuration providers** section, make sure that the [configuration provider](general-electronic-reporting.md#Provider) for the Litware, Inc. (`http://www.litware.com`) sample company is listed, and that it's marked as active.</span></span> <span data-ttu-id="5d3e4-153">Jos tämä määrityspalvelu ei ole luettelossa tai jos se ei ole merkittynä aktiiviseksi, noudata ohjeaiheen [Konfiguraation lähteen luominen ja sen merkitseminen aktiiviseksi](./tasks/er-configuration-provider-mark-it-active-2016-11.md) vaiheita.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-153">If this configuration provider isn't listed, or if it isn't marked as active, follow the steps in the [Create a configuration provider and mark it as active](./tasks/er-configuration-provider-mark-it-active-2016-11.md) topic.</span></span>

    ![Lokalisointimääritykset-sivun esimerkkiyritys Litware, Inc.](./media/ER-DeferredSequence-ElectronicReportingWorkspace.png)

### <a name="review-the-imported-model-mapping"></a><span data-ttu-id="5d3e4-155">Tuodun tietomallimäärityksen tarkistaminen</span><span class="sxs-lookup"><span data-stu-id="5d3e4-155">Review the imported model mapping</span></span>

<span data-ttu-id="5d3e4-156">Tarkista sen ER-mallimäärityskomponentin asetukset, joka on määritetty käyttämään verotapahtumia ja näyttämään käytetyt tiedot pyynnöstä.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-156">Review the settings of the ER model mapping component that is configured to access tax transactions and expose accessed data on request.</span></span>

1. <span data-ttu-id="5d3e4-157">Valitse **Organisaation hallinto** \> **Työtilat** \> **Sähköinen raportointi**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-157">Go to **Organization administration** \> **Workspaces** \> **Electronic reporting**.</span></span>
2. <span data-ttu-id="5d3e4-158">Valitse **Raportointikonfiguraatiot**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-158">Select **Reporting configurations**.</span></span>
3. <span data-ttu-id="5d3e4-159">Valitse **Määritykset**-sivun määrityspuu ja laajenna **Malli lykättyjen elementtien oppimiseen**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-159">On the **Configurations** page, in the configuration tree, expand **Model to learn deferred elements**.</span></span>
4. <span data-ttu-id="5d3e4-160">Valitse **Yhdistäminen lykättyjen elementtien oppimista varten** -määritys.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-160">Select the **Mapping to learn deferred elements** configuration.</span></span>
5. <span data-ttu-id="5d3e4-161">Avaa määritysluettelo valitsemalla **Suunnittelutoiminto**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-161">Select **Designer** to open the list of mappings.</span></span>
6. <span data-ttu-id="5d3e4-162">Tarkista määritystiedot valitsemalla **Suunnittelutoiminto**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-162">Select **Designer** to review the mapping details.</span></span>
7. <span data-ttu-id="5d3e4-163">Valitse **Näytä tiedot**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-163">Select **Show details**.</span></span>
8. <span data-ttu-id="5d3e4-164">Tarkista tietolähteet, jotka on määritetty käyttämään verotapahtumia:</span><span class="sxs-lookup"><span data-stu-id="5d3e4-164">Review the data sources that are configured to access tax transactions:</span></span>

    - <span data-ttu-id="5d3e4-165">*Taulukkotietue* -tyypin **Tapahtumat**-tietolähde on määritetty käyttämään **TaxTrans**-sovellustaulukon käyttötietueita.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-165">The **Transactions** data source of the *Table record* type is configured to access records of the **TaxTrans** application table.</span></span>
    - <span data-ttu-id="5d3e4-166">*Laskettu kenttä* -tyypin **Tositteet**-tietolähde on määritetty palauttamaan vaadittavat tositekoodit (**INV-10000349** ja **INV-10000350**) tietueluettelon muodossa.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-166">The **Vouchers** data source of the *Calculated field* type is configured to return the required voucher codes (**INV-10000349** and **INV-10000350**) as a list of records.</span></span>
    - <span data-ttu-id="5d3e4-167">*Laskettu kenttä* -tyypin **Suodatettu**-tietolähde on määritetty valitsemaan **Tapahtumat**-tietolähteestä vain vaadittavien tositteiden verotapahtumia.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-167">The **Filtered** data source of the *Calculated field* type is configured to select, from the **Transactions** data source, only tax transactions of the required vouchers.</span></span>
    - <span data-ttu-id="5d3e4-168">*Laskettu kenttä* -tyypin **\$TaxAmount**-kenttä lisätään, jotta **Suodatettu** tietolähde näyttää veroarvon, jolla on vastakkainen etumerkki.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-168">The **\$TaxAmount** field of the *Calculated field* type is added for the **Filtered** data source to expose the tax value that has the opposite sign.</span></span>
    - <span data-ttu-id="5d3e4-169">*Ryhmittely* -tyypin **Ryhmitelty**-tietolähde määritetään ryhmittelemään **Suodatettu**-tietolähteen suodatettuja verotapahtumia.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-169">The **Grouped** data source of the *Group By* type is configured to group filtered tax transactions of the **Filtered** data source.</span></span>
    - <span data-ttu-id="5d3e4-170">**Ryhmitelty**-tietolähteen **TotalSum**-koostekenttä määritetään laskemaan yhteen **Suodatettu**-tietolähteen **\$TaxAmount**-kentän arvot kaikkein kyseisen tietolähteen suodatettujen verotapahtumien osalta.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-170">The **TotalSum** aggregation field of the **Grouped** data source is configured to summarize values of the **\$TaxAmount** field of the **Filtered** data source for all filtered tax transactions of that data source.</span></span>

        ![Muokkaa GroupBy-parametreja -sivun TotalSum koostekenttä](./media/ER-DeferredSequence-GroupByParameters.png)

9. <span data-ttu-id="5d3e4-172">Tarkista, miten määritetyt tietolähteet on sidottu tietomalliin ja miten ne näyttävät käytetyt tiedot, jotta ne ovat käytettävissä ER-muodossa:</span><span class="sxs-lookup"><span data-stu-id="5d3e4-172">Review how the configured data sources are bound to the data model, and how they expose accessed data to make it available in an ER format:</span></span>

    - <span data-ttu-id="5d3e4-173">**Suodatettu**-tietolähde on sidottu tietomallin **Data.List**-kenttään.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-173">The **Filtered** data source is bound to the **Data.List** field of the data model.</span></span>
    - <span data-ttu-id="5d3e4-174">**Suodatettu**-tietolähteen **\$TaxAmount**-kenttä on sidottu tietomallin **Data.List.Value**-kenttään.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-174">The **\$TaxAmount** field of the **Filtered** data source is bound to the **Data.List.Value** field of the data model.</span></span>
    - <span data-ttu-id="5d3e4-175">**Ryhmitelty**-tietolähteen **TotalSum**-kenttä on sidottu tietomallin **Data.Summary.Total**-kenttään.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-175">The **TotalSum** field of the **Grouped** data source is bound to the **Data.Summary.Total** field of the data model.</span></span>

    ![Mallimäärityksen suunnittelun sivu](./media/ER-DeferredSequence-ModelMapping.png)

10. <span data-ttu-id="5d3e4-177">Sulje sivut **Mallimäärityksen suunnittelu** ja **Mallimääritykset**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-177">Close the **Model mapping designer** and **Model mappings** pages.</span></span>

### <a name="review-the-imported-format"></a><span data-ttu-id="5d3e4-178">Tuodun muodon tarkistaminen</span><span class="sxs-lookup"><span data-stu-id="5d3e4-178">Review the imported format</span></span>

1. <span data-ttu-id="5d3e4-179">Valitse **Määritykset**-sivun määrityspuusta määritys **Muoto lykättyjen sarjojen oppimiseen**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-179">On the **Configurations** page, in the configuration tree, select the **Format to learn deferred sequences** configuration.</span></span>
2. <span data-ttu-id="5d3e4-180">Tarkista muototiedot valitsemalla **Suunnittelutoiminto**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-180">Select **Designer** to review the format details.</span></span>
3. <span data-ttu-id="5d3e4-181">Valitse **Näytä tiedot**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-181">Select **Show details**.</span></span>
4. <span data-ttu-id="5d3e4-182">Tarkista niiden ER-muotokomponenttien asetukset, jotka on määritetty luomaan lähtevä verotapahtumien tietoja sisältävä asiakirja tekstimuodossa:</span><span class="sxs-lookup"><span data-stu-id="5d3e4-182">Review the settings of the ER format components that are configured to generate an outbound document in text format that includes details of the tax transactions:</span></span>

    - <span data-ttu-id="5d3e4-183">**Raportti\\Rivit** -sarjamuotoelementti määritetään täyttämään lähtevä asiakirja yksittäisellä rivillä, joka luodaan sisäkkäisten sarjaelementtien (**Otsikko**, **Tietue** ja **Yhteenveto**) perusteella.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-183">The **Report\\Lines** sequence format element is configured to fill the outbound document with a single line that is generated from the nested sequence elements (**Header**, **Record**, and **Summary**).</span></span>

        ![Rivien sarjamuotoelementti ja sisäkkäiset elementit Muodon suunnittelun sivulla](./media/ER-DeferredSequence-Format.png)

    - <span data-ttu-id="5d3e4-185">**Raportti\\Rivit\\Otsikko** -sarjamuotoelementti määritetään täyttämään lähtevä asiakirja yksittäisellä otsikkorivillä, jossa näkyvät prosessin aloituspäivä ja -aika.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-185">The **Report\\Lines\\Header** sequence format element is configured to fill the outbound document with a single header line that shows the date and time  when the processing starts.</span></span>
    - <span data-ttu-id="5d3e4-186">**Raportti \\Rivit\\Tietue** -sarjamuotoelementti määritetään täyttämään lähtevä asiakirja yksittäisellä rivillä, jossa näkyvät yksittäisten verotapahtumien tiedot.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-186">The **Report \\Lines\\Record** sequence format element is configured to fill the outbound document with a single line that shows the details of individual tax transactions.</span></span> <span data-ttu-id="5d3e4-187">Nämä verotapahtumat erotetaan puolipisteellä.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-187">These tax transactions are separated by a semicolon.</span></span>

        ![Tietueen sarjamuotoelementti, jossa erottimena käytetään puolipistettä](./media/ER-DeferredSequence-Format1.png)

    - <span data-ttu-id="5d3e4-189">**Raportti\\Rivit\\Yhteenveto** -sarjamuotoelementti määritetään täyttämään lähtevä asiakirja yksittäisellä yhteenvetorivillä, joka sisältää käsiteltyjen verotapahtumien veroarvojen summan.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-189">The **Report\\Lines\\Summary** sequence format element is configured to fill the outbound document with a single summary line that includes the sum of the tax values from the processed tax transactions.</span></span>

4. <span data-ttu-id="5d3e4-190">Tarkista seuraavat tiedot **Määritys**-välilehdessä:</span><span class="sxs-lookup"><span data-stu-id="5d3e4-190">On the **Mapping** tab, review the following details:</span></span>

    - <span data-ttu-id="5d3e4-191">**Raportti\\Rivit\\Otsikko** -elementin ei tarvitse olla tietolähteeseen sidottu, jotta se loisi yksittäisen rivin lähtevässä asiakirjassa.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-191">The **Report\\Lines\\Header** element doesn't have to be bound to a data source to generate a single line in an outbound document.</span></span>
    - <span data-ttu-id="5d3e4-192">**Prefix1**-elementti luo **P1**-symboleja ilmaisemaan, että lisätty rivi on raportin otsikkorivi.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-192">The **Prefix1** element generates **P1** symbols to indicate that the line that is added is the report header line.</span></span>
    - <span data-ttu-id="5d3e4-193">**ExecutionDateTime**-elementti luo otsikkorivin lisäämisen päivän ja ajan (millisekunteihin asti).</span><span class="sxs-lookup"><span data-stu-id="5d3e4-193">The **ExecutionDateTime** element generates the date and time (including milliseconds) when the header line is added.</span></span>
    - <span data-ttu-id="5d3e4-194">**Raportti\\Rivit\\Tietue** -elementti on sidottu **model.Data.List**-luetteloon, jotta luodaan yksittäinen rivi jokaiselle sidotun luettelon tietueelle.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-194">The **Report\\Lines\\Record** element is bound to the **model.Data.List** list to generate a single line for every record from the bound list.</span></span>
    - <span data-ttu-id="5d3e4-195">**Prefix2**-elementti luo **P2**-symboleja ilmaisemaan, että lisätty rivi on verotapahtumien tietoja varten.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-195">The **Prefix2** element generates **P2** symbols to indicate that the line that is added is for the tax transaction details.</span></span>
    - <span data-ttu-id="5d3e4-196">**TaxAmount**-elementti on sidottu arvoon **model.Data.List.Value** (joka näkyy muodossa **\@.Value** suhteellisen polun näkymässä), jotta luodaan kulloisenkin verotapahtuman veroarvo.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-196">The **TaxAmount** element is bound to **model.Data.List.Value** (which is shown as **\@.Value** in the relative path view) to generate the tax value of the current tax transaction.</span></span>
    - <span data-ttu-id="5d3e4-197">**RunningTotal**-elementti on paikkamerkki veroarvojen juoksevalle summalle.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-197">The **RunningTotal** element is a placeholder for the running total of the tax values.</span></span> <span data-ttu-id="5d3e4-198">Tällä hetkellä tällä elementillä ei ole tulosta, koska sille ei ole määritetty sitovaa eikä oletusarvoista arvoa.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-198">Currently, this element has no output, because neither a binding nor a default value is configured for it.</span></span>
    - <span data-ttu-id="5d3e4-199">**ExecutionDateTime**-elementti luo päivän ja ajan (millisekunteihin asti) sille, milloin kulloinenkin tapahtuma käsitellään raportissa.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-199">The **ExecutionDateTime** element generates the date and time (including milliseconds) when the current transaction is processed in this report.</span></span>
    - <span data-ttu-id="5d3e4-200">**Raportti\\Rivit\\Yhteenveto** -elementin ei tarvitse olla tietolähteeseen sidottu, jotta se loisi yksittäisen rivin lähtevässä asiakirjassa.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-200">The **Report\\Lines\\Summary** element doesn't have to be bound to a data source to generate a single line in an outbound document.</span></span>
    - <span data-ttu-id="5d3e4-201">**Prefix3**-elementti luo **P3**-symboleja ilmaisemaan, että lisätty rivi sisältää veroarvon yhteensä.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-201">The **Prefix3** element generates **P3** symbols to indicate that the line that is added contains the total tax value.</span></span>
    - <span data-ttu-id="5d3e4-202">**TotalTaxAmount**-elementti on sidottu **model.Data.Summary.Total**, jotta luodaan käsiteltyjen verotapahtumien veroarvojen summa.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-202">The **TotalTaxAmount** element is bound to **model.Data.Summary.Total** to generate the sum of the tax values of the processed tax transactions.</span></span>
    - <span data-ttu-id="5d3e4-203">**ExecutionDateTime**-elementti luo yhteenvetorivin lisäämisen päivän ja ajan (millisekunteihin asti).</span><span class="sxs-lookup"><span data-stu-id="5d3e4-203">The **ExecutionDateTime** element generates the date and time (including milliseconds) when the summary line is added.</span></span>

    ![Yhdistämismääritys-välilehti Muodon suunnittelu -sivulla](./media/ER-DeferredSequence-Format2.png)

### <a name="run-the-imported-format"></a><span data-ttu-id="5d3e4-205">Tuodun muodon suorittaminen</span><span class="sxs-lookup"><span data-stu-id="5d3e4-205">Run the imported format</span></span>

1. <span data-ttu-id="5d3e4-206">Vallitse **Muodon suunnittelu** -sivulla **Suorita**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-206">On the **Format designer** page, select **Run**.</span></span>
2. <span data-ttu-id="5d3e4-207">Lataa verkkoselaimen tarjoama tiedosto ja avaa se tarkistusta varten.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-207">Download the file that the web browser offers, and open it for review.</span></span>

    ![Ladattu tiedosto](./media/ER-DeferredSequence-Run.png)

<span data-ttu-id="5d3e4-209">Huomaa, että yhteenvetorivillä 22 on käsiteltyjen tapahtumien veroarvojen summa.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-209">Notice that summary line 22 presents the sum of the tax values for the processed transactions.</span></span> <span data-ttu-id="5d3e4-210">Koska muoto on määritetty käyttämään arvoa **model.Data.Summary.Total** sitovasti tämän summan palauttamista varten, summa lasketaan kutsumalla mallin yhdistämismääritystä käyttävän *GroupBy*-tyypin **Ryhmitelty**-tietolähteen **TotalSum**-kooste.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-210">Because the format is configured to use the **model.Data.Summary.Total** binding to return this sum, the sum is calculated by calling the **TotalSum** aggregation of the **Grouped** data source of the *GroupBy* type that uses the model mapping.</span></span> <span data-ttu-id="5d3e4-211">Tämän koosteen laskemiseksi mallin yhdistämismääritys iteroi kaikki tapahtumat, jotka on valittu **Suodatettu**-tietolähteessä.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-211">To calculate this aggregation, model mapping iterates over all transactions that have been selected in the **Filtered** data source.</span></span> <span data-ttu-id="5d3e4-212">Vertaamalla rivien 21 ja 22 suoritusaikoja voidaan päätellä, että summan laskemiseen kului 10 millisekuntia (ms).</span><span class="sxs-lookup"><span data-stu-id="5d3e4-212">By comparing the execution times of lines 21 and 22, you can determine that calculation of the sum took 10 milliseconds (ms).</span></span> <span data-ttu-id="5d3e4-213">Vertaamalla rivien 2 ja 21 suoritusaikoja voidaan päätellä, että kaikkien tapahtumarivien luomiseen kului 7 millisekuntia.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-213">By comparing the execution times of lines 2 and 21, you can determine that generation of all transactional lines took 7 ms.</span></span> <span data-ttu-id="5d3e4-214">Siten yhteisaika oli 17 ms.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-214">Therefore, a total of 17 ms was required.</span></span>

### <a name="modify-the-format-so-that-the-summing-is-based-on-generated-output"></a><span data-ttu-id="5d3e4-215">Muodon muokkaaminen siten, että summien laskeminen perustuu luotuun tulokseen</span><span class="sxs-lookup"><span data-stu-id="5d3e4-215">Modify the format so that the summing is based on generated output</span></span>

<span data-ttu-id="5d3e4-216">Jos tapahtumien määrä on huomattavasti suurempi kuin tässä esimerkissä, summien laskemiseen voi kulua enemmän aikaa, ja se voi aiheuttaa suorituskykyongelmia.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-216">If the volume of transactions is much larger than the volume in the current example, the summing time might increase and cause performance issues.</span></span> <span data-ttu-id="5d3e4-217">Muodon asetusta vaihtamalla voit ehkäistä näitä suorituskykyongelmia.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-217">By changing the setting of the format, you can help prevent these performance issues.</span></span> <span data-ttu-id="5d3e4-218">Koska käytät veroarvoja lisätäksesi ne luotavaan raporttiin, voit käyttää näitä tietoja uudelleen veroarvojen summien laskemiseen.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-218">Because you access tax values to include them in the generated report, you can reuse this information to sum tax values.</span></span> <span data-ttu-id="5d3e4-219">Lisä tietoja on kohdassa [Määritä muoto suorittamaan laskenta ja summaus](./tasks/er-format-counting-summing-1.md).</span><span class="sxs-lookup"><span data-stu-id="5d3e4-219">For more information, see [Configure format to do counting and summing](./tasks/er-format-counting-summing-1.md).</span></span>

1. <span data-ttu-id="5d3e4-220">Valitse **Muodon suunnittelija**-sivun **Muoto**-välilehden muotopuussa **Raportti**-tiedostoelementti.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-220">On the **Format designer** page, on the **Format** tab, select the **Report** file element in the format tree.</span></span>
2. <span data-ttu-id="5d3e4-221">Määritä **Kerää tulostiedot** -asetukseksi **Kyllä**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-221">Set the **Collect output details** option to **Yes**.</span></span> <span data-ttu-id="5d3e4-222">Voit nyt määrittää tämän muodon käyttämällä aiemmin luodun raportin sisältöä tietolähteenä, jota voidaan käyttää sisäisillä ER-toiminnoilla [Tietojen keräys](er-functions-category-data-collection.md) -luokassa.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-222">You can now configure this format by using the content of an existing report as a data source that can be accessed by using the built-in ER functions in the [Data collection](er-functions-category-data-collection.md) category.</span></span>
3. <span data-ttu-id="5d3e4-223">Valitse **Yhdistämismääritys**-välilehdessä **Raportti\\Rivit** -sarjaelementti.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-223">On the **Mapping** tab, select the **Report\\Lines** sequence element.</span></span>
4. <span data-ttu-id="5d3e4-224">Määritä **Kerätyn tietoavaimen nimi** -lausekkeen arvoksi `WsColumn`.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-224">Configure the **Collected data key name** expression as `WsColumn`.</span></span>
5. <span data-ttu-id="5d3e4-225">Määritä **Kerätyn tietoavaimen arvo** -lausekkeen arvoksi `WsRow`.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-225">Configure the **Collected data key value** expression as `WsRow`.</span></span>

    ![Rivien sarjaelementti Muodon suunnittelija -sivulla](./media/ER-DeferredSequence-Format3.png)

6. <span data-ttu-id="5d3e4-227">Valitse numeerinen **Raportti\\Rivit\\Tietue\\TaxAmount** -elementti.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-227">Select the **Report\\Lines\\Record\\TaxAmount** numeric element.</span></span>
7. <span data-ttu-id="5d3e4-228">Määritä **Kerätyn tietoavaimen nimi** -lausekkeen arvoksi `SummingAmountKey`.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-228">Configure the **Collected data key name** expression as `SummingAmountKey`.</span></span>

    ![Numeerinen TaxAmount-elementti Muodon suunnittelija -sivulla](./media/ER-DeferredSequence-Format4.png)

    <span data-ttu-id="5d3e4-230">Voit katsoa tämän asetuksen virtuaalisen laskentataulukon täyttämiseksi, jossa solun A1 arvo lisätään jokaisen käsitellyn verotapahtuman verosumman arvoon.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-230">You can consider this setting the fulfillment of a virtual worksheet, where the value of cell A1 is appended with the value of the tax amount from every processed tax transaction.</span></span>

8. <span data-ttu-id="5d3e4-231">Valitse numeerinen **Raportti\\Rivit\\Tietue\\RunningTotal** -elementti ja sitten **Muokkaa kaava**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-231">Select the **Report\\Lines\\Record\\RunningTotal** numeric element, and then select **Edit formula**.</span></span>
9. <span data-ttu-id="5d3e4-232">Määritä `SUMIF(SummingAmountKey, WsColumn, WsRow)` -lauseke käyttämällä [SUMIF](er-functions-datacollection-sumif.md) ER -toimintoa.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-232">Configure the `SUMIF(SummingAmountKey, WsColumn, WsRow)` expression by using the built-in [SUMIF](er-functions-datacollection-sumif.md) ER function.</span></span>
10. <span data-ttu-id="5d3e4-233">Valitse **Tallenna**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-233">Select **Save**.</span></span>

    ![SUMIF-lauseke](./media/ER-DeferredSequence-FormulaDesigner.png)

11. <span data-ttu-id="5d3e4-235">Sulje **Reseptien suunnittelu** -sivu.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-235">Close the **Formula designer** page.</span></span>
12. <span data-ttu-id="5d3e4-236">Valitse ensin **Tallenna** ja sitten **Suorita**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-236">Select **Save**, and then select **Run**.</span></span>
13. <span data-ttu-id="5d3e4-237">Lataa ja tarkista verkkoselaimen tarjoama tiedosto.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-237">Download and review the file that the web browser offers.</span></span>

    ![Ladattu tiedosto](./media/ER-DeferredSequence-Run1.png)

    <span data-ttu-id="5d3e4-239">Rivi 21 sisältää kaikille käsitellyille tapahtumille luotua tulosta tietolähteenä käyttäen lasketun veroarvojen juoksevan summan.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-239">Line 21 contains the running total of tax values that is calculated for all processed transactions by using the generated output as a data source.</span></span> <span data-ttu-id="5d3e4-240">Tämä tietolähde alkaa raportin alusta ja jatkuu viimeisimpään verotapahtumaan asti.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-240">This data source starts from the beginning of the report and continues through the last tax transaction.</span></span> <span data-ttu-id="5d3e4-241">Rivi 22 sisältää kaikkien sellaisten käsiteltyjen tapahtumien veroarvojen summan, jotka on laskettu mallin yhdistämismäärityksessä käyttämällä *GroupBy* -tyypin tietolähdettä.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-241">Line 22 contains the sum of the tax values for all processed transactions that are calculated in the model mapping by using the data source of the *GroupBy* type.</span></span> <span data-ttu-id="5d3e4-242">Huomaa, että nämä arvot ovat samat.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-242">Notice that these values are equal.</span></span> <span data-ttu-id="5d3e4-243">Siksi voidaan käyttää tulokseen perustuvaa yhteenlaskua **GroupBy**-tyypin käytön sijaan.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-243">Therefore, the output-based summing can be used instead of **GroupBy**.</span></span> <span data-ttu-id="5d3e4-244">Vertaamalla rivien 2 ja 21 suoritusaikoja voidaan päätellä, että kaikkien tapahtumarivien luomiseen ja summien laskemiseen kului 9 millisekuntia.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-244">By comparing the execution times of lines 2 and 21, you can determine that generation of all the transactional lines and summing took 9 ms.</span></span> <span data-ttu-id="5d3e4-245">Siksi muokattu muoto on noin kaksi kertaa alkuperäistä muotoa nopeampi tietorivien luomisessa ja veroarvojen summien laskemisessa.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-245">Therefore, as far as the generation of detailed lines and the summing of tax values are concerned, the modified format is approximately two times faster than the original format.</span></span>

14. <span data-ttu-id="5d3e4-246">Valitse numeerinen **Raportti\\Rivit\\Yhteenveto\\TotalTaxAmount** -elementti ja sitten **Muokkaa kaava**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-246">Select the **Report\\Lines\\Summary\\TotalTaxAmount** numeric element, and then select **Edit formula**.</span></span>
15. <span data-ttu-id="5d3e4-247">Kirjoita `SUMIF(SummingAmountKey, WsColumn, WsRow)` -lauseke olemassa olevan lausekkeen sijaan.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-247">Enter the `SUMIF(SummingAmountKey, WsColumn, WsRow)` expression instead of the existing expression.</span></span>
16. <span data-ttu-id="5d3e4-248">Valitse ensin **Tallenna** ja sitten **Suorita**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-248">Select **Save**, and then select **Run**.</span></span>
17. <span data-ttu-id="5d3e4-249">Lataa ja tarkista verkkoselaimen tarjoama tiedosto.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-249">Download and review the file that the web browser offers.</span></span>

    ![Ladattu tiedosto](./media/ER-DeferredSequence-Run2.png)

    <span data-ttu-id="5d3e4-251">Huomaa, että veroarvojen juokseva summa viimeisellä tapahtumatietojen rivillä vastaa nyt yhteenvetorivin summaa.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-251">Notice that the running total of tax values on the last transaction details line now equals the sum on the summary line.</span></span>

### <a name="put-values-of-output-based-summing-in-the-report-header"></a><span data-ttu-id="5d3e4-252">Tulosperusteisten summien laskemisen arvojen määritys raportin otsikossa</span><span class="sxs-lookup"><span data-stu-id="5d3e4-252">Put values of output-based summing in the report header</span></span>

<span data-ttu-id="5d3e4-253">Jos sinun on esimerkiksi esitettävä veroarvojen summa raportin otsikossa, voit muokata muotoa.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-253">If, for example, you must present the sum of tax values in the header of your report, you can modify your format.</span></span>

1. <span data-ttu-id="5d3e4-254">Valitse **Muodon suunnittelija** -sivun **Muoto**-välilehdessä sarjaelementti **Raportti\\Rivit\\Yhteenveto**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-254">On the **Format designer** page, on the **Format** tab, select the **Report\\Lines\\Summary** sequence element.</span></span>
2. <span data-ttu-id="5d3e4-255">Valitse **Siirrä ylös**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-255">Select **Move up**.</span></span>
3. <span data-ttu-id="5d3e4-256">Valitse ensin **Tallenna** ja sitten **Suorita**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-256">Select **Save**, and then select **Run**.</span></span>
4. <span data-ttu-id="5d3e4-257">Lataa ja tarkista verkkoselaimen tarjoama tiedosto.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-257">Download and review the file that the web browser offers.</span></span>

    ![Ladattu tiedosto](./media/ER-DeferredSequence-Run3.png)

    <span data-ttu-id="5d3e4-259">Huomaa, että yhteenvetorivin 2 veroarvojen summa on nyt 0 (nolla), koska tämä summa lasketaan nyt luodun tuloksen perusteella.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-259">Notice that the sum of tax values on summary line 2 now equals 0 (zero), because this sum is now calculated based on the generated output.</span></span> <span data-ttu-id="5d3e4-260">Kun rivi 2 luodaan, luotu tulos ei vielä sisällä rivejä, joilla on tapahtumatietoja.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-260">When line 2 is generated, the generated output doesn't yet contain lines that have transaction details.</span></span> <span data-ttu-id="5d3e4-261">Voit määrittää tämän muodon lykkäämään **Raportti\\Rivit\\Yhteenveto** -sarjaelementtiä siihen asti, että **Raportti\\Rivit\\Tietue** -sarjaelementti on suoritettu kaikkien verotapahtumien osalta.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-261">You can configure this format to defer the execution of the **Report\\Lines\\Summary** sequence element until the **Report\\Lines\\Record** sequence element has been run for all tax transactions.</span></span>

### <a name="defer-the-execution-of-the-summary-sequence-so-that-the-calculated-total-is-used"></a><span data-ttu-id="5d3e4-262">Yhteenvetosarjan suorittamisen lykkääminen siten, että käytetään laskettua summaa</span><span class="sxs-lookup"><span data-stu-id="5d3e4-262">Defer the execution of the summary sequence so that the calculated total is used</span></span>

1. <span data-ttu-id="5d3e4-263">Valitse **Muodon suunnittelija** -sivun **Muoto**-välilehdessä sarjaelementti **Raportti\\Rivit\\Yhteenveto**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-263">On the **Format designer** page, on the **Format** tab, select the **Report\\Lines\\Summary** sequence element.</span></span>
2. <span data-ttu-id="5d3e4-264">Määritä **Lykätty suorittaminen** -asetukseksi **Kyllä**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-264">Set the **Deferred execution** option to **Yes**.</span></span>

    ![Muodon suunnittelija -sivun yhteenvetosarjaelementin lykätyn suorittamisen vaihtoehto](./media/ER-DeferredSequence-Format5.png)

3. <span data-ttu-id="5d3e4-266">Valitse ensin **Tallenna** ja sitten **Suorita**.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-266">Select **Save**, and then select **Run**.</span></span>
4. <span data-ttu-id="5d3e4-267">Lataa ja tarkista verkkoselaimen tarjoama tiedosto.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-267">Download and review the file that the web browser offers.</span></span>

    ![Ladattu tiedosto](./media/ER-DeferredSequence-Run4.png)

    <span data-ttu-id="5d3e4-269">**Raportti\\Rivit\\Yhteenveto** -sarjaelementti suoritetaan nyt vasta, kun kaikki muut sen pääelementin **Raportti\\Rivit** alaiset kohteet on suoritettu.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-269">The **Report\\Lines\\Summary** sequence element is now run only after all other items that are nested under its parent element, **Report\\Lines**, have been run.</span></span> <span data-ttu-id="5d3e4-270">Siten se suoritetaan sen jälkeen, kun **Raportti\\Rivit\\Tietue** -sarjaelementti on suoritettu kaikkien **model.Data.List** -tietolähteen verotapahtumien osalta.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-270">Therefore, it's run after the **Report\\Lines\\Record** sequence element has been run for all tax transactions of the **model.Data.List** data source.</span></span> <span data-ttu-id="5d3e4-271">Tämä ilmenee rivien 1, 2 ja 3 ja viimeisen rivin 22 suoritusajoista.</span><span class="sxs-lookup"><span data-stu-id="5d3e4-271">The execution times of lines 1, 2, and 3, and of the last line, 22, reveal this fact.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="5d3e4-272">Lisäresurssit</span><span class="sxs-lookup"><span data-stu-id="5d3e4-272">Additional resources</span></span>

- [<span data-ttu-id="5d3e4-273">Määritä muoto suorittamaan laskenta ja summaus</span><span class="sxs-lookup"><span data-stu-id="5d3e4-273">Configure format to do counting and summing</span></span>](./tasks/er-format-counting-summing-1.md)
- [<span data-ttu-id="5d3e4-274">Sähköisen raportoinnin muodon suorittamisen seuraaminen suorituskykyyn liittyvien ongelmien ratkaisemiseksi</span><span class="sxs-lookup"><span data-stu-id="5d3e4-274">Trace execution of ER format to troubleshoot performance issues</span></span>](trace-execution-er-troubleshoot-perf.md)
- [<span data-ttu-id="5d3e4-275">ER-muotoisten XML-elementtien suorittamisen lykkäys</span><span class="sxs-lookup"><span data-stu-id="5d3e4-275">Defer the execution of XML elements in ER formats</span></span>](er-defer-xml-element.md#Example)
