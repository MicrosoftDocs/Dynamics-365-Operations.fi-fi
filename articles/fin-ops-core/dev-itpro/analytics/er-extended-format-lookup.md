---
title: Sähköisen raportoinnin (ER) laajennettu muodon haku
description: Tässä ohjeaiheessa esitellään, miten ER-muotoviite voidaan määrittää ER-muodon haussa, kun tarvittava muoto on tallennettu yleiseen tietovarastoon.
author: NickSelin
manager: AnnBe
ms.date: 03/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERSolutionTable, ERWorkspace
audience: Application User
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 97423
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2020-04-01
ms.dyn365.ops.version: AX 10.0.9
ms.openlocfilehash: 28bdd02c25db27536a489f9e8ab2a91a5ca0f09c
ms.sourcegitcommit: b92c3e1b3403d0455fc4e0bf9132d6bc0d7aba5e
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 03/18/2020
ms.locfileid: "3138857"
---
# <a name="allow-users-to-set-up-an-er-format-reference-inquiring-a-format-from-the-global-repository"></a><span data-ttu-id="4e410-103">Salli käyttäjien määrittää ER-muotoviittaus, jolla kysytään muotoa yleisestä tietovarastosta</span><span class="sxs-lookup"><span data-stu-id="4e410-103">Allow users to set up an ER format reference inquiring a format from the Global repository</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="4e410-104">Voit käyttää [Sähköisen raportoinnin](general-electronic-reporting.md) (ER) kehystä määrittääksesi [muotoja](general-electronic-reporting.md#FormatComponentOutbound) lähteville asiakirjoille eri maiden ja alueiden lakisääteisten vaatimusten mukaan.</span><span class="sxs-lookup"><span data-stu-id="4e410-104">You can use the [Electronic reporting](general-electronic-reporting.md) (ER) framework to configure [formats](general-electronic-reporting.md#FormatComponentOutbound) for outbound documents in accordance to the legal requirements of various countries/regions.</span></span> <span data-ttu-id="4e410-105">Voit käyttää ER-kehystä myös [muotojen](general-electronic-reporting.md#FormatComponentInbound) määrittämiseen saapuvien asiakirjojen jäsentämistä ja kyseisten asiakirjojen tietojen sovellustietoihin liittämistä tai sovellustietojen päivittämistä varten.</span><span class="sxs-lookup"><span data-stu-id="4e410-105">You can also use the ER framework to configure [formats](general-electronic-reporting.md#FormatComponentInbound) for parsing inbound documents and use the information from those documents to append or update application data.</span></span> <span data-ttu-id="4e410-106">Kaikkia näitä muotoja voi käyttää Dynamics 365 Finance -esiintymässä saapuvien tai lähtevien liiketoiminta-asiakirjojen käsittelyyn osana tiettyjä liiketoimintaprosesseja.</span><span class="sxs-lookup"><span data-stu-id="4e410-106">Each of these formats can used in your Dynamics 365 Finance instance for handling inbound or outbound business documents as part of a certain business process.</span></span> 

<span data-ttu-id="4e410-107">Tavallisesti sinun on määritettävä, mitä ER-muotoa on käytettävä tietyssä liiketoimintaprosessissa.</span><span class="sxs-lookup"><span data-stu-id="4e410-107">Usually, you must specify what ER format must be used in a certain business process.</span></span> <span data-ttu-id="4e410-108">Valitse tätä varten yksittäinen ER-muoto hakukentässä, joka on määritetty osana liiketoimintaprosessikohtaisia parametreja.</span><span class="sxs-lookup"><span data-stu-id="4e410-108">To do that, select a single ER format in a lookup field that is configured as part of business process-specific parameters.</span></span> <span data-ttu-id="4e410-109">Näitä hakukenttiä käytetään useimmiten asianmukaisen ER-kehyksen ohjelmointirajapinnan avulla.</span><span class="sxs-lookup"><span data-stu-id="4e410-109">These lookup fields are usually implemented by using the appropriate API of the ER framework.</span></span> <span data-ttu-id="4e410-110">Lisätietoja on kohdassa [ER-kehyksen ohjelmointirajapinta – koodi muodon yhdistämismäärityksen haun näyttämistä varten](er-apis-app73.md#code-to-display-a-format-mapping-lookup).</span><span class="sxs-lookup"><span data-stu-id="4e410-110">For more information, see [ER framework API - code to display a format mapping lookup](er-apis-app73.md#code-to-display-a-format-mapping-lookup).</span></span>

<span data-ttu-id="4e410-111">Kun esimerkiksi määrität [ulkomaankaupan parametreja](https://docs.microsoft.com/dynamics365/finance/localizations/emea-intrastat#set-up-foreign-trade-parameters), sinun on määritettävä viitteet yksittäisiin ER-muotoihin, joita käytetään Intrastat-ilmoituksen sekä Intrastat-ilmoituksen valvontaraportin luomiseen.</span><span class="sxs-lookup"><span data-stu-id="4e410-111">For example, when you configure [foreign trade parameters](https://docs.microsoft.com/dynamics365/finance/localizations/emea-intrastat#set-up-foreign-trade-parameters), you need to set up the references to individual ER formats that will be used to generate the Intrastat declaration and the Intrastat declaration control report.</span></span> <span data-ttu-id="4e410-112">Alla olevissa näyttökuvissa näkyy, miltä ER-muotojen hakukentät näyttävät **Ulkomaankaupan parametrit** -sivulla.</span><span class="sxs-lookup"><span data-stu-id="4e410-112">The screenshots below show how the ER formats lookup field looks like in the **Foreign trade parameters** page.</span></span>

<span data-ttu-id="4e410-113">Jos kulloinenkin Finance-esiintymä ei sisällä Intrastat-liiketoimintaprosessiin liittyviä ER-muotoja, tämä hakukenttä on tyhjä.</span><span class="sxs-lookup"><span data-stu-id="4e410-113">If the current Finance instance contains no Intrastat business process related ER formats, this lookup field will be empty.</span></span>

<span data-ttu-id="4e410-114">[![Ulkomaankaupan parametrisivu](./media/ER-ExtLookup-Lookup1.gif)](./media/ER-ExtLookup-Lookup1.gif)</span><span class="sxs-lookup"><span data-stu-id="4e410-114">[![Foreign trade parameters page](./media/ER-ExtLookup-Lookup1.gif)](./media/ER-ExtLookup-Lookup1.gif)</span></span>

<span data-ttu-id="4e410-115">Jos kulloinenkin Finance-esiintymä sisältää Intrastat-liiketoimintaprosessiin liittyviä ER-muotoja, tämä hakukenttä tarjoaa ER-muodot.</span><span class="sxs-lookup"><span data-stu-id="4e410-115">If the current Finance instance contains Intrastat business process related ER formats, this lookup field offers the ER formats.</span></span>

<span data-ttu-id="4e410-116">[![Ulkomaankaupan parametrisivu](./media/ER-ExtLookup-Lookup2.png)](./media/ER-ExtLookup-Lookup2.png)</span><span class="sxs-lookup"><span data-stu-id="4e410-116">[![Foreign trade parameters page](./media/ER-ExtLookup-Lookup2.png)](./media/ER-ExtLookup-Lookup2.png)</span></span>

<span data-ttu-id="4e410-117">Tämä haku tarjoaa vain ne ER-muodot, jotka on jo tuotu kulloiseenkin Finance-esiintymään.</span><span class="sxs-lookup"><span data-stu-id="4e410-117">This lookup offers only the ER formats that have already been imported to the current Finance instance.</span></span> <span data-ttu-id="4e410-118">[Tuodaksesi](./tasks/er-import-configuration-lifecycle-services.md) ER-ratkaisuja kulloiseenkin Finance-esiintymään sinulla on oltava käyttöoikeudet suorittaa asianmukainen ER-kehyksen toiminto, joka tukee ER-muotoja sisältävien ER-ratkaisujen [elinkaarta](general-electronic-reporting-manage-configuration-lifecycle.md).</span><span class="sxs-lookup"><span data-stu-id="4e410-118">To [import](./tasks/er-import-configuration-lifecycle-services.md) ER solutions to the current Finance instance, you need to have permissions to run the appropriate function of the ER framework that supports the [lifecycle](general-electronic-reporting-manage-configuration-lifecycle.md) of ER solutions that contain ER formats.</span></span>

<span data-ttu-id="4e410-119">Alkaen Financen versiosta 10.0.9 (huhtikuun 2020 julkaisu) ER-muodon haun käyttöliittymää, jota käytetään ER-kehyksen ohjelmointirajapinnan avulla, on laajennettu.</span><span class="sxs-lookup"><span data-stu-id="4e410-119">Starting in the Finance version 10.0.9 (April 2020 release), the user interface of the ER format lookup that is implemented by using the ER framework API, has been extended.</span></span> <span data-ttu-id="4e410-120">Voit edelleen valita olemassa olevia ER-muotoja, jotka löydät **Valitse muotomääritys** -pikavälilehdestä.</span><span class="sxs-lookup"><span data-stu-id="4e410-120">You can still select the existing ER formats, which on the **Select format configuration** FastTab.</span></span> <span data-ttu-id="4e410-121">Tämän lisäksi laajennettu haku tarjoaa uuden mahdollisuuden etsi tiettyjä ER-muotoja yleisestä tietovarastosta.</span><span class="sxs-lookup"><span data-stu-id="4e410-121">In addition to that, the extended lookup offers the new option to search the Global repository (GR) to locate specific ER formats.</span></span> <span data-ttu-id="4e410-122">Kaikki yleisen tietovaraston ER-muodot esitetään **tuo yleisestä tietovarastosta** -pikavalikossa.</span><span class="sxs-lookup"><span data-stu-id="4e410-122">All ER formats of the GR are offered on the **Import from Global repository** FastTab.</span></span>

<span data-ttu-id="4e410-123">[![Ulkomaankaupan parametrisivu](./media/ER-ExtLookup-Lookup3.png)](./media/ER-ExtLookup-Lookup3.png)</span><span class="sxs-lookup"><span data-stu-id="4e410-123">[![Foreign trade parameters page](./media/ER-ExtLookup-Lookup3.png)](./media/ER-ExtLookup-Lookup3.png)</span></span>

<span data-ttu-id="4e410-124">Samankaltaisesti kuin**Valitse muodon määritys** -pikavälilehti myös **Tuo yleisestä tietovarastosta**-pikavälilehdessä näkyvät vain sille liiketoimintaprosessille sopivat ER-muodot, jolle on valittu ER-muoto tässä hakukentässä.</span><span class="sxs-lookup"><span data-stu-id="4e410-124">Similar to the **Select format configuration** FastTab, the **Import from Global repository** FastTab shows only the ER formats that are applicable to the business process for which an ER format is selected in this lookup field.</span></span> <span data-ttu-id="4e410-125">Tässä esimerkissä luodaan Intrastat-ilmoitus.</span><span class="sxs-lookup"><span data-stu-id="4e410-125">In this example, the generation of Intrastat declaration.</span></span> <span data-ttu-id="4e410-126">ER-muoto on sovellettavissa sille yritykselle, johon käyttäjä on tällä hetkellä kirjautunut yrityksen maakontekstista riippuen.</span><span class="sxs-lookup"><span data-stu-id="4e410-126">The ER format is applicable for the company to which the user is currently signed in, depending on the company country context.</span></span>

<span data-ttu-id="4e410-127">Kun valitset **Tuo yleisestä tietovarastosta** -pikavälilehdestä ER-muodon, valitun ER-muodon [määritys](general-electronic-reporting.md#Configuration) tuodaan yleisestä tietovarastosta kulloiseenkin Finance-esiintymään.</span><span class="sxs-lookup"><span data-stu-id="4e410-127">When you select an ER format on the **Import from Global repository** FastTab, the selected ER format [configuration](general-electronic-reporting.md#Configuration) is imported from the GR to the current Finance instance.</span></span>

<span data-ttu-id="4e410-128">[![Ulkomaankaupan parametrisivu](./media/ER-ExtLookup-FormatImport.png)](./media/ER-ExtLookup-FormatImport.png)</span><span class="sxs-lookup"><span data-stu-id="4e410-128">[![Foreign trade parameters page](./media/ER-ExtLookup-FormatImport.png)](./media/ER-ExtLookup-FormatImport.png)</span></span>

<span data-ttu-id="4e410-129">Jos tuonti sitten saadaan suoritettua loppuun onnistuneesti, viite tuotuun ER-muotoon tallennettaan tähän hakukenttään.</span><span class="sxs-lookup"><span data-stu-id="4e410-129">Then, if the import completes successfully, the reference to the imported ER format is stored in this lookup field.</span></span> <span data-ttu-id="4e410-130">Huomaa, että kun käytät yleistä tietovarastoa ensimmäisen kerran, sinun on seurattava annettua linkkiä ja rekisteröidyttävä [Regulatory Configuration Serviceen](https://aka.ms/rcs) (RCS), jota käytetään yleisen tietovaraston käyttöoikeuksien hallintaan.</span><span class="sxs-lookup"><span data-stu-id="4e410-130">Note that when you access the GR for the first time, you need to follow the link provided to sign up for the [Regulatory Configuration Service](https://aka.ms/rcs) (RCS) that is used to manage access to the GR storage.</span></span>

<span data-ttu-id="4e410-131">[![Ulkomaankaupan parametrisivu](./media/ER-ExtLookup-RepoSignUp.png)](./media/ER-ExtLookup-RepoSignUp.png)</span><span class="sxs-lookup"><span data-stu-id="4e410-131">[![Foreign trade parameters page](./media/ER-ExtLookup-RepoSignUp.png)](./media/ER-ExtLookup-RepoSignUp.png)</span></span>

<span data-ttu-id="4e410-132">Oletusarvoisesti **Tuo yleisesti** -pikavälilehdessä näkyy yleisen tietovaraston sisällön perusteella suorituskykyparannuksia varten automaattisesti luotavan väliaikaisen tallennustilan ER-muotojen luettelo.</span><span class="sxs-lookup"><span data-stu-id="4e410-132">By default, the **Import from Global repository** FastTab presents the list of ER formats from the temporary storage that is automatically created based on the GR content for performance improvements.</span></span> <span data-ttu-id="4e410-133">Tämä tapahtuu, kun **Tuo yleisestä tietovarastosta** -pikavälilehti avataan ensimmäistä kertaa, mikä saattaa kestää useita sekunteja.</span><span class="sxs-lookup"><span data-stu-id="4e410-133">This happens when the **Import from Global repository** FastTab is opened the first time, which may take several seconds.</span></span>

<span data-ttu-id="4e410-134">Jos et näe tarvittavaa ER-muotoa **Tuo yleisestä tietovarastosta** -pikavälilehdessä, mutta olet varma, että kyseinen ER-muoto on tallennettu yleiseen tietovarastoon, valitse vaihtoehto **Synkronoi**.</span><span class="sxs-lookup"><span data-stu-id="4e410-134">If you do not see the required ER format in the **Import from Global repository** FastTab, but you are sure that this ER format is stored in the GR, select the **Synchronize** option.</span></span> <span data-ttu-id="4e410-135">Tämä päivittää väliaikaisen tallennustilan ja synkronoi yleisen tietovaraston kulloisenkin sisällön kanssa.</span><span class="sxs-lookup"><span data-stu-id="4e410-135">This will update the temporary storage and synchronize it with the current content of the GR.</span></span>

## <a name="feature-activation"></a><span data-ttu-id="4e410-136">Ominaisuuden aktivointi</span><span class="sxs-lookup"><span data-stu-id="4e410-136">Feature activation</span></span>

<span data-ttu-id="4e410-137">Tämän toiminnon käytettävyyttä ohjaa toiminto **ER:n muotomääritysten laajennettu haku, joka sallii kyselyt yleiseen tietovarastoon** kohdassa **Ominaisuuksien hallinta**.</span><span class="sxs-lookup"><span data-stu-id="4e410-137">The availability of this functionality is controlled by the feature **Extended lookup of ER format configurations allowing to inquire the Global repository** in the **Feature management**.</span></span> <span data-ttu-id="4e410-138">Tämä ominaisuus on oletusarvoisesti käytössä.</span><span class="sxs-lookup"><span data-stu-id="4e410-138">This feature is enabled by default.</span></span>

<span data-ttu-id="4e410-139">[![Toimintojen hallintasivu](./media/ER-ExtLookup-FeatureMngt.png)](./media/ER-ExtLookup-FeatureMngt.png)</span><span class="sxs-lookup"><span data-stu-id="4e410-139">[![Feature management page](./media/ER-ExtLookup-FeatureMngt.png)](./media/ER-ExtLookup-FeatureMngt.png)</span></span>

## <a name="security-considerations"></a><span data-ttu-id="4e410-140">Tietojen suojaamisesta</span><span class="sxs-lookup"><span data-stu-id="4e410-140">Security considerations</span></span>

<span data-ttu-id="4e410-141">**Ylläpidä määritystietovarastoja** (**ERMaintainSolutionRepositories**) -oikeus hallitsee yleisen tietovaraston käyttöoikeuksia sellaisten käyttäjien osalta, jotka avaavat ER-muotohaun käyttöön otetulla **Tuo yleisestä tietovarastosta** -pikavälilehdellä.</span><span class="sxs-lookup"><span data-stu-id="4e410-141">The **Maintain configuration repositories** (**ERMaintainSolutionRepositories**) privilege controls access to the GR for a user opening the ER format lookup with the enabled **Import from Global repository** FastTab.</span></span> <span data-ttu-id="4e410-142">Jotta käyttäjät voivat käyttää yleisen tietovaraston sisältöä ER-muotohauissa, sinun on muutettava käyttöoikeusasetuksia myöntämällä **ERMaintainSolutionRepositories**-oikeus käyttäjille joko suoraan tai käyttämällä jo osoitettuja rooleja ja velvollisuuksia.</span><span class="sxs-lookup"><span data-stu-id="4e410-142">To allow users to access the GR content from the ER format lookups, you need to change the security settings by granting the **ERMaintainSolutionRepositories** privilege to users either directly or by using already assigned roles and duties.</span></span>

<span data-ttu-id="4e410-143">Seuraavassa näyttökuvassa näkyy, miten tämä oikeus voidaan myöntää käyttäjille, joilla on **Kirjanpitäjä**-rooli.</span><span class="sxs-lookup"><span data-stu-id="4e410-143">The following screenshot shows how this privilege can be granted to users who are assigned to the **Accountant** role.</span></span> <span data-ttu-id="4e410-144">Tämän roolin avulla käyttäjät voivat määrittää ulkomaankaupan parametreja ja määrittää viitteitä ER-muotoihin kentissä **Tiedostomuodon yhdistämismääritys** ja **Raporttimuodon yhdistämismääritys** sivulla **Ulkomaankaupan parametrit**.</span><span class="sxs-lookup"><span data-stu-id="4e410-144">This role makes allows users to configure foreign trade parameters and set up references to the ER formats in the **File format mapping** and **Report format mapping** fields on the **Foreign trade parameters** page.</span></span>

<span data-ttu-id="4e410-145">[![Suojauskonfiguraatiosivu](./media/ER-ExtLookup-SecuritySetting.png)](./media/ER-ExtLookup-SecuritySetting.png)</span><span class="sxs-lookup"><span data-stu-id="4e410-145">[![Security configuration page](./media/ER-ExtLookup-SecuritySetting.png)](./media/ER-ExtLookup-SecuritySetting.png)</span></span>

## <a name="limitations"></a><span data-ttu-id="4e410-146">Rajoitukset</span><span class="sxs-lookup"><span data-stu-id="4e410-146">Limitations</span></span>

<span data-ttu-id="4e410-147">Yleisen tietovaraston käyttöä ER-muotohaussa tuetaan tällä hetkellä vain sellaisten ER-muotojen valinnassa, joita käytetään lähtevien asiakirjojen luomiseen.</span><span class="sxs-lookup"><span data-stu-id="4e410-147">Access to the GR in the ER format lookup is currently only supported for the selection of ER formats that are used to generate outbound documents.</span></span>

## <a name="frequently-asked-questions"></a><span data-ttu-id="4e410-148">Usein kysytyt kysymykset</span><span class="sxs-lookup"><span data-stu-id="4e410-148">Frequently asked questions</span></span>

### <a name="why-cant-i-access-the-global-repository-from-the-er-format-lookup"></a><span data-ttu-id="4e410-149">Miksi en voi käyttää yleistä tietovarastoa ER-muotohausta?</span><span class="sxs-lookup"><span data-stu-id="4e410-149">Why can't I access the Global repository from the ER format lookup?</span></span>

<span data-ttu-id="4e410-150">Jos olet ottanut **ER:n muotomääritysten laajennettu haku, joka sallii kyselyt yleiseen tietovarastoon** -ominaisuuden käyttöön **Ominaisuuksien hallinta** -sivulla, mutta käyttäjät eivät näe ER-muotoja **Tuo yleisestä tietovarastosta** -pikavälilehdessä ja **Synkronoi**-valinta näkyy muttei ole käytössä, varmista, että käyttäjälle on myönnetty **Ylläpidä määritystietovarastoja** **ERMaintainSolutionRepositories** -oikeus.</span><span class="sxs-lookup"><span data-stu-id="4e410-150">If you have enabled the **Extended lookup of ER format configurations allowing to inquire the Global repository** feature on the **Feature management** page, but users can't see ER formats on the **Import from Global repository** FastTab and the **Synchronize** option is visible but disabled, make sure that the **Maintain configuration repositories** (**ERMaintainSolutionRepositories**) privilege has been granted to the user.</span></span> <span data-ttu-id="4e410-151">Pyydä tätä oikeutta järjestelmänvalvojalta.</span><span class="sxs-lookup"><span data-stu-id="4e410-151">Contact your system administrator to receive this privilege.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="4e410-152">Lisäresurssit</span><span class="sxs-lookup"><span data-stu-id="4e410-152">Additional resources</span></span>

- [<span data-ttu-id="4e410-153">Sähköisen raportoinnin (ER) yleiskatsaus</span><span class="sxs-lookup"><span data-stu-id="4e410-153">Electronic reporting (ER) overview</span></span>](general-electronic-reporting.md)
- [<span data-ttu-id="4e410-154">Sähköisen raportoinnin (ER) kehysohjelmointirajapinta</span><span class="sxs-lookup"><span data-stu-id="4e410-154">Electronic reporting (ER) framework API</span></span>](er-apis-app73.md)
- [<span data-ttu-id="4e410-155">Sähköisen raportoinnin (ER) määritysten elinkaaren hallinta</span><span class="sxs-lookup"><span data-stu-id="4e410-155">Manage Electronic reporting (ER) configurations lifecycle</span></span>](general-electronic-reporting-manage-configuration-lifecycle.md)
