---
title: Yritysten väliset tietolähteet sähköisessä raportoinnissa (ER)
description: Tässä ohjeaiheessa kerrotaan yritystenvälisten tietolähteiden käytöstä sähköisessä raportoinnissa (ER).
author: NickSelin
ms.date: 05/25/2018
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERModelMappingDesigner, ERFormatMappingLegalEntityFilterTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: 220314
ms.assetid: 2685df16-5ec8-4fd7-9495-c0f653e82567
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-04-01
ms.dyn365.ops.version: Release 8.0
ms.openlocfilehash: 7528a84bae388dd8b159405043570b647d6e2cb4
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 03/31/2021
ms.locfileid: "5753741"
---
# <a name="cross-company-data-sources-in-electronic-reporting-er"></a><span data-ttu-id="8aac5-103">Yritysten väliset tietolähteet sähköisessä raportoinnissa (ER)</span><span class="sxs-lookup"><span data-stu-id="8aac5-103">Cross-company data sources in Electronic reporting (ER)</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="8aac5-104">Voit suunnitella sähköisen raportoinnin (ER) muotoja luodaksesi lähteviä tiedostoja eri muodoissa.</span><span class="sxs-lookup"><span data-stu-id="8aac5-104">You can design Electronic reporting (ER) formats to generate outgoing documents in various formats.</span></span> <span data-ttu-id="8aac5-105">Kun asiakirja luodaan, ER-muoto kutsuu tietolähteitä, jotka määritettiin vastaavassa ER-mallin määrityksessä.</span><span class="sxs-lookup"><span data-stu-id="8aac5-105">When a document is generated, an ER format calls data sources that were configured in a corresponding ER model mapping.</span></span> <span data-ttu-id="8aac5-106">Voit määrittää tietojen noutamisen käyttöoikeudet sovelluksen tauluihin käyttämällä ER-tietolähteitä, joiden tyyppi on **Taulukkotietueet**.</span><span class="sxs-lookup"><span data-stu-id="8aac5-106">To configure access to application tables for record retrieval, you can use ER data sources of the **Table records** type.</span></span> <span data-ttu-id="8aac5-107">Tietolähde palauttaa kaikki tietueet käytettäessä taulua, joka on jaettu taulu (toisin sanoen taulu, johon tiedot tallennetaan ilman yrityksen tunnusta).</span><span class="sxs-lookup"><span data-stu-id="8aac5-107">When the accessing table is a shared table (that is, a table where data is saved without a company identifier), this data source returns all records.</span></span> <span data-ttu-id="8aac5-108">Käytettäessä yrityksestä riippuvaa taulukkoa (toisin sanoen taulu, johon tiedot tallennetaan yrityskohtaisesti) tietolähde palauttaa vain tietueet, jotka on tallennettu nykyiselle yritykselle (toisin sanoen yrityskonteksti, jossa ER-muotoa suoritetaan).</span><span class="sxs-lookup"><span data-stu-id="8aac5-108">When the accessing table is a company-dependent table (that is, a table where data is saved per company), this data source returns only the records that have been saved for the current company (that is, the company context that the ER format is running under).</span></span>

<span data-ttu-id="8aac5-109">Mallimäärityksen jokainen tietolähde, jonka tyyppi on **Taulukkotietueet**, voidaan nyt merkitä yritystenväliseksi tietolähteeksi.</span><span class="sxs-lookup"><span data-stu-id="8aac5-109">Every data source of the **Table records** type in a model mapping can be now marked as a cross-company data source.</span></span> <span data-ttu-id="8aac5-110">Siksi voit käyttää sovelluksen taulujen yritystenvälisiä tietoja käyttämällä tietolähteitä, joiden tyyppi on **Taulukkotietueet**.</span><span class="sxs-lookup"><span data-stu-id="8aac5-110">Therefore, you can use data sources of the **Table records** type to access cross-company data in application tables.</span></span>

<span data-ttu-id="8aac5-111">Jos merkitset tietolähteen yritystenväliseksi, tapahtuu seuraavaa:</span><span class="sxs-lookup"><span data-stu-id="8aac5-111">If you mark a data source as cross-company, the following behavior occurs:</span></span>

- <span data-ttu-id="8aac5-112">Tietolähde, joka viittaa mihin tahansa jaettuun tauluun paitsi CompanyInfo-tauluun, palauttaa kaikki viitatun taulun tietueet.</span><span class="sxs-lookup"><span data-stu-id="8aac5-112">For a data source that refers to any shared table except CompanyInfo, the data source returns all records that exist in the referenced table.</span></span> 
- <span data-ttu-id="8aac5-113">Tietolähde, joka viittaa CompanyInfo-tauluun, vaikka CompanyInfo on jaettu taulu, palauttaa tietueet, jotka sisältävät määritetyn vaikutusalueen yrityksen tunnuksen.</span><span class="sxs-lookup"><span data-stu-id="8aac5-113">For a data source that refers to the CompanyInfo table, even though CompanyInfo is a shared table, the data source returns the records that contain the identifier of a company from the defined scope.</span></span>
- <span data-ttu-id="8aac5-114">Yrityksestä riippuvalle taululle tietolähde palauttaa viitatun taulun tietueet, jotka sisältävät määritetyn vaikutusalueen yrityksen tunnuksen.</span><span class="sxs-lookup"><span data-stu-id="8aac5-114">For any company-dependent table, the data source returns the records of the referenced table that contain the identifier of a company from the defined scope.</span></span>

<span data-ttu-id="8aac5-115">Kun järjestelmäkyselyn valintaikkunassa **Kysy kyselyä** -vaihtoehto on valittuna kaikille tietolähteille, jotka on merkitty yritystenväliseksi, voit sisällyttää yhden tai useita yrityksiä manuaalisesti **Yritysalue**-välilehdessä.</span><span class="sxs-lookup"><span data-stu-id="8aac5-115">In the system query dialog box, when the **Ask for query** option is turned on for any data source that is marked as cross-company, you can manually select one or more companies to include on the **Company range** tab.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8aac5-116">Kuten muutkin suodattimet, yrityssuodatin säilytetään kyselyiden viimeksi käytettynä arvona suoritettaessa ER-muotoa.</span><span class="sxs-lookup"><span data-stu-id="8aac5-116">Like other filters, the company filter is persisted as a last-used value for queries when you run an ER format.</span></span> <span data-ttu-id="8aac5-117">Suodatinta ei automaattisesti muuteta, jos muutat tietolähteen yritystenvälistä arvoa.</span><span class="sxs-lookup"><span data-stu-id="8aac5-117">The filter isn't automatically changed if you change the cross-company value for a data source.</span></span> <span data-ttu-id="8aac5-118">Voit käyttää eri yritystenvälistä arvoa toiseen tietolähteeseen poistamalla vastaavan käyttäjäkohtaisen valinnan.</span><span class="sxs-lookup"><span data-stu-id="8aac5-118">To use a different cross-company value for another data source, delete the corresponding user-specific selection.</span></span>

<span data-ttu-id="8aac5-119">Jokaiselle tietolähteelle, joka on merkitty yritystenväliseksi, voit valita haluamasi tietueet käyttämällä ER-lausekkeiden **FILTER**- ja **WHERE**-toimintoja.</span><span class="sxs-lookup"><span data-stu-id="8aac5-119">For every data source that is marked as cross-company, you can select the records that you want by using the **FILTER** and **WHERE** functions in ER expressions.</span></span> <span data-ttu-id="8aac5-120">**dataAreaID**-kenttää voidaan käyttää myös yrityksen tunnuksena.</span><span class="sxs-lookup"><span data-stu-id="8aac5-120">The **dataAreaID** field can also be used as a company identifier.</span></span> <span data-ttu-id="8aac5-121">Tällä hetkellä **dataAreaID**-kenttä koskee vain seuraavia ehtotyyppejä, joissa käytetään **FILTER**-toimintoa:</span><span class="sxs-lookup"><span data-stu-id="8aac5-121">Currently, the **dataAreaID** field is limited to the following types of conditions when the **FILTER** function is used:</span></span>

- <span data-ttu-id="8aac5-122">Vain ehtoja, joissa on yksi **dataAreaID**-kenttävertailu, tuetaan.</span><span class="sxs-lookup"><span data-stu-id="8aac5-122">Only conditions that have a single **dataAreaID** field comparison are supported.</span></span>
- <span data-ttu-id="8aac5-123">Sallitaan vain vertailut, joissa on lausekkeita, jotka eivät ole riippuvuussuhteessa tietueluettelon kohteisiin.</span><span class="sxs-lookup"><span data-stu-id="8aac5-123">Only comparisons that have expressions that don't depend on records list items are allowed.</span></span>

<span data-ttu-id="8aac5-124">Siksi seuraava lauseke on kelvollinen.</span><span class="sxs-lookup"><span data-stu-id="8aac5-124">Therefore, the following expression is valid.</span></span>

```ER Expression
FILTER (MyTable, MyTable.dataAreaID = $StringUserInputParameter)
While shown below expressions will not pass the validation:
FILTER (MyTable, MyTable.dataAreaID = MyTable2RecordsList.MyField)
FILTER (MyTable, 
    OR(
        MyTable.dataAreaID = $StringUserInputParameter1,
        MyTable.dataAreaID = $StringUserInputParameter2
    )
)
```

<span data-ttu-id="8aac5-125">Oletusarvon mukaan vaikutusalue sisältää nykyisen sovelluksen kaikki yritykset.</span><span class="sxs-lookup"><span data-stu-id="8aac5-125">By default, the scope includes all companies of the current application.</span></span> <span data-ttu-id="8aac5-126">Tätä voidaan kuitenkin rajoittaa.</span><span class="sxs-lookup"><span data-stu-id="8aac5-126">However, it can be restricted.</span></span> <span data-ttu-id="8aac5-127">Määritä tietty organisaatiohierarkia muotoon rajoittaaksesi yritystenvälisten tietojen käyttöoikeuksia yhdelle ER-muodolle.</span><span class="sxs-lookup"><span data-stu-id="8aac5-127">To restrict the scope of cross-company data access for a single ER format, assign a specific organization hierarchy to the format.</span></span> <span data-ttu-id="8aac5-128">Kun hierarkia määritetään ER-muodolle, vain yritysten määritetyssä hierarkiassa esiintyvät tietueet palautetaan, vaikka muoto kutsuu yritystenvälisiä tietolähteitä.</span><span class="sxs-lookup"><span data-stu-id="8aac5-128">When a hierarchy is defined for an ER format, only records for legal entities that are presented in the assigned hierarchy are returned, even though the format calls cross-company data sources.</span></span> <span data-ttu-id="8aac5-129">Kun ER-muodolle määritetään hierarkiaviite, jota ei enää ole, käytetään oletusarvoista vaikutusaluetta ja muoto kutsuu yritystenvälisiä tietolähteitä.</span><span class="sxs-lookup"><span data-stu-id="8aac5-129">When a reference to a hierarchy that no longer exists is defined for an ER format, the default scope is applied, and the format calls cross-company data sources.</span></span> <span data-ttu-id="8aac5-130">Tässä tilanteessa sovelluksen kaikien yritysten tietueet palautetaan.</span><span class="sxs-lookup"><span data-stu-id="8aac5-130">In this situation, records for all application companies are returned.</span></span>

<span data-ttu-id="8aac5-131">Huomaa, että kun **Käytä luonnosta** -vaihtoehto on valittuna määritetylle yksittäiselle ER-muodon organisaatiohierarkialle, käytetään yrityksiä tämän hierarkian luonnosversiosta, jotta voidaan tunnistaa yritystenvälisten tietolähteiden vaikutusalue.</span><span class="sxs-lookup"><span data-stu-id="8aac5-131">Note that when the **Use draft** option is turned on for the assigned to a single ER format organization hierarchy, the legal entities from the draft version of this hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="8aac5-132">Jos luonnosversiota ei ole, tähän käytetään tämän organisaatiohierarkian viimeksi julkaistun version yrityksiä.</span><span class="sxs-lookup"><span data-stu-id="8aac5-132">If the draft version does not exist, the legal entities from the last published version of this organization hierarchy will be used for this.</span></span>

<span data-ttu-id="8aac5-133">Huomaa, että kun **Käytä luonnosta** -vaihtoehto ei ole valittuna määritetylle yksittäiselle ER-muodon organisaatiohierarkialle, käytetään yrityksiä tämän organisaatiohierarkian viimeksi julkaistusta versiosta, jotta voidaan tunnistaa yritystenvälisten tietolähteiden vaikutusalue.</span><span class="sxs-lookup"><span data-stu-id="8aac5-133">Note that when the **Use draft** option is turned off for the assigned to a single ER format organization hierarchy, the legal entities from the last published version of this organization hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="8aac5-134">Organisaatiohierarkioiden voimassaolopäivämääriä ei tueta vielä ER-kehyksessä.</span><span class="sxs-lookup"><span data-stu-id="8aac5-134">Date effectiveness of organization hierarchies is not supported yet in the ER framework.</span></span>

<span data-ttu-id="8aac5-135">Hierarkia voidaan määrittää muodolle tietyllä sivulla, jota voidaan käyttää ER-työtilasta, tai käyttämällä valikkokohdetta **Organisaation hallinto \> Sähköinen raportointi \> Muotojen yrityssuodatin**.</span><span class="sxs-lookup"><span data-stu-id="8aac5-135">The hierarchy can be assigned to a format in a specific page that can be accessed from the ER workspace or by using the **Organization administration \> Electronic reporting \> Legal entity filter for formats** menu item.</span></span> <span data-ttu-id="8aac5-136">Sivun käyttö edellyttää, että käyttäjälle on myönnetty **Ylläpidä muotojen yrityssuodattimia** -oikeus (ERMaintainFormatMappingLegalEntityFilters).</span><span class="sxs-lookup"><span data-stu-id="8aac5-136">To access the page, the **Maintain legal entity filters for format** privilege (ERMaintainFormatMappingLegalEntityFilters) must be granted to a user.</span></span> <span data-ttu-id="8aac5-137">Muodon hierarkiaan perustuvien yritysten vaikutusalueen rajoitusta käytetään sen rajoituksen lisäksi, että käyttäjä voi määrittää manuaalisesti järjestelmän kyselyvalintaikkunassa.</span><span class="sxs-lookup"><span data-stu-id="8aac5-137">The scope restriction of hierarchy-based legal entities for the format is applied in addition to the restriction that the user can manually specify in the system query dialog box.</span></span> <span data-ttu-id="8aac5-138">Muotoa suoritettaessa käytetään näiden rajoitusten leikkausta.</span><span class="sxs-lookup"><span data-stu-id="8aac5-138">The intersection of these restrictions is used when the format is run.</span></span>

<span data-ttu-id="8aac5-139">Lisätietoja tästä toiminnosta saat toistamalla tehtäväoppaan **ER – Yrityksestä riippuvaisten taulukoiden tietueiden käyttö yritystenvälisessä tilassa**, joka on osa 7.5.4.3 Hanki/Kehitä IT-palvelu/ratkaisukomponentit (10677) -liiketoimintaprosessia, jonka voi ladata [Microsoft Download Centeristä](https://go.microsoft.com/fwlink/?linkid=874684).</span><span class="sxs-lookup"><span data-stu-id="8aac5-139">To learn more about this feature, play the task guide, **ER Access records of company dependent tables in cross-company mode**, which is part of the 7.5.4.3 Acquire/Develop IT service/solution components (10677) business process, and can be downloaded from the [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684).</span></span> <span data-ttu-id="8aac5-140">Tässä tehtäväoppaassa viedään läpi prosessin, jossa määritetään ER-mallimääritys ja ER-muoto, jotta voidaan käyttää sovelluksen tauluja yritystenvälisessä tilassa.</span><span class="sxs-lookup"><span data-stu-id="8aac5-140">This task guide walks you through the process of configuring an ER model mapping and ER format to access application tables in cross-company mode.</span></span>

<span data-ttu-id="8aac5-141">Lataa seuraavat tiedostot suorittaaksesi tehtäväoppaan:</span><span class="sxs-lookup"><span data-stu-id="8aac5-141">Download the following files to complete the task guide:</span></span>

- [<span data-ttu-id="8aac5-142">ER-mallin määritys - CrossCompanyDataAccessModel.xml</span><span class="sxs-lookup"><span data-stu-id="8aac5-142">ER model configuration - CrossCompanyDataAccessModel.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)
- [<span data-ttu-id="8aac5-143">ER-muodon määritys - CrossCompanyDataAccessFormat.xml</span><span class="sxs-lookup"><span data-stu-id="8aac5-143">ER format configuration - CrossCompanyDataAccessFormat.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]