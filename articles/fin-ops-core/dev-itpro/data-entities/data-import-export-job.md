---
title: Tietojen tuonti- ja vientityöt – yleiskatsaus
description: Tietojenhallinnan työtilan avulla voit luoda ja hallita tietojen tuonti- ja vientitehtäviä.
author: Sunil-Garg
ms.date: 11/02/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application user
ms.reviewer: sericks
ms.search.region: Global
ms.author: sunilg
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 1cb38c812aed60bddadce25f66ec77f4e428be71
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 03/31/2021
ms.locfileid: "5750997"
---
# <a name="data-import-and-export-jobs-overview"></a><span data-ttu-id="73a01-103">Tietojen tuonti- ja vientityöt – yleiskatsaus</span><span class="sxs-lookup"><span data-stu-id="73a01-103">Data import and export jobs overview</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="73a01-104">Voit luoda ja hallita tietojen tuonti- ja vientitehtäviä **Tietojen hallinta** -työtilassa.</span><span class="sxs-lookup"><span data-stu-id="73a01-104">To create and manage data import and export jobs, you use the **Data management** workspace.</span></span> <span data-ttu-id="73a01-105">Oletusarvon mukaan tietojen tuonti- ja vientiprosessi luo väliaikaisen taulun kullekin yksikölle kohdetietokantaan.</span><span class="sxs-lookup"><span data-stu-id="73a01-105">By default, the data import and export process creates a staging table for each entity in the target database.</span></span> <span data-ttu-id="73a01-106">Väliaikaisten taulujen avulla voit tarkistaa, puhdistaa tai muuntaa tiedot ennen niiden siirtämistä.</span><span class="sxs-lookup"><span data-stu-id="73a01-106">Staging tables let you verify, clean up, or convert data before you move it.</span></span>

> [!NOTE]
> <span data-ttu-id="73a01-107">Tässä ohjeaiheessa oletetaan, että tunnet [tietoyksiköt](data-entities.md).</span><span class="sxs-lookup"><span data-stu-id="73a01-107">This topic assumes that you are familiar with [data entities](data-entities.md).</span></span>

## <a name="data-importexport-process"></a><span data-ttu-id="73a01-108">Tietojen tuonti- ja vientiprosessi</span><span class="sxs-lookup"><span data-stu-id="73a01-108">Data import/export process</span></span>
<span data-ttu-id="73a01-109">Nämä ovat ohjeet tietojen tuontiin tai viemiseen.</span><span class="sxs-lookup"><span data-stu-id="73a01-109">Here are the steps to import or export data.</span></span>

1. <span data-ttu-id="73a01-110">Luo tuonti- tai vientityö, jossa suoritetaan seuraavat tehtävät:</span><span class="sxs-lookup"><span data-stu-id="73a01-110">Create an import or export job where you complete the following tasks:</span></span>

    - <span data-ttu-id="73a01-111">Määritä projektin luokka.</span><span class="sxs-lookup"><span data-stu-id="73a01-111">Define the project category.</span></span>
    - <span data-ttu-id="73a01-112">Tunnista tuotavat tai vietävät yksiköt.</span><span class="sxs-lookup"><span data-stu-id="73a01-112">Identify the entities to import or export.</span></span>
    - <span data-ttu-id="73a01-113">Määritä työn tietojen muoto.</span><span class="sxs-lookup"><span data-stu-id="73a01-113">Set the data format for the job.</span></span>
    - <span data-ttu-id="73a01-114">Aseta yksiköt mielekkääseen järjestykseen niin, että ne käsitellään loogisissa ryhmissä.</span><span class="sxs-lookup"><span data-stu-id="73a01-114">Sequence the entities, so that they are processed in logical groups and in an order that makes sense.</span></span>
    - <span data-ttu-id="73a01-115">Määritä, käytetäänkö väliaikaisia tauluja.</span><span class="sxs-lookup"><span data-stu-id="73a01-115">Determine whether to use staging tables.</span></span>

2. <span data-ttu-id="73a01-116">Vahvista, että lähde- ja kohdetiedot liitetään oikein.</span><span class="sxs-lookup"><span data-stu-id="73a01-116">Validate that the source data and target data are mapped correctly.</span></span>
3. <span data-ttu-id="73a01-117">Tarkista tuonti- tai vientityön turvallisuus.</span><span class="sxs-lookup"><span data-stu-id="73a01-117">Verify the security for your import or export job.</span></span>
4. <span data-ttu-id="73a01-118">Suorita tuonti- tai vientityö.</span><span class="sxs-lookup"><span data-stu-id="73a01-118">Run the import or export job.</span></span>
5. <span data-ttu-id="73a01-119">Vahvista, että työ suoritettiin odotetulla tavalla tarkastamalla työhistoria.</span><span class="sxs-lookup"><span data-stu-id="73a01-119">Validate that the job ran as expected by reviewing the job history.</span></span>
6. <span data-ttu-id="73a01-120">Tyhjennä väliaikaiset taulut.</span><span class="sxs-lookup"><span data-stu-id="73a01-120">Clean up the staging tables.</span></span>

<span data-ttu-id="73a01-121">Loput tämän ohjeaiheen osat sisältävät tarkempia tietoja kustakin prosessin vaiheesta.</span><span class="sxs-lookup"><span data-stu-id="73a01-121">The remaining sections of this topic provide more details about each step of the process.</span></span>

> [!NOTE]
> <span data-ttu-id="73a01-122">Saat uusimmat edistymistiedot näkyviin päivittämällä tietojen tuonti- ja vientilomakkeen päivityskuvakkeella.</span><span class="sxs-lookup"><span data-stu-id="73a01-122">In order to refresh the Data import/export form to see the latest progress, use the form refresh icon.</span></span> <span data-ttu-id="73a01-123">Selaintason päivitystä ei suositella, koska se keskeyttää mahdolliset erien ulkopuoliset tuonti- ja vientityöt.</span><span class="sxs-lookup"><span data-stu-id="73a01-123">Browser level refresh is not recommended because it will interrupt any import/export jobs that are not run in batch.</span></span>

## <a name="create-an-import-or-export-job"></a><span data-ttu-id="73a01-124">Luo tuonti- tai vientityö</span><span class="sxs-lookup"><span data-stu-id="73a01-124">Create an import or export job</span></span>
<span data-ttu-id="73a01-125">Tietojen tuonti- tai vientityön voi suorittaa useita kertoja.</span><span class="sxs-lookup"><span data-stu-id="73a01-125">A data import or export job can be run one time or many times.</span></span>

### <a name="define-the-project-category"></a><span data-ttu-id="73a01-126">Määritä projektin luokka</span><span class="sxs-lookup"><span data-stu-id="73a01-126">Define the project category</span></span>
<span data-ttu-id="73a01-127">Suosittelemme, että valitset tuonti- tai vientityölle haluamasi projektiluokan huolella.</span><span class="sxs-lookup"><span data-stu-id="73a01-127">We recommend that you take the time to select an appropriate project category for your import or export job.</span></span> <span data-ttu-id="73a01-128">Voit hallita liittyviä töitä projektiluokkien avulla.</span><span class="sxs-lookup"><span data-stu-id="73a01-128">Project categories can help you manage related jobs.</span></span>

### <a name="identify-the-entities-to-import-or-export"></a><span data-ttu-id="73a01-129">Tunnista tuotavat tai vietävät yksiköt</span><span class="sxs-lookup"><span data-stu-id="73a01-129">Identify the entities to import or export</span></span>
<span data-ttu-id="73a01-130">Voit lisätä tiettyjä yksiköitä tuonti- tai vientityöhön tai käyttää mallia.</span><span class="sxs-lookup"><span data-stu-id="73a01-130">You can add specific entities to an import or export job or select a template to apply.</span></span> <span data-ttu-id="73a01-131">Mallit täyttävät työn yksikköluettelolla.</span><span class="sxs-lookup"><span data-stu-id="73a01-131">Templates fill a job with a list of entities.</span></span> <span data-ttu-id="73a01-132">**Käytä mallia** -vaihtoehtoa voi käyttää, kun työlle on annettu nimi ja se on tallennettu.</span><span class="sxs-lookup"><span data-stu-id="73a01-132">The **Apply template** option is available after you give the job a name and save the job.</span></span>

### <a name="set-the-data-format-for-the-job"></a><span data-ttu-id="73a01-133">Määritä työn tietojen muoto</span><span class="sxs-lookup"><span data-stu-id="73a01-133">Set the data format for the job</span></span>
<span data-ttu-id="73a01-134">Valitse yksikölle tuonnin tai viennin tietomuoto sitä valitessasi.</span><span class="sxs-lookup"><span data-stu-id="73a01-134">When you select an entity, you must select the format of the data that will be exported or imported.</span></span> <span data-ttu-id="73a01-135">Muodot määritetään **Lähdeasetukset**-ruudussa.</span><span class="sxs-lookup"><span data-stu-id="73a01-135">You define formats by using the **Data sources setup** tile.</span></span> <span data-ttu-id="73a01-136">Lähdetietojen muodossa yhdistyy **Tyyppi**, **Tiedostomuoto**, **Rivin erotin** ja **Sarakkeen erotin**.</span><span class="sxs-lookup"><span data-stu-id="73a01-136">A source data format is a combination of **Type**, **File format**, **Row delimiter** and **Column delimiter**.</span></span> <span data-ttu-id="73a01-137">Vaikka määritteitä on muitenkin, näiden ymmärtäminen on olennaista.</span><span class="sxs-lookup"><span data-stu-id="73a01-137">There are also other attributes, but these are the key ones to understand.</span></span> <span data-ttu-id="73a01-138">Seuraava taulukko sisältää kelvolliset yhdistelmät.</span><span class="sxs-lookup"><span data-stu-id="73a01-138">The following table lists the valid combinations.</span></span>

| <span data-ttu-id="73a01-139">Tiedostomuoto</span><span class="sxs-lookup"><span data-stu-id="73a01-139">File Format</span></span>            | <span data-ttu-id="73a01-140">Rivin tai sarakkeen erotin</span><span class="sxs-lookup"><span data-stu-id="73a01-140">Row/Column delimiter</span></span>                       | <span data-ttu-id="73a01-141">XML-tyyli</span><span class="sxs-lookup"><span data-stu-id="73a01-141">XML Style</span></span>                 |
|------------------------|--------------------------------------------|---------------------------|
| <span data-ttu-id="73a01-142">Excel</span><span class="sxs-lookup"><span data-stu-id="73a01-142">Excel</span></span>                  | <span data-ttu-id="73a01-143">Excel</span><span class="sxs-lookup"><span data-stu-id="73a01-143">Excel</span></span>                                      | <span data-ttu-id="73a01-144">\-–</span><span class="sxs-lookup"><span data-stu-id="73a01-144">\-NA-</span></span>                     |
| <span data-ttu-id="73a01-145">XML</span><span class="sxs-lookup"><span data-stu-id="73a01-145">XML</span></span>                    | <span data-ttu-id="73a01-146">\-–</span><span class="sxs-lookup"><span data-stu-id="73a01-146">\-NA-</span></span>                                      | <span data-ttu-id="73a01-147">XML-elementin XML-määrite</span><span class="sxs-lookup"><span data-stu-id="73a01-147">XML-Element XML-Attribute</span></span> |
| <span data-ttu-id="73a01-148">Erotin, kiinteä leveys</span><span class="sxs-lookup"><span data-stu-id="73a01-148">Delimited, fixed width</span></span> | <span data-ttu-id="73a01-149">Pilkku, puolipiste, sarkain, pystyviiva, kaksoispiste</span><span class="sxs-lookup"><span data-stu-id="73a01-149">Comma, semicolon, tab, vertical bar, colon</span></span> | <span data-ttu-id="73a01-150">\-–</span><span class="sxs-lookup"><span data-stu-id="73a01-150">\-NA-</span></span>                     |

### <a name="sequence-the-entities"></a><span data-ttu-id="73a01-151">Aseta yksiköt sarjaan</span><span class="sxs-lookup"><span data-stu-id="73a01-151">Sequence the entities</span></span>
<span data-ttu-id="73a01-152">Yksiköt voi järjestää tietomallissa tai tuonti- ja vientitöissä.</span><span class="sxs-lookup"><span data-stu-id="73a01-152">Entities can be sequenced in a data template, or in import and export jobs.</span></span> <span data-ttu-id="73a01-153">Kun suoritat työn, joka sisältää useamman tietoyksikön, varmista, että yksiköt on järjestetty oikein.</span><span class="sxs-lookup"><span data-stu-id="73a01-153">When you run a job that contains more than one data entity, you must make sure that the data entities are correctly sequenced.</span></span> <span data-ttu-id="73a01-154">Yksiköt järjestetään ensisijaisesti siten, että voit käsitellä kaikki yksiköiden väliset toiminnalliset riippuvuudet.</span><span class="sxs-lookup"><span data-stu-id="73a01-154">You sequence entities primarily so that you can address any functional dependencies among entities.</span></span> <span data-ttu-id="73a01-155">Jos yksiköillä ei ole toiminnallisia riippuvuuksia, ne voidaan ajoittaa tuotavaksi tai vietäväksi rinnakkain.</span><span class="sxs-lookup"><span data-stu-id="73a01-155">If entities don’t have any functional dependencies, they can be scheduled for parallel import or export.</span></span>

#### <a name="execution-units-levels-and-sequences"></a><span data-ttu-id="73a01-156">Suoritusyksiköt, -tasot ja -sarjat</span><span class="sxs-lookup"><span data-stu-id="73a01-156">Execution units, levels, and sequences</span></span>
<span data-ttu-id="73a01-157">Yksiköiden tuonti- tai vientijärjestystä valvovat ensin suoritusyksikön arvot, sitten suoritusyksikön taso ja lopulta sarja.</span><span class="sxs-lookup"><span data-stu-id="73a01-157">The execution unit, level in the execution unit, and sequence of an entity help control the order that the data is exported or imported in.</span></span>

- <span data-ttu-id="73a01-158">Eri suoritusyksiköissä olevat yksiköt käsitellään rinnakkain.</span><span class="sxs-lookup"><span data-stu-id="73a01-158">Entities in different execution units are processed in parallel.</span></span>
- <span data-ttu-id="73a01-159">Saman suoritusyksikön yksiköt käsitellään rinnakkain, jos ne ovat samalla tasolla.</span><span class="sxs-lookup"><span data-stu-id="73a01-159">In each execution unit, entities are processed in parallel if they have the same level.</span></span>
- <span data-ttu-id="73a01-160">Kunkin tason yksiköt käsitellään tason mukaisen järjestysnumeron perusteella.</span><span class="sxs-lookup"><span data-stu-id="73a01-160">In each level, entities are processed according to their sequence number in that level.</span></span>
- <span data-ttu-id="73a01-161">Kun yksi taso on käsitelty, käsitellään seuraava taso.</span><span class="sxs-lookup"><span data-stu-id="73a01-161">After one level has been processed, the next level is processed.</span></span>

#### <a name="resequencing"></a><span data-ttu-id="73a01-162">Uudelleenjärjestys</span><span class="sxs-lookup"><span data-stu-id="73a01-162">Resequencing</span></span>
<span data-ttu-id="73a01-163">Voit halutessasi järjestellä yksiköt uudelleen seuraavissa tilanteissa:</span><span class="sxs-lookup"><span data-stu-id="73a01-163">You might want to resequence your entities in the following situations:</span></span>

- <span data-ttu-id="73a01-164">Jos kaikkiin muutoksiin käytetään yksittäistä tietotyötä, voit käyttää uudelleenjärjestysvaihtoehtoja ja optimoida siten koko työn suoritusajan.</span><span class="sxs-lookup"><span data-stu-id="73a01-164">If only one data job is used for all your changes, you can use resequencing options to optimize the execution time for the full job.</span></span> <span data-ttu-id="73a01-165">Tällöin voit käyttää suoritusyksikköä moduulin edustajana, tasoa moduulin toimintoalueen edustajana ja sarjaa yksikön edustajana.</span><span class="sxs-lookup"><span data-stu-id="73a01-165">In these cases, you can use the execution unit to represent the module, the level to represent the feature area in the module, and the sequence to represent the entity.</span></span> <span data-ttu-id="73a01-166">Käyttämällä tätä menetelmää voit käyttää kaikkia moduuleja samanaikaisesti, mutta voit silti käyttää moduulin järjestystä.</span><span class="sxs-lookup"><span data-stu-id="73a01-166">By using this approach, you can work across modules in parallel, but you can still work in sequence in a module.</span></span> <span data-ttu-id="73a01-167">Jos haluat varmistaa, että rinnakkaiset vaiheet onnistuvat, kaikki riippuvuudet on otettava huomioon.</span><span class="sxs-lookup"><span data-stu-id="73a01-167">To help guarantee that parallel operations succeed, you must consider all dependencies.</span></span>
- <span data-ttu-id="73a01-168">Jos käytössä on useita tietotöitä (esimerkiksi yksi työ kullekin moduulille), voit optimoida työtä muuttamalla järjestelytoiminnolla yksiköiden tasoa ja järjestystä.</span><span class="sxs-lookup"><span data-stu-id="73a01-168">If multiple data jobs are used (for example, one job for each module), you can use sequencing to affect the level and sequence of entities for optimal execution.</span></span>
- <span data-ttu-id="73a01-169">Jos riippuvuussuhteita ei ole, voidaan yksiköt järjestellä optimaalisesti eri suoritusyksiköihin.</span><span class="sxs-lookup"><span data-stu-id="73a01-169">If there are no dependencies at all, you can sequence entities at different execution units for maximum optimization.</span></span>

<span data-ttu-id="73a01-170">**Uudelleenjärjestely**-valikko on käytettävissä, kun useita yksiköitä on valittuna.</span><span class="sxs-lookup"><span data-stu-id="73a01-170">The **Resequencing** menu is available when multiple entities are selected.</span></span> <span data-ttu-id="73a01-171">Voit järjestellä yksiköitä uudelleen suoritusyksikön, -tason tai -sarjan perusteella.</span><span class="sxs-lookup"><span data-stu-id="73a01-171">You can resequence based on execution unit, level, or sequence options.</span></span> <span data-ttu-id="73a01-172">Voit määrittää lisäyksen valittujen yksiköiden uudelleenjärjestelylle.</span><span class="sxs-lookup"><span data-stu-id="73a01-172">You can set an increment to resequence the entities that have been selected.</span></span> <span data-ttu-id="73a01-173">Kunkin yksikön valittu yksikkö-, taso- ja/tai järjestysnumero päivitetään lisäyksen mukaisesti.</span><span class="sxs-lookup"><span data-stu-id="73a01-173">The unit, level, and/or sequence number that is selected for each entity is updated by the specified increment.</span></span>

#### <a name="sorting"></a><span data-ttu-id="73a01-174">Lajittelu</span><span class="sxs-lookup"><span data-stu-id="73a01-174">Sorting</span></span>
<span data-ttu-id="73a01-175">Voit käyttää **Lajitteluperuste**-vaihtoehtoa, jos haluat tarkastella yksikköluetteloa järjestyksessä.</span><span class="sxs-lookup"><span data-stu-id="73a01-175">Use can use the **Sort by** option to view the entity list in sequential order.</span></span>

### <a name="truncating"></a><span data-ttu-id="73a01-176">Katkaiseminen</span><span class="sxs-lookup"><span data-stu-id="73a01-176">Truncating</span></span>
<span data-ttu-id="73a01-177">Tuontiprojekteissa voit katkaista entiteettien tietueet ennen tuontia.</span><span class="sxs-lookup"><span data-stu-id="73a01-177">For import projects, you can choose to truncate records in the entities prior to import.</span></span> <span data-ttu-id="73a01-178">Tästä on hyötyä, jos tietueet on tuotava tyhjiin tauluihin.</span><span class="sxs-lookup"><span data-stu-id="73a01-178">This is useful if your records must be imported into a clean set of tables.</span></span> <span data-ttu-id="73a01-179">Oletusarvon mukaan tämä asetus ei ole käytössä.</span><span class="sxs-lookup"><span data-stu-id="73a01-179">This setting is off by default.</span></span>

## <a name="validate-that-the-source-data-and-target-data-are-mapped-correctly"></a><span data-ttu-id="73a01-180">Vahvista, että lähde- ja kohdetiedot liitetään oikein</span><span class="sxs-lookup"><span data-stu-id="73a01-180">Validate that the source data and target data are mapped correctly</span></span>
<span data-ttu-id="73a01-181">Määritys on toiminto, jota käytetään sekä tuonti-, että vientitöissä.</span><span class="sxs-lookup"><span data-stu-id="73a01-181">Mapping is a function that applies to both import and export jobs.</span></span>

- <span data-ttu-id="73a01-182">Tuontityössä määrityksellä kuvataan, mistä lähdetiedoston sarakkeista tehdään sarakkeita väliaikaisessa taulukossa.</span><span class="sxs-lookup"><span data-stu-id="73a01-182">In the context of an import job, mapping describes which columns in the source file become the columns in the staging table.</span></span> <span data-ttu-id="73a01-183">Järjestelmä voi siten määrittää, mitkä lähdetiedoston sarakkeet tulee kopioida mihinkin väliaikaisen taulukon sarakkeisiin.</span><span class="sxs-lookup"><span data-stu-id="73a01-183">Therefore, the system can determine which column data in the source file must be copied into which column of the staging table.</span></span>
- <span data-ttu-id="73a01-184">Vientityössä määrityksellä kuvataan, mistä väliaikaisen taulukon (eli lähteen) sarakkeista tehdään sarakkeita kohdetiedostossa.</span><span class="sxs-lookup"><span data-stu-id="73a01-184">In the context of an export job, mapping describes which columns of the staging table (that is, the source) become the columns in the target file.</span></span>

<span data-ttu-id="73a01-185">Jos väliaikaisen taulukon ja kohdetiedoston sarakenimet vastaavat, järjestelmä luo määrityksen automaattisesti nimien perusteella.</span><span class="sxs-lookup"><span data-stu-id="73a01-185">If the column names in the staging table and the file match, the system automatically establishes the mapping, based on the names.</span></span> <span data-ttu-id="73a01-186">Jos nimet eivät vastaa, sarakkeita ei määritetä automaattisesti.</span><span class="sxs-lookup"><span data-stu-id="73a01-186">However, if the names differ, columns aren’t mapped automatically.</span></span> <span data-ttu-id="73a01-187">Tällöin sinun on tehtävä määritys valitsemalla **Näytä yhdistämismääritykset** -vaihtoehto tietotyön yksikössä.</span><span class="sxs-lookup"><span data-stu-id="73a01-187">In these cases, you must complete the mapping by selecting the **View map** option on the entity in the data job.</span></span>

<span data-ttu-id="73a01-188">Järjestelmässä on kaksi määritysnäkymää: **Yhdistämismääritysten visualisointi**, joka on oletusnäkymä, ja **Yhdistämistiedot**.</span><span class="sxs-lookup"><span data-stu-id="73a01-188">There are two mapping views: **Mapping visualization**, which is the default view, and **Mapping details**.</span></span> <span data-ttu-id="73a01-189">Punainen tähti (\*) osoittaa kohteen kaikki pakolliset kentät.</span><span class="sxs-lookup"><span data-stu-id="73a01-189">A red asterisk (\*) identifies any required fields in the entity.</span></span> <span data-ttu-id="73a01-190">Nämä kentät on yhdistettävä, ennen kuin voit käsitellä yksikköä.</span><span class="sxs-lookup"><span data-stu-id="73a01-190">These fields must be mapped before you can work with the entity.</span></span> <span data-ttu-id="73a01-191">Muiden kenttien yhdistämisen voi poistaa tarvittaessa, kun käsittelet yksikköä.</span><span class="sxs-lookup"><span data-stu-id="73a01-191">You can unmap other fields as you require when you work with the entity.</span></span> <span data-ttu-id="73a01-192">Voit poistaa kentän yhdistämisen valitsemalla sen joko **Yksikkö**- tai **Lähde**-sarakkeessa ja valitsemalla sitten **Poista valinta**.</span><span class="sxs-lookup"><span data-stu-id="73a01-192">To unmap a field, select the field in either the **Entity** column or the **Source** column, and then select **Delete selection**.</span></span> <span data-ttu-id="73a01-193">Tallenna muutokset **Tallenna**-painikkeella ja sulje sivun palataksesi projektiin.</span><span class="sxs-lookup"><span data-stu-id="73a01-193">Select **Save** to save your changes, and then close the page to return to the project.</span></span> <span data-ttu-id="73a01-194">Voit käyttää samaa prosessia muokataksesi kenttien yhdistämismäärityksiä lähteen ja väliaikaisen taulukon välillä tuonnin jälkeen.</span><span class="sxs-lookup"><span data-stu-id="73a01-194">You can use the same process to edit the field mapping from source to staging after you import.</span></span>

<span data-ttu-id="73a01-195">Voit luoda yhdistämismäärityksen sivulla valitsemalla **Luo lähteen yhdistämismääritys**.</span><span class="sxs-lookup"><span data-stu-id="73a01-195">You can generate a mapping on the page by selecting **Generate source mapping**.</span></span> <span data-ttu-id="73a01-196">Luotu määritys toimii kuin automaattinen määritys.</span><span class="sxs-lookup"><span data-stu-id="73a01-196">A generated mapping behaves like an automatic mapping.</span></span> <span data-ttu-id="73a01-197">Tämän vuoksi yhdistämättömät kentät on yhdistettävä manuaalisesti.</span><span class="sxs-lookup"><span data-stu-id="73a01-197">Therefore, you must manually map any unmapped fields.</span></span>

![Tietotyypin yhdistämismääritys](./media/dixf-map.png)

## <a name="verify-the-security-for-your-import-or-export-job"></a><span data-ttu-id="73a01-199">Tarkista tuonti- tai vientityön turvallisuus</span><span class="sxs-lookup"><span data-stu-id="73a01-199">Verify the security for your import or export job</span></span>
<span data-ttu-id="73a01-200">Voit rajoittaa **Tietojenhallinta**-työtilan käyttöoikeutta, jotta muut kuin järjestelmänvalvojat voivat käyttää vain tiettyjä töitä.</span><span class="sxs-lookup"><span data-stu-id="73a01-200">Access to the **Data management** workspace can be restricted, so that non-administrator users can access only specific data jobs.</span></span> <span data-ttu-id="73a01-201">Käyttöoikeus tietotyöhön tarkoittaa täyttä käyttöoikeutta kyseisen työn suoritushistoriaan sekä väliaikaisiin tauluihin.</span><span class="sxs-lookup"><span data-stu-id="73a01-201">Access to a data job implies full access to the execution history of that job and access to the staging tables.</span></span> <span data-ttu-id="73a01-202">Sinun on siis varmistettava, että käyttöoikeudet on asetettu asianmukaisesti, kun luot tietotyön.</span><span class="sxs-lookup"><span data-stu-id="73a01-202">Therefore, you must make sure that appropriate access controls are in place when you create a data job.</span></span>

### <a name="secure-a-job-by-roles-and-users"></a><span data-ttu-id="73a01-203">Työn suojaaminen roolien ja käyttäjien perusteella</span><span class="sxs-lookup"><span data-stu-id="73a01-203">Secure a job by roles and users</span></span>
<span data-ttu-id="73a01-204">**Soveltuvat roolit** -valikkoa voidaan käyttää työn rajoittamiseen tietyille käyttöoikeusrooleille.</span><span class="sxs-lookup"><span data-stu-id="73a01-204">Use the **Applicable roles** menu to restrict the job to one or more security roles.</span></span> <span data-ttu-id="73a01-205">Vain kyseisiin rooleihin kuuluvat käyttäjät voivat käyttää työtä.</span><span class="sxs-lookup"><span data-stu-id="73a01-205">Only users in those roles will have access to the job.</span></span>

<span data-ttu-id="73a01-206">Voit myös rajoittaa työn tietyille käyttäjille.</span><span class="sxs-lookup"><span data-stu-id="73a01-206">You can also restrict a job to specific users.</span></span> <span data-ttu-id="73a01-207">Kun suojaat työn käyttäjien perusteella roolien sijaan, voit hallita käyttöoikeuksia tarkemmin, jos roolilla on useita käyttäjiä.</span><span class="sxs-lookup"><span data-stu-id="73a01-207">When you secure a job by users instead of roles, there is more control if multiple users are assigned to a role.</span></span>

### <a name="secure-a-job-by-legal-entity"></a><span data-ttu-id="73a01-208">Työn suojaaminen yrityksen perusteella</span><span class="sxs-lookup"><span data-stu-id="73a01-208">Secure a job by legal entity</span></span>
<span data-ttu-id="73a01-209">Tietotyöt ovat yleisiä.</span><span class="sxs-lookup"><span data-stu-id="73a01-209">Data jobs are global in nature.</span></span> <span data-ttu-id="73a01-210">Näin ollen, jos tietotyö on luotu ja käytössä yrityksessä, työ on näkyvissä kaikissa muissakin järjestelmän yrityksissä.</span><span class="sxs-lookup"><span data-stu-id="73a01-210">Therefore, if a data job was created and used in a legal entity, the job will be visible in other legal entities in the system.</span></span> <span data-ttu-id="73a01-211">Tämän oletustoiminta voi olla haluttua tietyissä sovelluksen skenaarioissa.</span><span class="sxs-lookup"><span data-stu-id="73a01-211">This default behavior might be preferred in some application scenarios.</span></span> <span data-ttu-id="73a01-212">Organisaatio voi esimerkiksi tuoda laskujen tietoja tietoyksiköiden ja tarjota keskitetyn laskujen käsittelyryhmä, joka vastaa organisaation kaikkien osastojen laskuvirheiden käsittelystä.</span><span class="sxs-lookup"><span data-stu-id="73a01-212">For example, an organization that imports invoices by using data entities might provide a centralized invoice processing team that is responsible for managing invoice errors for all divisions in the organization.</span></span> <span data-ttu-id="73a01-213">Tällöin on hyvä antaa kaikkien keskitetyn laskujen käsittelyryhmän jäsenten käyttää kaikkien yritysten laskujen tuontitöitä.</span><span class="sxs-lookup"><span data-stu-id="73a01-213">In this scenario, it’s useful for the centralized invoice processing team to have access to invoice import jobs from all legal entities.</span></span> <span data-ttu-id="73a01-214">Oletusasetus täyttää täten tarpeen yrityksen näkökulmasta.</span><span class="sxs-lookup"><span data-stu-id="73a01-214">Therefore, the default behavior meets the requirement from a legal entity perspective.</span></span>

<span data-ttu-id="73a01-215">Organisaatio voi kuitenkin haluta yrityskohtaiset laskujen käsittelyryhmät.</span><span class="sxs-lookup"><span data-stu-id="73a01-215">However, an organization might want to have invoice processing teams per legal entity.</span></span> <span data-ttu-id="73a01-216">Tässä tapauksessa yrityksen ryhmällä tulee olla käyttöoikeus ainoastaan oman yrityksensä laskujen tuontityöhön.</span><span class="sxs-lookup"><span data-stu-id="73a01-216">In this case, a team in a legal entity should have access only to the invoice import job in its own legal entity.</span></span> <span data-ttu-id="73a01-217">Nämä vaatimukset täytetään määrittämällä tietotöille yrityspohjaiset käyttöoikeudet työn sisäisestä **Soveltuvat yritykset** -valikosta.</span><span class="sxs-lookup"><span data-stu-id="73a01-217">To meet this requirement, you can configure legal entity–based access control on the data jobs by using the **Applicable legal entities** menu inside the data job.</span></span> <span data-ttu-id="73a01-218">Kun määritykset on tehty, käyttäjät näkevät vain työt, jotka ovat käytettävissä yrityksessä, johon he ovat kirjautuneena.</span><span class="sxs-lookup"><span data-stu-id="73a01-218">After the configuration is done, users can see only jobs that are available in the legal entity that they are currently signed in to.</span></span> <span data-ttu-id="73a01-219">Nähdäkseen toisen yrityksen työt, käyttäjien on vaihdettava kyseiseen yritykseen.</span><span class="sxs-lookup"><span data-stu-id="73a01-219">To see jobs from another legal entity, users must switch to that legal entity.</span></span>

<span data-ttu-id="73a01-220">Työ voidaan suojata samaan aikaan rooli-, käyttäjä- ja yritysperusteisesti.</span><span class="sxs-lookup"><span data-stu-id="73a01-220">A job can be secured by roles, users, and legal entity at the same time.</span></span>

## <a name="run-the-import-or-export-job"></a><span data-ttu-id="73a01-221">Suorita tuonti- tai vientityö</span><span class="sxs-lookup"><span data-stu-id="73a01-221">Run the import or export job</span></span>
<span data-ttu-id="73a01-222">Voit suorittaa työn kerran valitsemalla **Tuo**- tai **Vie**-painikkeen, kun olet määrittänyt työn.</span><span class="sxs-lookup"><span data-stu-id="73a01-222">You can run a job one time by selecting the **Import** or **Export** button after you define the job.</span></span> <span data-ttu-id="73a01-223">Voit määrittää toistuvan työn valitsemalla **Luo toistuva tietotyö**.</span><span class="sxs-lookup"><span data-stu-id="73a01-223">To set up a recurring job, select **Create recurring data job**.</span></span>

> [!NOTE]
> <span data-ttu-id="73a01-224">Tuonti- tai vientityö voidaan suorittaa valitsemalla **Tuo**- tai **Vie**-painike.</span><span class="sxs-lookup"><span data-stu-id="73a01-224">An import or an export job can be run by selecting the **Import** or **Export** button.</span></span> <span data-ttu-id="73a01-225">Tällöin erätyö ajoitetaan suoritettavaksi vain kerran.</span><span class="sxs-lookup"><span data-stu-id="73a01-225">This will schedule a batch job to run only once.</span></span> <span data-ttu-id="73a01-226">Työtä ei ehkä suoriteta heti, jos eräpalvelua on rajoitettu kuormituksesta johtuen.</span><span class="sxs-lookup"><span data-stu-id="73a01-226">The job may not execute immediately if batch service is throttling due to the load on the batch service.</span></span> <span data-ttu-id="73a01-227">Työt voidaan suorittaa myös synkronisesti valitsemalla **Tuo nyt** tai **Vie nyt**.</span><span class="sxs-lookup"><span data-stu-id="73a01-227">The jobs can also be run synchronously by selecting **Import now** or **Export now**.</span></span> <span data-ttu-id="73a01-228">Työ käynnistetään nyt automaattisesti, mikä on kätevää, jos erä ei käynnisty rajoittamisen vuoksi.</span><span class="sxs-lookup"><span data-stu-id="73a01-228">This starts the job immediately and is useful if the batch does not start due to throttling.</span></span> <span data-ttu-id="73a01-229">Työt voidaan myös ajoittaa suoritettaviksi myöhemmin.</span><span class="sxs-lookup"><span data-stu-id="73a01-229">The jobs can also be scheduled to execute at a later time.</span></span> <span data-ttu-id="73a01-230">Tämä voidaan tehdä valitsemalla **Suorita erätyönä-** -vaihtoehto.</span><span class="sxs-lookup"><span data-stu-id="73a01-230">This can be done by choosing the **Run in batch** option.</span></span> <span data-ttu-id="73a01-231">Rajoitus koskee eräresursseja, joten eräajo ei välttämättä käynnisty heti.</span><span class="sxs-lookup"><span data-stu-id="73a01-231">Batch resources are subject to throttling, so the batch job might not start immediately.</span></span> <span data-ttu-id="73a01-232">Erän käyttäminen on suositeltava vaihtoehto, sillä se auttaa myös suurien tietomäärien tuomisessa tai viennissä.</span><span class="sxs-lookup"><span data-stu-id="73a01-232">Using a batch is the recommended option because it will also help with large volumes of data that need to be imported or exported.</span></span> <span data-ttu-id="73a01-233">Eräajot voidaan aikatauluttaa suoritettavaksi tiettyinä eräryhminä, mikä parantaa kuormituksen hallintaa.</span><span class="sxs-lookup"><span data-stu-id="73a01-233">Batch jobs can be scheduled to run on a specific batch group, which allows more control from a load balancing perspective.</span></span>

## <a name="validate-that-the-job-ran-as-expected"></a><span data-ttu-id="73a01-234">Vahvista, että työ suoritettiin odotetulla tavalla</span><span class="sxs-lookup"><span data-stu-id="73a01-234">Validate that the job ran as expected</span></span>
<span data-ttu-id="73a01-235">Työhistoria on käytettävissä tuonti- ja vientitöiden ongelmanratkaisuun ja tutkintaan.</span><span class="sxs-lookup"><span data-stu-id="73a01-235">The job history is available for troubleshooting and investigation on both import and export jobs.</span></span> <span data-ttu-id="73a01-236">Historian työt on järjestetty aikajaksoille.</span><span class="sxs-lookup"><span data-stu-id="73a01-236">Historical job runs are organized by time ranges.</span></span>

![Työhistorian jaksot](./media/dixf-job-history.md.png)

<span data-ttu-id="73a01-238">Kukin ajettu työ sisältää seuraavat tiedot:</span><span class="sxs-lookup"><span data-stu-id="73a01-238">Each job run provides the following details:</span></span>

- <span data-ttu-id="73a01-239">Suorituksen tiedot</span><span class="sxs-lookup"><span data-stu-id="73a01-239">Execution details</span></span>
- <span data-ttu-id="73a01-240">Suoritusloki</span><span class="sxs-lookup"><span data-stu-id="73a01-240">Execution log</span></span>

<span data-ttu-id="73a01-241">Suorituksen tiedoissa näkyy kunkin työn käsittelemän tietoyksikön tila.</span><span class="sxs-lookup"><span data-stu-id="73a01-241">Execution details show the state of each data entity that the job processed.</span></span> <span data-ttu-id="73a01-242">Näin löydät nopeasti seuraavat tiedot:</span><span class="sxs-lookup"><span data-stu-id="73a01-242">Therefore, you can quickly find the following information:</span></span>

- <span data-ttu-id="73a01-243">Käsitellyt yksiköt.</span><span class="sxs-lookup"><span data-stu-id="73a01-243">Which entities were processed.</span></span>
- <span data-ttu-id="73a01-244">Yksikölle: käsitellyt tietueet ja epäonnistuneiden tietueiden määrä.</span><span class="sxs-lookup"><span data-stu-id="73a01-244">For an entity, how many records were successfully processed, and how many failed.</span></span>
- <span data-ttu-id="73a01-245">Kunkin yksikön väliaikaiset tietueet.</span><span class="sxs-lookup"><span data-stu-id="73a01-245">The staging records for each entity.</span></span>

<span data-ttu-id="73a01-246">Voit ladata vientitöiden väliaikaiset tiedot tiedostona, tai voit ladata ne pakettina tuonti- ja vientitöitä varten.</span><span class="sxs-lookup"><span data-stu-id="73a01-246">You can download the staging data in a file for export jobs, or you can download it as a package for import and export jobs.</span></span>

<span data-ttu-id="73a01-247">Voit avata suoritustiedoista suorituslokin.</span><span class="sxs-lookup"><span data-stu-id="73a01-247">From the execution details, you can also open the execution log.</span></span>

## <a name="parallel-imports"></a><span data-ttu-id="73a01-248">Rinnakkaistuonnit</span><span class="sxs-lookup"><span data-stu-id="73a01-248">Parallel imports</span></span>
<span data-ttu-id="73a01-249">Voit nopeuttaa tietojen tuontia, jolloin tiedoston tuonnin rinnakkaiskäsittely voidaan ottaa käyttöön, jos yksikkö tukee rinnakkaistuontia.</span><span class="sxs-lookup"><span data-stu-id="73a01-249">To speed up the import of data, parallel processing of importing a file can be enabled if the entity supports parallel imports.</span></span> <span data-ttu-id="73a01-250">Jos haluat määrittää entiteetin rinnakkaistuonnin, seuraavia vaiheita on noudatettava.</span><span class="sxs-lookup"><span data-stu-id="73a01-250">To configure the parallel import for an entity, the following steps must be followed.</span></span>

1. <span data-ttu-id="73a01-251">Valitse **Järjestelmänhallinta \> Työtilat \> Tietojen hallinta**.</span><span class="sxs-lookup"><span data-stu-id="73a01-251">Go to **System administration \> Workspaces \> Data management**.</span></span>
2. <span data-ttu-id="73a01-252">Avaa **Tietojen tuonti- ja vientikehyksen parametrit** -sivu valitsemalla **Tuonti-/vienti**-osasta **Framework-parametri** -ruutu.</span><span class="sxs-lookup"><span data-stu-id="73a01-252">In the **Import / Export** section, select the **Framework parameters** tile to open the **Data import/export framework parameters** page.</span></span>
3. <span data-ttu-id="73a01-253">Avaa **Entiteetin tuonnin suoritus parametrit** -sivu valitsemalla **Entiteetin asetukset** -välilehdestä **Määritä yksikön suoritus parametrit**.</span><span class="sxs-lookup"><span data-stu-id="73a01-253">On the **Entity settings** tab, select **Configure entity execution parameters** to open the **Entity import execution parameters** page.</span></span>
4. <span data-ttu-id="73a01-254">Määritä kohteen rinnakkaistuonti määrittämällä seuraavat kentät:</span><span class="sxs-lookup"><span data-stu-id="73a01-254">Set the following fields to configure parallel import for an entity:</span></span>

    - <span data-ttu-id="73a01-255">Valitse yksikkö **Yksikkö**-kentässä.</span><span class="sxs-lookup"><span data-stu-id="73a01-255">In the **Entity** field, select the entity.</span></span>
    - <span data-ttu-id="73a01-256">Kirjoita **Tuonnin kynnystietueiden määrä** -kenttään tuonnin kynnystietueiden määrä.</span><span class="sxs-lookup"><span data-stu-id="73a01-256">In the **Import threshold record count** field, enter the threshold record count for import.</span></span> <span data-ttu-id="73a01-257">Tämä määrittää, mitä tietuemäärää säie käsittelee.</span><span class="sxs-lookup"><span data-stu-id="73a01-257">This determines the record count to be processed by a thread.</span></span> <span data-ttu-id="73a01-258">Jos tiedostossa on 10 000 tietuetta, tietueiden määrä on 2 500 ja tehtävän määrä 4 merkitsee, että kukin säie käsittelee 2 500 tietuetta.</span><span class="sxs-lookup"><span data-stu-id="73a01-258">If a file has 10K records, a record count of 2500 with a task count of 4 will mean, each thread will process 2500 records.</span></span>
    - <span data-ttu-id="73a01-259">Syötä **Tuontitehtävien määrä** -kenttään tuontitehtävien määrä.</span><span class="sxs-lookup"><span data-stu-id="73a01-259">In the **Import task count** field, enter the count of import tasks.</span></span> <span data-ttu-id="73a01-260">Tämä ei saa ylittää eräkäsittelyn enimmäiseräsäikeitä **Järjestelmänhallinnan \>Palvelinmäärityksissä**.</span><span class="sxs-lookup"><span data-stu-id="73a01-260">This must not exceed the max batch threads allocated for batch processing in **System administration \>Server configuration**.</span></span>

## <a name="clean-up-the-staging-tables"></a><span data-ttu-id="73a01-261">Tyhjennä väliaikaiset taulut</span><span class="sxs-lookup"><span data-stu-id="73a01-261">Clean up the staging tables</span></span>
<span data-ttu-id="73a01-262">Platform update 29 -versiosta alkaen tämä toiminto on vanhentunut.</span><span class="sxs-lookup"><span data-stu-id="73a01-262">Starting in Platform update 29, this functionality has been deprecated.</span></span> <span data-ttu-id="73a01-263">Tämä korvataan uudella versiolla, joka on kuvattu alla olevassa työhistorian puhdistustoiminnoissa.</span><span class="sxs-lookup"><span data-stu-id="73a01-263">This is replaced by a new version of job history clean-up functionality explained below.</span></span>

<span data-ttu-id="73a01-264">Väliaikaiset taulut voi tyhjentää **Tietojenhallinta**-työtilan **Tyhjennä väliaikaiset taulut** -ominaisuuden avulla.</span><span class="sxs-lookup"><span data-stu-id="73a01-264">You can clean up staging tables by using the **Staging clean up** feature in the **Data management** workspace.</span></span> <span data-ttu-id="73a01-265">Voit valita kustakin väliaikaisesta taulusta poistettavat tietueet seuraavilla asetuksilla:</span><span class="sxs-lookup"><span data-stu-id="73a01-265">You can use the following options to select which records should be deleted from which staging table:</span></span>

- <span data-ttu-id="73a01-266">**Yksikkö** – jos tarjottuna on vain yksikkö, kaikki kyseisen yksikön väliaikaisen taulun tietueet poistetaan.</span><span class="sxs-lookup"><span data-stu-id="73a01-266">**Entity** – If only an entity is provided, all records from that entity’s staging table are deleted.</span></span> <span data-ttu-id="73a01-267">Valitsemalla tämän voit tyhjentää kaikki yksikön tietoprojektien ja -töiden tiedot.</span><span class="sxs-lookup"><span data-stu-id="73a01-267">Select this option to clean up all the data for the entity across all data projects and all jobs.</span></span>
- <span data-ttu-id="73a01-268">**Työn tunnus** – jos vain työn tunnus on annettu, kaikki valitun työn yksiköiden tietueet poistetaan asianmukaisista väliaikaisista tauluista.</span><span class="sxs-lookup"><span data-stu-id="73a01-268">**Job ID** – If only a job ID is provided, all records for all entities in the selected job are deleted from the appropriate staging tables.</span></span>
- <span data-ttu-id="73a01-269">**Tietoprojektit** – jos valittuna on vain tietoprojekti, kaikki valitun projektin kaikkien töiden yksiköihin kuuluvat kaikki tietueet poistetaan.</span><span class="sxs-lookup"><span data-stu-id="73a01-269">**Data projects** – If only a data project is selected, all records for all entities and across all jobs for the selected data project are deleted.</span></span>

<span data-ttu-id="73a01-270">Poistettavaa tietojoukkoa voi myös rajoittaa yhdistämällä asetuksia.</span><span class="sxs-lookup"><span data-stu-id="73a01-270">You can also combine the options to further restrict the record set that is deleted.</span></span>

## <a name="job-history-clean-up-available-in-platform-update-29-and-later"></a><span data-ttu-id="73a01-271">Työhistorian tyhjennus (saatavilla Platform update 29 -versiossa tai uudemmissa)</span><span class="sxs-lookup"><span data-stu-id="73a01-271">Job history clean up (available in Platform update 29 and later)</span></span>

<span data-ttu-id="73a01-272">Tietojen hallinnan työhistorian puhdistustoimintoa on käytettävä suoritushistorian ajoittaista uudelleenpuhdistusta varten.</span><span class="sxs-lookup"><span data-stu-id="73a01-272">The job history clean-up functionality in data management must be used to schedule a periodic cleanup of the execution history.</span></span> <span data-ttu-id="73a01-273">Tämä toiminto korvaa aiemman väliaikaisen taulukon puhdistustoiminnon, joka on nyt vanhentunut.</span><span class="sxs-lookup"><span data-stu-id="73a01-273">This functionality replaces the previous staging table clean-up functionality, which is now deprecated.</span></span> <span data-ttu-id="73a01-274">Puhdistusprosessi puhdistaa seuraavat taulukot.</span><span class="sxs-lookup"><span data-stu-id="73a01-274">The following tables will be cleaned up by the clean-up process.</span></span>

-   <span data-ttu-id="73a01-275">Kaikki väliaikaiset taulukot</span><span class="sxs-lookup"><span data-stu-id="73a01-275">All staging tables</span></span>

-   <span data-ttu-id="73a01-276">DMFSTAGINGVALIDATIONLOG</span><span class="sxs-lookup"><span data-stu-id="73a01-276">DMFSTAGINGVALIDATIONLOG</span></span>

-   <span data-ttu-id="73a01-277">DMFSTAGINGEXECUTIONERRORS</span><span class="sxs-lookup"><span data-stu-id="73a01-277">DMFSTAGINGEXECUTIONERRORS</span></span>

-   <span data-ttu-id="73a01-278">DMFSTAGINGLOGDETAIL</span><span class="sxs-lookup"><span data-stu-id="73a01-278">DMFSTAGINGLOGDETAIL</span></span>

-   <span data-ttu-id="73a01-279">DMFSTAGINGLOG</span><span class="sxs-lookup"><span data-stu-id="73a01-279">DMFSTAGINGLOG</span></span>

-   <span data-ttu-id="73a01-280">DMFDEFINITIONGROUPEXECUTIONHISTORY</span><span class="sxs-lookup"><span data-stu-id="73a01-280">DMFDEFINITIONGROUPEXECUTIONHISTORY</span></span>

-   <span data-ttu-id="73a01-281">DMFEXECUTION</span><span class="sxs-lookup"><span data-stu-id="73a01-281">DMFEXECUTION</span></span>

-   <span data-ttu-id="73a01-282">DMFDEFINITIONGROUPEXECUTION</span><span class="sxs-lookup"><span data-stu-id="73a01-282">DMFDEFINITIONGROUPEXECUTION</span></span>

<span data-ttu-id="73a01-283">**Suoritushistorian tyhjennys** -toiminnon on oltava käytössä ominaisuuksien hallinnassa, ja sen jälkeen sitä voi käyttää kohdassa **Tietojen hallinta\> Työhistorian tyhjennys**.</span><span class="sxs-lookup"><span data-stu-id="73a01-283">The **Execution history cleanup** feature must be enabled in feature management and then can be accessed from **Data management \> Job history cleanup**.</span></span>

### <a name="scheduling-parameters"></a><span data-ttu-id="73a01-284">Ajoitusparametrit</span><span class="sxs-lookup"><span data-stu-id="73a01-284">Scheduling parameters</span></span>

<span data-ttu-id="73a01-285">Kun ajoitat puhdistusprosessia, seuraavat parametrit on määritettävä, jotta voidaan määrittää puhdistuskriteerit.</span><span class="sxs-lookup"><span data-stu-id="73a01-285">When scheduling the clean-up process, the following parameters must be specified to define the clean-up criteria.</span></span>

-   <span data-ttu-id="73a01-286">**Historian säilyttämisen päivien määrä** – tätä asetusta käytetään ohjaamaan säilytettävän suoritushistorian määrää.</span><span class="sxs-lookup"><span data-stu-id="73a01-286">**Number of days to retain history** – This setting is used to control the amount of execution history to be preserved.</span></span> <span data-ttu-id="73a01-287">Tämä määritetään päivien määränä.</span><span class="sxs-lookup"><span data-stu-id="73a01-287">This is specified in number of days.</span></span> <span data-ttu-id="73a01-288">Kun puhdistamistyö on ajoitettu toistuvaksi erätyönä, tämä asetus toimii samalla tavalla kuin jatkuvasti liikkuva ikkuna, jolloin jäljelle jää aina määritetyn päivien määrä historiaa ja loput poistetaan.</span><span class="sxs-lookup"><span data-stu-id="73a01-288">When the clean-up job is scheduled as a recurring batch job, this setting will act like a continuously moving window thereby, always leaving the history for the specified number of days intact while deleting the rest.</span></span> <span data-ttu-id="73a01-289">Oletusarvo on 7 päivää.</span><span class="sxs-lookup"><span data-stu-id="73a01-289">The default is 7 days.</span></span>

-   <span data-ttu-id="73a01-290">**Työn suorittamisen tuntien määrä** – puhdistettavaksi tarkoitetun historian määrästä riippuen puhdistustyön kokonaissuorituksen aika voi vaihdella muutamasta minuutista muutamiin tunteihin.</span><span class="sxs-lookup"><span data-stu-id="73a01-290">**Number of hours to execute the job** – Depending on the amount of history to be cleaned up, the total execution time for the clean-up job can vary from a few minutes to a few hours.</span></span> <span data-ttu-id="73a01-291">Tämän parametrin arvoksi on määritettävä niiden tuntien määrä, jonka ajan työtä suoritetaan.</span><span class="sxs-lookup"><span data-stu-id="73a01-291">This parameter must be set to the number of hours that the job will execute.</span></span> <span data-ttu-id="73a01-292">Kun puhdistustyö on suoritettu tietylle tuntimäärälle, työ lopetetaan ja puhdistusta jatketaan, kun työ suoritetaan toistuvuusaikataulun mukaan seuraavan kerran.</span><span class="sxs-lookup"><span data-stu-id="73a01-292">After the clean-up job has executed for the specified number of hours, the job will exit and will resume the clean up the next time it is run based on the recurrence schedule.</span></span>

    <span data-ttu-id="73a01-293">Maksimisuoritusaika voidaan määrittää asettamalla enimmäisraja tuntien määrälle, jonka sisällä työ on suoritettava tämän asetuksen avulla.</span><span class="sxs-lookup"><span data-stu-id="73a01-293">A maximum execution time can be specified by setting a max limit on the number of hours the job must run using this setting.</span></span> <span data-ttu-id="73a01-294">Puhdistuslogiikka käy läpi yhden työn suorittamisen tunnuksen kerrallaan aikajärjestyksessä, ja vanhin on ensin liittyvän suoritushistorian puhdistuksessa.</span><span class="sxs-lookup"><span data-stu-id="73a01-294">The clean-up logic goes through one job execution ID at a time in a chronologically arranged sequence, with oldest being first for the cleanup of related execution history.</span></span> <span data-ttu-id="73a01-295">Se lopettaa uusien suoritustunnuksien keräilyn tyhjennystä varten, kun jäljellä oleva suorituksen kesto on viimeisen 10 % sisällä määritetystä kestosta.</span><span class="sxs-lookup"><span data-stu-id="73a01-295">It will stop picking up new execution ID’s for cleanup when the remaining execution duration is within the last 10% of the specified duration.</span></span> <span data-ttu-id="73a01-296">Joissakin tapauksissa on odotettavissa, että puhdistustyö jatkuu määritetyn enimmäisajan jälkeen.</span><span class="sxs-lookup"><span data-stu-id="73a01-296">In some cases, it will be expected that the clean-up job will continue beyond the specified max time.</span></span> <span data-ttu-id="73a01-297">Tämä riippuu pitkälti siitä, kuinka useita tietueita on poistettava nykyiselle suoritustunnukselle, joka käynnistettiin ennen 10 prosentin raja-arvon ylittymistä.</span><span class="sxs-lookup"><span data-stu-id="73a01-297">This will largely depend on the number of records to be deleted for the current execution ID that was started before the 10% threshold was reached.</span></span> <span data-ttu-id="73a01-298">Käynnistetty tyhjennys on suoritettava tietojen eheyden varmistamiseksi, mikä tarkoittaa, että uudelleenjärjestäminen jatkuu määritetyn rajan ylittämisestä huolimatta.</span><span class="sxs-lookup"><span data-stu-id="73a01-298">The cleanup that was started must be completed to ensure data integrity, which means that cleanup will continue despite exceeding the specified limit.</span></span> <span data-ttu-id="73a01-299">Kun tämä on suoritettu, uusia suoritustunnuksia ei kerätä ja tyhjennystyö on valmis.</span><span class="sxs-lookup"><span data-stu-id="73a01-299">When this is complete, new execution ID’s are not picked up and the clean-up job completes.</span></span> <span data-ttu-id="73a01-300">Jäljellä oleva suoritushistoria, jota ei ole puhdistettu riittävän suoritusajan puutteen vuoksi, noudetaan seuraavan kerran, kun puhdistustyö ajoitetaan.</span><span class="sxs-lookup"><span data-stu-id="73a01-300">The remaining execution history that was not cleaned up due to lack of enough execution time, will be picked up the next time the clean-up job is scheduled.</span></span> <span data-ttu-id="73a01-301">Tämän asetuksen oletus- ja minimiarvoksi määritetään 2 tuntia.</span><span class="sxs-lookup"><span data-stu-id="73a01-301">The default and minimum value for this setting is set to 2 hours.</span></span>

-   <span data-ttu-id="73a01-302">**Toistuva erä** – puhdistustyö voidaan suorittaa kertaluontoisesti, manuaalisena suorittamisena, tai se voidaan myös ajoittaa toistuvaksi erätyöksi.</span><span class="sxs-lookup"><span data-stu-id="73a01-302">**Recurring batch** – The clean-up job can be run as a one-time, manual execution, or it can be also scheduled for recurring execution in batch.</span></span> <span data-ttu-id="73a01-303">Erä voidaan ajoittaa käyttämällä **Suorita taustalla** -asetuksia, joka on erätöiden vakiomääritys.</span><span class="sxs-lookup"><span data-stu-id="73a01-303">The batch can be scheduled using the **Run in background** settings, which is the standard batch set up.</span></span>

> [!NOTE]
> <span data-ttu-id="73a01-304">Jos väliaikaisen tallennuksen tauluja ei ole puhdistettu kokonaan, varmista, että puhdistustyö ajoitetaan suoritettavaksi toistuvana.</span><span class="sxs-lookup"><span data-stu-id="73a01-304">If records in the staging tables are not cleaned up completely, ensure that the cleanup job is scheduled to run in recurrence.</span></span> <span data-ttu-id="73a01-305">Kuten edellä on kerrottu, kunkin puhdistuksen suorituksen yhteydessä työ puhdistaa niin monta suorituksen tunnusta kuin mahdollista annetun ajan puitteissa.</span><span class="sxs-lookup"><span data-stu-id="73a01-305">As explained above, in any clean up execution the job will only clean up as many execution ID's as is possible within the provided maximum hours.</span></span> <span data-ttu-id="73a01-306">Jotta puhdistusta voidaan jatkaa jäljellä olevissa väliaikaisen tallennuksen tietueissa, työ on ajoitettava suoritettavaksi säännöllisesti.</span><span class="sxs-lookup"><span data-stu-id="73a01-306">In order to continue cleanup of any remaining staging records, the job must be scheduled to run periodically.</span></span>

## <a name="job-history-clean-up-and-archival-available-for-preview-in-platform-update-39-or-version-10015"></a><span data-ttu-id="73a01-307">Työhistorian tyhjennys ja arkistointi (käytössä esiversiona alustapäivityksessä 39 tai versiossa 10.0.15)</span><span class="sxs-lookup"><span data-stu-id="73a01-307">Job history clean up and archival (available for preview in Platform update 39 or version 10.0.15)</span></span>
<span data-ttu-id="73a01-308">Työhistorian tyhjennys ja arkistointi -toiminnallisuus korvaa aiemmat siivoustoiminnon versiot.</span><span class="sxs-lookup"><span data-stu-id="73a01-308">The job history clean up and archival functionality replaces the previous versions of the clean up functionality.</span></span> <span data-ttu-id="73a01-309">Tämä osio kertoo näistä uusista ominaisuuksista.</span><span class="sxs-lookup"><span data-stu-id="73a01-309">This section will explain these new capabilities.</span></span>

<span data-ttu-id="73a01-310">Yksi puhdistustoiminnon tärkeimmistä muutoksista on järjestelmän erätyön käyttö historiatietojen poistamiseen.</span><span class="sxs-lookup"><span data-stu-id="73a01-310">One of the main changes to the clean up functionality is the use of system batch job for cleaning up the history.</span></span> <span data-ttu-id="73a01-311">Järjestelmän erätyön käyttö sallii Finance and Operations -sovellusten ajoittaa siivouserätyön automaattisesti ja suorittaa sen, kun järjestelmä on valmis.</span><span class="sxs-lookup"><span data-stu-id="73a01-311">The use of system batch job allows Finance and Operations apps to have the clean up batch job automatically scheduled and running as soon as the system is ready.</span></span> <span data-ttu-id="73a01-312">Erätyötä ei enää tarvitse ajoittaa manuaalisesti.</span><span class="sxs-lookup"><span data-stu-id="73a01-312">It is no longer required to schedule the batch job manually.</span></span> <span data-ttu-id="73a01-313">Tässä oletussuoritustilassa erätyö suoritetaan tunnin välein alkaen kello 12 puolilta öin, ja se säilyttää viimeisimmän 7 päivän suoritushistorian.</span><span class="sxs-lookup"><span data-stu-id="73a01-313">In this default execution mode, the batch job will execute every hour starting at 12 midnight and will retain the execution history for the most recent 7 days.</span></span> <span data-ttu-id="73a01-314">Tyhjennetty historia arkistoidaan tulevaa noutamista varten.</span><span class="sxs-lookup"><span data-stu-id="73a01-314">The purged history is archived for future retrieval.</span></span>

> [!NOTE]
> <span data-ttu-id="73a01-315">Koska tämä toiminto on esikatselussa, järjestelmän erätyö ei poista suoritushistoriaa, ennen kuin se on otettu käyttöön työn DMFEnableExecutionHistoryCleanupSystemJob kautta.</span><span class="sxs-lookup"><span data-stu-id="73a01-315">Because this functionality is in preview, the system batch job will not delete any execution history until it is enabled via the flight DMFEnableExecutionHistoryCleanupSystemJob.</span></span> <span data-ttu-id="73a01-316">Kun ominaisuus on yleisesti saatavilla tulevassa versiossa, tätä ei vaadita, ja järjestelmän erätyö alkaa tyhjentää ja arkistoida sen jälkeen, kun järjestelmä on valmis perustuen määritettyyn aikatauluun edellä kuvatulla tavalla.</span><span class="sxs-lookup"><span data-stu-id="73a01-316">When the feature is generally available in a future release, this flight will not be required and the system batch job will start to purge and archive after the system is ready, based on the defined schedule as explained above.</span></span> 

> [!NOTE]
> <span data-ttu-id="73a01-317">Tulevassa versiossa puhdistus toimintojen aiemmat versiot poistetaan Finance and Operations -sovelluksista.</span><span class="sxs-lookup"><span data-stu-id="73a01-317">In a future release, the previous versions of the clean up functionality will be removed from Finance and Operations apps.</span></span>

<span data-ttu-id="73a01-318">Toinen puhdistusprosessin muutos on tyhjennetyn suoritushistorian arkistointi.</span><span class="sxs-lookup"><span data-stu-id="73a01-318">The second change in the clean up process is the archival of the purged execution history.</span></span> <span data-ttu-id="73a01-319">Puhdistustyö arkistoi poistetut tietueet blob-tallennustilaan, jota DIXF käyttää säännölliseen kanssakäymiseen.</span><span class="sxs-lookup"><span data-stu-id="73a01-319">The clean up job will archive the deleted records to the blob storage that DIXF uses for regular integrations.</span></span> <span data-ttu-id="73a01-320">Arkistoitu tiedosto on DIXF-pakettimuodossa, ja se on käytettävissä 7 päivän ajan blob-objektissa, jolloin se voidaan ladata.</span><span class="sxs-lookup"><span data-stu-id="73a01-320">The archived file will be in the DIXF package format and will be available for 7 days in the blob during which time it can be downloaded.</span></span> <span data-ttu-id="73a01-321">Oletusarvon mukainen arkistoidun tiedoston 7 päivän säilytysaika voidaan muuttaa enintään 90 päiväksi parametreissä.</span><span class="sxs-lookup"><span data-stu-id="73a01-321">The default longevity of 7 days for the archived file can be changed to a maximum of 90 days in the parameters.</span></span>

### <a name="changing-the-default-settings"></a><span data-ttu-id="73a01-322">Oletusasetusten muuttaminen</span><span class="sxs-lookup"><span data-stu-id="73a01-322">Changing the default settings</span></span>
<span data-ttu-id="73a01-323">Tämä toiminto on tällä hetkellä esikatselussa, ja se on otettava eksplisiittisesti käyttöön ottamalla käyttöön DMFEnableExecutionHistoryCleanupSystemJob.</span><span class="sxs-lookup"><span data-stu-id="73a01-323">This functionality is currently in preview and must be explicitly turned on by enabling the flight DMFEnableExecutionHistoryCleanupSystemJob.</span></span> <span data-ttu-id="73a01-324">Väliaikaisen siivouksen toiminnon on oltava käytössä myös ominaisuuksien hallinnassa.</span><span class="sxs-lookup"><span data-stu-id="73a01-324">The staging clean up feature must also be turned on in feature management.</span></span>

<span data-ttu-id="73a01-325">Jos haluat muuttaa arkistoidun tiedoston säilytyksen oletusasetusta, siirry tietojen hallinnan työtilaan ja valitse **Työhistorian puhdistus**.</span><span class="sxs-lookup"><span data-stu-id="73a01-325">To change the default setting for the longevity of the archived file, go to the data management workspace and select **Job history cleanup**.</span></span> <span data-ttu-id="73a01-326">Määritä **Paketin säilyttämispäivät blob-objektissa** arvoksi 7-90 (mukaan lukien).</span><span class="sxs-lookup"><span data-stu-id="73a01-326">Set **Days to retain package in blob** to a value between 7 and 90 (inclusive).</span></span> <span data-ttu-id="73a01-327">Tämä tulee voimaan tämän muutoksen tekemisen jälkeen luoduissa arkistoissa.</span><span class="sxs-lookup"><span data-stu-id="73a01-327">This will take effect on the archives that are created after this change was made.</span></span>

### <a name="downloading-the-archived-package"></a><span data-ttu-id="73a01-328">Arkistoidun paketin lataaminen</span><span class="sxs-lookup"><span data-stu-id="73a01-328">Downloading the archived package</span></span>
<span data-ttu-id="73a01-329">Tämä toiminto on tällä hetkellä esikatselussa, ja se on otettava eksplisiittisesti käyttöön ottamalla käyttöön DMFEnableExecutionHistoryCleanupSystemJob.</span><span class="sxs-lookup"><span data-stu-id="73a01-329">This functionality is currently in preview and must be explicitly turned on by enabling the flight DMFEnableExecutionHistoryCleanupSystemJob.</span></span> <span data-ttu-id="73a01-330">Väliaikaisen siivouksen toiminnon on oltava käytössä myös ominaisuuksien hallinnassa.</span><span class="sxs-lookup"><span data-stu-id="73a01-330">The staging clean up feature must also be turned on in feature management.</span></span>

<span data-ttu-id="73a01-331">Voit ladata arkistoidun suoritushistorian siirtymällä tietojen hallinnan työtilaan ja valitsemalla **Työhistorian puhdistus**.</span><span class="sxs-lookup"><span data-stu-id="73a01-331">To download the archived execution history, go to the data management workspace and select **Job history cleanup**.</span></span> <span data-ttu-id="73a01-332">Valitse **Paketin varmuuskopiohistoria** avataksesi historialomakkeen.</span><span class="sxs-lookup"><span data-stu-id="73a01-332">Select **Package backup history** to open the history form.</span></span> <span data-ttu-id="73a01-333">Tässä lomakkeessa näkyy luettelo kaikista arkistoiduista paketeista.</span><span class="sxs-lookup"><span data-stu-id="73a01-333">This form shows the list of all archived packages.</span></span> <span data-ttu-id="73a01-334">Arkiston voi valita ja ladata valitsemalla **Lataa paketti**.</span><span class="sxs-lookup"><span data-stu-id="73a01-334">An archive can be selected and downloaded by selecting **Download package**.</span></span> <span data-ttu-id="73a01-335">Ladattu paketti on DIXF-pakettimuodossa ja sisältää seuraavat tiedostot:</span><span class="sxs-lookup"><span data-stu-id="73a01-335">The downloaded package will be in the DIXF package format and contain the following files:</span></span>

-   <span data-ttu-id="73a01-336">Entiteetin väliaikainen taulutiedosto</span><span class="sxs-lookup"><span data-stu-id="73a01-336">The entity staging table file</span></span>
-   <span data-ttu-id="73a01-337">DMFDEFINITIONGROUPEXECUTION</span><span class="sxs-lookup"><span data-stu-id="73a01-337">DMFDEFINITIONGROUPEXECUTION</span></span>
-   <span data-ttu-id="73a01-338">DMFDEFINITIONGROUPEXECUTIONHISTORY</span><span class="sxs-lookup"><span data-stu-id="73a01-338">DMFDEFINITIONGROUPEXECUTIONHISTORY</span></span>
-   <span data-ttu-id="73a01-339">DMFEXECUTION</span><span class="sxs-lookup"><span data-stu-id="73a01-339">DMFEXECUTION</span></span>
-   <span data-ttu-id="73a01-340">DMFSTAGINGEXECUTIONERRORS</span><span class="sxs-lookup"><span data-stu-id="73a01-340">DMFSTAGINGEXECUTIONERRORS</span></span>
-   <span data-ttu-id="73a01-341">DMFSTAGINGLOG</span><span class="sxs-lookup"><span data-stu-id="73a01-341">DMFSTAGINGLOG</span></span>
-   <span data-ttu-id="73a01-342">DMFSTAGINGLOGDETAILS</span><span class="sxs-lookup"><span data-stu-id="73a01-342">DMFSTAGINGLOGDETAILS</span></span>
-   <span data-ttu-id="73a01-343">DMFSTAGINGVALIDATIONLOG</span><span class="sxs-lookup"><span data-stu-id="73a01-343">DMFSTAGINGVALIDATIONLOG</span></span>



[!INCLUDE[footer-include](../../../includes/footer-banner.md)]