---
title: Yrityksen käsite Common Data Servicessa
description: Tässä aiheessa kuvataan yritystietojen integraatiota Finance and Operationsin ja Common Data Servicen välillä.
author: RamaKrishnamoorthy
manager: AnnBe
ms.date: 08/04/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: rhaertle
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: ramasri
ms.dyn365.ops.version: ''
ms.search.validFrom: 2019-07-15
ms.openlocfilehash: 444bfc1698a206ca34e67f742df63431a3b02649
ms.sourcegitcommit: 7da8811f1a7db858efb76edb0bdf857a47d07600
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 08/27/2020
ms.locfileid: "3728410"
---
# <a name="company-concept-in-common-data-service"></a><span data-ttu-id="7d569-103">Yrityksen käsite Common Data Servicessa</span><span class="sxs-lookup"><span data-stu-id="7d569-103">Company concept in Common Data Service</span></span>

[!include [banner](../../includes/banner.md)]


<span data-ttu-id="7d569-104">Finance and Operationsissa käsite *Yritys* on sekä oikeudellinen että liiketoiminnallinen yksikkö.</span><span class="sxs-lookup"><span data-stu-id="7d569-104">In Finance and Operations, the concept of a *company* is both a legal construct and a business construct.</span></span> <span data-ttu-id="7d569-105">Se on myös tietojen suojauksen ja näkyvyyden raja.</span><span class="sxs-lookup"><span data-stu-id="7d569-105">It's also a security and visibility boundary for data.</span></span> <span data-ttu-id="7d569-106">Käyttäjät työskentelevät aina yksittäisen yrityksen kontekstissa, ja suurin osa tiedoista on yrityksen omistamia.</span><span class="sxs-lookup"><span data-stu-id="7d569-106">Users always work in the context of a single company, and most of the data is striped by company.</span></span>

<span data-ttu-id="7d569-107">Common Data Servicessa ei ole vastaavaa käsitettä.</span><span class="sxs-lookup"><span data-stu-id="7d569-107">Common Data Service doesn't have an equivalent concept.</span></span> <span data-ttu-id="7d569-108">Lähin käsite on *liiketoimintayksikkö*, joka on ensisijaisesti tietoturvan ja näkyvyyden raja käyttäjätiedoille.</span><span class="sxs-lookup"><span data-stu-id="7d569-108">The closest concept is *business unit*, which is primarily a security and visibility boundary for user data.</span></span> <span data-ttu-id="7d569-109">Tällä käsitteellä ei ole sama oikeudellisia tai liiketoiminnan vaikutuksia kuin yrityksen käsitteellä.</span><span class="sxs-lookup"><span data-stu-id="7d569-109">This concept doesn't have the same legal or business implications as the company concept.</span></span>

<span data-ttu-id="7d569-110">Koska liiketoimintayksikkö ja yritys eivät ole vastaavia käsitteitä, ei ole mahdollista pakottaa yksi-yhteen (1:1)-vastaavuutta niiden välillä Common Data Service -integrointia varten.</span><span class="sxs-lookup"><span data-stu-id="7d569-110">Because business unit and company aren't equivalent concepts, it isn't possible to force a one-to-one (1:1) mapping between them for the purpose of Common Data Service integration.</span></span> <span data-ttu-id="7d569-111">Koska käyttäjien on kuitenkin oletusarvoisesti pystyttävä näkemään samat tietueet sovelluksessa ja Common Data Servicessa, Microsoft on ottanut käyttöön uuden entiteetin Common Data Servicessa, jonka nimi on cdm\_Company.</span><span class="sxs-lookup"><span data-stu-id="7d569-111">However, because users must, by default, be able to see the same records in the application and Common Data Service, Microsoft has introduced a new entity in Common Data Service that is named cdm\_Company.</span></span> <span data-ttu-id="7d569-112">Tämä entiteetti vastaa sovelluksen Yritys-yksikköä.</span><span class="sxs-lookup"><span data-stu-id="7d569-112">This entity is equivalent to the Company entity in the application.</span></span> <span data-ttu-id="7d569-113">Jos haluat varmistaa, että tietueiden näkyvyys vastaa toisiaan sovelluksen ja Common Data Servicen välillä heti käyttöönotettaessa, suosittelemme seuraavaa tietojen määritystä Common Data Servicessa:</span><span class="sxs-lookup"><span data-stu-id="7d569-113">To help guarantee that visibility of records is equivalent between the application and Common Data Service out of the box, we recommend the following setup for data in Common Data Service:</span></span>

+ <span data-ttu-id="7d569-114">Jokaiselle Finance and Operationsin Yritys-tietueelle, jolle on otettu käyttöön kaksoiskirjoitus, luodaan liittyvä cdm\_Company-tietue.</span><span class="sxs-lookup"><span data-stu-id="7d569-114">For each Finance and Operations Company record that is enabled for dual-write, an associated cdm\_Company record is created.</span></span>
+ <span data-ttu-id="7d569-115">Kun cdm\_Company-tietue luodaan ja otetaan käyttöön kaksoiskirjoitukselle, luodaan oletusliiketoimintayksikkö, jolla on sama nimi.</span><span class="sxs-lookup"><span data-stu-id="7d569-115">When a cdm\_Company record is created and enabled for dual-write, a default business unit is created that has the same name.</span></span> <span data-ttu-id="7d569-116">Vaikka kyseiselle liiketoimintayksikölle luodaan automaattisesti oletusryhmä, liiketoimintayksikköä ei käytetä.</span><span class="sxs-lookup"><span data-stu-id="7d569-116">Although a default team is automatically created for that business unit, the business unit isn't used.</span></span>
+ <span data-ttu-id="7d569-117">Luodaan erillinen omistajaryhmä, jolla on sama nimi.</span><span class="sxs-lookup"><span data-stu-id="7d569-117">A separate owner team is created that has the same name.</span></span> <span data-ttu-id="7d569-118">Se liittyy myös liiketoimintayksikköön.</span><span class="sxs-lookup"><span data-stu-id="7d569-118">It's also associated with the business unit.</span></span>
+ <span data-ttu-id="7d569-119">Oletusarvoisesti minkä tahansa sovelluksessa luodun ja Common Data Serviceen kaksoiskirjoitetun tietueen omistajaksi määritetään DW Owner -ryhmä, joka on linkitetty liitettyyn liiketoimintayksikköön.</span><span class="sxs-lookup"><span data-stu-id="7d569-119">By default, the owner of any record that is created and dual-written to Common Data Service is set to the "DW Owner" team that is linked to the associated business unit.</span></span>

<span data-ttu-id="7d569-120">Seuraavassa kuvassa on esimerkki tästä tietojen määrityksestä Common Data Servicessa.</span><span class="sxs-lookup"><span data-stu-id="7d569-120">The following illustration shows an example of this data setup in Common Data Service.</span></span>

![Tietojen määritys Common Data Servicessa](media/dual-write-company-1.png)

<span data-ttu-id="7d569-122">Tämän määrityksen vuoksi kaikki USMF-yritykseen liittyvät tietueet omistaa ryhmä, joka on linkitetty USMF-liiketoimintayksikköön Common Data Servicessa.</span><span class="sxs-lookup"><span data-stu-id="7d569-122">Because of this configuration, any record that is related to the USMF company will be owned by a team that is linked to the USMF business unit in Common Data Service.</span></span> <span data-ttu-id="7d569-123">Tämän vuoksi jokainen käyttäjä, jolla on liiketoimintayksikön käyttöoikeusrooli, joka on määritetty liiketoimintayksikkötason näkyvyydelle, voi nyt nähdä kyseiset tietueet.</span><span class="sxs-lookup"><span data-stu-id="7d569-123">Therefore, any user who has access to that business unit through a security role that is set to business unit–level visibility can now see those records.</span></span> <span data-ttu-id="7d569-124">Seuraavassa esimerkissä kerrotaan, miten ryhmiä voidaan käyttää kyseisten tietueiden oikeisiin käyttöoikeuksiin.</span><span class="sxs-lookup"><span data-stu-id="7d569-124">The following example shows how teams can be used to provide the correct access to those records.</span></span>

+ <span data-ttu-id="7d569-125">Myyntipäällikkö-rooli määritetään USMF Sales -tiimin jäsenille.</span><span class="sxs-lookup"><span data-stu-id="7d569-125">The "Sales Manager" role is assigned to members of the "USMF Sales" team.</span></span>
+ <span data-ttu-id="7d569-126">Käyttäjät, joilla on Myyntipäällikkö-rooli, voivat käyttää mitä tahansa tilin tietueita, jotka ovat saman liiketoiminta yksikön jäseniä.</span><span class="sxs-lookup"><span data-stu-id="7d569-126">Users who have the "Sales Manager" role can access any account records that are members of the same business unit that they are members of.</span></span>
+ <span data-ttu-id="7d569-127">USMF Sales -tiimi on linkitetty aiemmin mainittuun USMF-liiketoimintayksikköön.</span><span class="sxs-lookup"><span data-stu-id="7d569-127">The "USMF Sales" team is linked to the USMF business unit that was mentioned earlier.</span></span>
+ <span data-ttu-id="7d569-128">Tämän vuoksi USMF Sales -tiimin jäsenet näkevät minkä tahansa tilin, jonka omistaa USMF DW, joka olisi tullut USMF-yrityksen entiteetistä Finance and Operationsissa.</span><span class="sxs-lookup"><span data-stu-id="7d569-128">Therefore, members of the "USMF Sales" team can see any account that is owned by the "USMF DW" user, which would have come from the USMF Company entity in Finance and Operations.</span></span>

![Miten ryhmiä voidaan käyttää](media/dual-write-company-2.png)

<span data-ttu-id="7d569-130">Kuten edellä olevassa kuvassa näkyy, tämä 1:1-yhteys liiketoimintayksikön, yrityksen ja tiimin välillä on vain lähtökohta.</span><span class="sxs-lookup"><span data-stu-id="7d569-130">As the preceding illustration shows, this 1:1 mapping between business unit, company, and team is just a starting point.</span></span> <span data-ttu-id="7d569-131">Tässä esimerkissä uusi Europe-liiketoimintayksikkö luodaan manuaalisesti Common Data Servicessa sekä DEMF:n että ESMF:n ylätasona.</span><span class="sxs-lookup"><span data-stu-id="7d569-131">In this example, a new "Europe" business unit is manually created in Common Data Service as the parent for both DEMF and ESMF.</span></span> <span data-ttu-id="7d569-132">Tämä uusi pääliiketoimintayksikkö ei liity kaksoiskirjoittamiseen.</span><span class="sxs-lookup"><span data-stu-id="7d569-132">This new root business unit is unrelated to dual-write.</span></span> <span data-ttu-id="7d569-133">Sen avulla voidaan kuitenkin antaa "EUR Sales"-tiimin jäsenille pääsy tilitietoihin sekä DEMF:ssä että ESMF:ssä asettamalla tietojen näkyvyydeksi **Ylätaso/aliliiketoimintayksikkö** liittyvässä käyttöoikeusroolissa.</span><span class="sxs-lookup"><span data-stu-id="7d569-133">However, it can be used to give members of the "EUR Sales" team access to account data in both DEMF and ESMF by setting the data visibility to **Parent/Child BU** in the associated security role.</span></span>

<span data-ttu-id="7d569-134">Viimeinen aihe, josta keskustellaan, on se, miten kaksoiskirjoitus määrittää, mihin omistajaryhmään sen tulisi liittää tietueita.</span><span class="sxs-lookup"><span data-stu-id="7d569-134">A final topic to discuss is how dual-write determines which owner team it should assign records to.</span></span> <span data-ttu-id="7d569-135">Tätä toimintaa ohjaa cdm\_Company-tietueen **Oletusomistajaryhmä**-kenttä.</span><span class="sxs-lookup"><span data-stu-id="7d569-135">This behavior is controlled by the **Default owning team** field on the cdm\_Company record.</span></span> <span data-ttu-id="7d569-136">Kun cdm\_Company-tietueelle on otettu käyttöön kaksoiskirjoitus, laajennus luo automaattisesti liittyvän liiketoimintayksikön ja omistajaryhmän (jos sitä ei vielä ole) ja määrittää **Oletusomistajaryhmä**-kentän.</span><span class="sxs-lookup"><span data-stu-id="7d569-136">When a cdm\_Company record is enabled for dual-write, a plug-in automatically creates the associated business unit and owner team (if it doesn't already exist), and sets the **Default owning team** field.</span></span> <span data-ttu-id="7d569-137">Järjestelmänvalvoja voi muuttaa kentän arvoksi eri arvon.</span><span class="sxs-lookup"><span data-stu-id="7d569-137">The admin can change this field to a different value.</span></span> <span data-ttu-id="7d569-138">Järjestelmänvalvoja ei kuitenkaan voi tyhjentää kenttää niin kauan kuin entiteetti on kaksoiskirjoitustilassa.</span><span class="sxs-lookup"><span data-stu-id="7d569-138">However, the admin can't clear the field as long as the entity is enabled for dual-write.</span></span>

> [!div class="mx-imgBorder"]
<span data-ttu-id="7d569-139">![Oletusomistajaryhmä-kenttä](media/dual-write-default-owning-team.jpg)</span><span class="sxs-lookup"><span data-stu-id="7d569-139">![Default owning team field](media/dual-write-default-owning-team.jpg)</span></span>

## <a name="company-striping-and-bootstrapping"></a><span data-ttu-id="7d569-140">Yrityksen tietojen omistajuus ja esilataus</span><span class="sxs-lookup"><span data-stu-id="7d569-140">Company striping and bootstrapping</span></span>

<span data-ttu-id="7d569-141">Common Data Service -integrointi tuo yrityksen pariteetin käyttämällä yritystunnusta tietojen omistajuuden ilmaisemiseen.</span><span class="sxs-lookup"><span data-stu-id="7d569-141">Common Data Service integration brings company parity by using a company identifier to stripe data.</span></span> <span data-ttu-id="7d569-142">Kuten seuraavassa kuvassa näkyy, kaikkia yrityskohtaisia entiteettejä laajennetaan siten, että niillä on monta-yhteen (N:1)-suhde cdm\_Company-entiteetin kanssa.</span><span class="sxs-lookup"><span data-stu-id="7d569-142">As the following illustration shows, all company-specific entities are extended so that they have a many-to-one (N:1) relationship with the cdm\_Company entity.</span></span>

> [!div class="mx-imgBorder"]
<span data-ttu-id="7d569-143">![N:1-suhde yrityskohtaisen entiteetin ja cdm_Company-yksikön välillä](media/dual-write-bootstrapping.png)</span><span class="sxs-lookup"><span data-stu-id="7d569-143">![N:1 relationship between a company-specific entity and the cdm_Company entity](media/dual-write-bootstrapping.png)</span></span>

+ <span data-ttu-id="7d569-144">Kun yritys on lisätty ja tallennettu, arvo tietueissa muuttuu vain luku -arvoksi.</span><span class="sxs-lookup"><span data-stu-id="7d569-144">For records, after a company is added and saved, the value becomes read-only.</span></span> <span data-ttu-id="7d569-145">Siksi käyttäjien tulee varmistaa, että he valitsevat oikean yrityksen.</span><span class="sxs-lookup"><span data-stu-id="7d569-145">Therefore, users should make sure that they select the correct company.</span></span>
+ <span data-ttu-id="7d569-146">Vain tietueet, joissa on yritystietoja, voivat olla kaksoiskirjoituskelpoisia sovelluksen ja Common Data Servicen välillä.</span><span class="sxs-lookup"><span data-stu-id="7d569-146">Only records that have company data are eligible for dual-write between the application and Common Data Service.</span></span>
+ <span data-ttu-id="7d569-147">Olemassa olevien Common Data Service -tietojen osalta on pian saatavilla järjestelmänvalvojan johtama esilatauskokemus.</span><span class="sxs-lookup"><span data-stu-id="7d569-147">For existing Common Data Service data, an admin-led bootstrapping experience will soon be available.</span></span>


## <a name="autopopulate-company-name-in-customer-engagement-apps"></a><span data-ttu-id="7d569-148">Yrityksen nimen täyttäminen automaattisesti asiakkaiden aktivointisovelluksissa</span><span class="sxs-lookup"><span data-stu-id="7d569-148">Autopopulate company name in customer engagement apps</span></span>

<span data-ttu-id="7d569-149">Yrityksen nimi voidaan täyttää automaattisesti usealla eri tavalla asiakkaiden aktivointisovelluksissa.</span><span class="sxs-lookup"><span data-stu-id="7d569-149">There are several ways to auto-populate the company name in customer engagement apps.</span></span>

+ <span data-ttu-id="7d569-150">Järjestelmänvalvoja voi määrittää oletusyrityksen valitsemalla **Lisäasetukset > Järjestelmä > Suojaus > Käyttäjät**.</span><span class="sxs-lookup"><span data-stu-id="7d569-150">If you are a system administrator, you can set the default company by navigating to **Advanced Settings > System > Security > Users**.</span></span> <span data-ttu-id="7d569-151">Avaa **Käyttäjä**-lomake ja määritä sitten **Organisaation tiedot** -osassa **Yrityksen oletusarvo lomakkeissa** -arvo.</span><span class="sxs-lookup"><span data-stu-id="7d569-151">Open the **User** form, and in the **Organization Information** section, set the **Company to default on Forms** value.</span></span>

    :::image type="content" source="media/autopopulate-company-name-1.png" alt-text="Oletusyrityksen määrittäminen Organisaation tiedot -osassa":::

+ <span data-ttu-id="7d569-153">Jos sinulla on **Järjestelmäkäyttäjä**-entiteetin **Kirjoitus**-käyttöoikeus **Liiketoimintayksikkö**-tasolla, voit muuttaa oletusyrityksen missä tahansa lomakkeessa valitsemalla yrityksen avattavasta **Yritys**-luettelosta.</span><span class="sxs-lookup"><span data-stu-id="7d569-153">If you have **Write** access to the **SystemUser** entity for the **Business Unit** level, then you can change the default company on any form by selecting a company from the **Company** drop-down menu.</span></span>

    :::image type="content" source="media/autopopulate-company-name-2.png" alt-text="Yrityksen nimen muuttaminen uudessa tilissä":::

+ <span data-ttu-id="7d569-155">Jos sinulla on useamman kuin yhden yrityksen **Kirjoitus**-käyttöoikeus, voit vaihtaa oletusyrityksen valitsemalla toiselle yritykselle kuuluvan tietueen.</span><span class="sxs-lookup"><span data-stu-id="7d569-155">If you have **Write** access to data in more than one company, then you can change the default company by choosing a record that belongs to different company.</span></span>

    :::image type="content" source="media/autopopulate-company-name-3.png" alt-text="Tietueen valitseminen vaihtaa oletusyrityksen":::

+ <span data-ttu-id="7d569-157">Jos olet järjestelmän määrittäjä tai järjestelmänvalvoja ja haluat täyttää yrityksen tiedot automaattisesti mukautetussa lomakkeessa, voit käyttää [lomaketapahtumia](https://docs.microsoft.com/powerapps/developer/model-driven-apps/clientapi/events-forms-grids).</span><span class="sxs-lookup"><span data-stu-id="7d569-157">If you are a system configurator or administrator, and you want to auto-populate company data on a custom form, then you can use [form events](https://docs.microsoft.com/powerapps/developer/model-driven-apps/clientapi/events-forms-grids).</span></span> <span data-ttu-id="7d569-158">Lisää JavaScript-viittaus kohteeseen **msdyn_/DefaultCompany.js** ja käytä seuraavia tapahtumia.</span><span class="sxs-lookup"><span data-stu-id="7d569-158">Add a JavaScript reference to **msdyn_/DefaultCompany.js** and use the following events.</span></span> <span data-ttu-id="7d569-159">Voit käyttää mitä tahansa valmista lomaketta, kuten **Tili**-lomaketta.</span><span class="sxs-lookup"><span data-stu-id="7d569-159">You can use any out-of-the-box form, for example, the **Account** form.</span></span>

    + <span data-ttu-id="7d569-160">Lomakkeen **OnLoad**-tapahtuma: määritä **defaultCompany**-kenttä.</span><span class="sxs-lookup"><span data-stu-id="7d569-160">**OnLoad** event for the form: Set the **defaultCompany** field.</span></span>
    + <span data-ttu-id="7d569-161">**Yritys**-kentän **OnChange**-tapahtuma: määritä **updateDefaultCompany**-kenttä.</span><span class="sxs-lookup"><span data-stu-id="7d569-161">**OnChange** event for the **Company** field: Set the **updateDefaultCompany** field.</span></span>

## <a name="apply-filtering-based-on-the-company-context"></a><span data-ttu-id="7d569-162">Suodatuksen käyttäminen yrityskontekstin perusteella</span><span class="sxs-lookup"><span data-stu-id="7d569-162">Apply filtering based on the company context</span></span>

<span data-ttu-id="7d569-163">Voit käyttää mukautettujen lomakkeiden yrityskontekstiin tai vakiolomakkeisiin lisättyihin mukautettuihin valintakenttiin perustuvaa suodatusta avaamalla lomakkeen ja ottamalla yrityssuodatuksen käyttöön **Liittyvien tietueiden suodatus** -osassa.</span><span class="sxs-lookup"><span data-stu-id="7d569-163">To apply filtering based on the company context on your custom forms or on custom lookup fields added to the standard forms, open the form and use the **Related Records Filtering** section to apply the company filter.</span></span> <span data-ttu-id="7d569-164">Tämä asetus on määritettävä jokaiselle valintakentälle, joka suodatetaan tietyn tietueen taustalla olevan yrityksen perusteella.</span><span class="sxs-lookup"><span data-stu-id="7d569-164">You must set this for each lookup field that requires filtering based on the underlying company on a given record.</span></span> <span data-ttu-id="7d569-165">Seuraavassa kuvassa on tämä asetus **Tili**-lomakkeessa.</span><span class="sxs-lookup"><span data-stu-id="7d569-165">The setting is shown for **Account** in the following illustration.</span></span>

:::image type="content" source="media/apply-company-context.png" alt-text="Yrityskontekstin käyttäminen":::

