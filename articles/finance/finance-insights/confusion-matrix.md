---
title: Koneoppimismallien tulokset (esiversio)
description: Tämä ohjeaihe sisältää tietoja sekaannusmatriiseista, luokitteluongelmista ja koneoppimismallien tarkkuudesta. Tarkoitus on parantaa koneoppimisennusteiden tulosten ymmärtämistä.
author: ShivamPandey-msft
ms.date: 06/03/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: roschlom
ms.custom: 14151
ms.assetid: 3d43ba40-780c-459a-a66f-9a01d556e674
ms.search.region: Global
ms.author: shpandey
ms.search.validFrom: 2020-07-14
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: fe652c32df9417f0f716242a24a26eabd1a16f65
ms.sourcegitcommit: 74e47075eab2b0b28f82b0d57f439719847ecb01
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 06/07/2021
ms.locfileid: "6193537"
---
# <a name="results-of-machine-learning-models-preview"></a><span data-ttu-id="42abf-104">Koneoppimismallien tulokset (esiversio)</span><span class="sxs-lookup"><span data-stu-id="42abf-104">Results of machine learning models (preview)</span></span>

[!include [banner](../includes/banner.md)]
[!include [preview banner](../includes/preview-banner.md)]

<span data-ttu-id="42abf-105">Tämä ohjeaihe sisältää tietoja sekaannusmatriiseista, luokitteluongelmista ja koneoppimismallien tarkkuudesta.</span><span class="sxs-lookup"><span data-stu-id="42abf-105">This topic discusses confusion matrices, classification problems, and accuracy in machine learning (ML) models.</span></span> <span data-ttu-id="42abf-106">Tarkoitus on parantaa koneoppimisennusteiden tulosten ymmärtämistä.</span><span class="sxs-lookup"><span data-stu-id="42abf-106">The purpose is to enhance your understanding of accuracy in ML prediction results.</span></span> <span data-ttu-id="42abf-107">Kohdeyleisöä ovat insinöörit, analysoijat ja esimiehet, jotka haluavat parantaa tietämystään ja taitojaan datatieteen parissa.</span><span class="sxs-lookup"><span data-stu-id="42abf-107">The target audience includes engineers, analysts, and managers who want to build their knowledge and skills in data science.</span></span>

## <a name="confusion-matrix"></a><span data-ttu-id="42abf-108">Sekaannusmatriisi</span><span class="sxs-lookup"><span data-stu-id="42abf-108">Confusion matrix</span></span>
<span data-ttu-id="42abf-109">Kun valvottu koneoppimisen ongelma on koulutettu aiempien tietojen joukon avulla, se testataan käyttämällä koulutusprosessin tietoja.</span><span class="sxs-lookup"><span data-stu-id="42abf-109">After a supervised ML problem is trained on a set of historical data, it's tested by using data that is withheld from the training process.</span></span> <span data-ttu-id="42abf-110">Näin voidaan vertailla koulutetun mallin ja todellisten arvojen ennusteita.</span><span class="sxs-lookup"><span data-stu-id="42abf-110">In this way, you can compare the predictions from the trained model with the actual values.</span></span> <span data-ttu-id="42abf-111">Sekaannusmatriisin avulla voidaan arvioida, miten onnistunut luokitteluongelma on ja missä se tekee virheitä (eli missä kohdassa tapahtuu sekaannus).</span><span class="sxs-lookup"><span data-stu-id="42abf-111">The confusion matrix provides a means of evaluating how successful a classification problem is and where it makes mistakes (that is, where it becomes "confused").</span></span>

<span data-ttu-id="42abf-112">Ajatellaan esimerkiksi, että tavoitteena on ennustaa joidenkin fyysisten määritteiden ja toimintamääritteiden avulla, onko lemmikki koira vai kissa.</span><span class="sxs-lookup"><span data-stu-id="42abf-112">For example, your objective is to predict whether a pet is a dog or a cat, based on some physical and behavioral attributes.</span></span> <span data-ttu-id="42abf-113">Jos testitietojoukossa on 30 koiraa ja 20 kissaa, sekaannusmatriisi saattaa muistuttaa alla olevaa kuvaa.</span><span class="sxs-lookup"><span data-stu-id="42abf-113">If you have a test dataset that contains 30 dogs and 20 cats, the confusion matrix might resemble the following illustration.</span></span>

![Lajien ennustamisen esimerkki](media/species-prediction-matrix.png)

<span data-ttu-id="42abf-115">Vihreiden solujen numerot edustavat oikeita ennusteita.</span><span class="sxs-lookup"><span data-stu-id="42abf-115">The numbers in the green cells represent correct predictions.</span></span> <span data-ttu-id="42abf-116">Kuten näemme, malli ennusti korkeamman prosenttiosuuden kuin kissoja todella on.</span><span class="sxs-lookup"><span data-stu-id="42abf-116">As you can see, the model predicted a higher percentage of the actual cats correctly.</span></span> <span data-ttu-id="42abf-117">Mallin yleinen tarkkuus on helppo laskea.</span><span class="sxs-lookup"><span data-stu-id="42abf-117">The overall accuracy of the model is easy to calculate.</span></span> <span data-ttu-id="42abf-118">Tässä tapauksessa se on 42 ÷ 50 tai 0,84.</span><span class="sxs-lookup"><span data-stu-id="42abf-118">In this case, it's 42 ÷ 50, or 0.84.</span></span>

### <a name="multi-class-classifiers-in-a-confusion-matrix"></a><span data-ttu-id="42abf-119">Usean luokan luokittelijat sekaannusmatriisissa</span><span class="sxs-lookup"><span data-stu-id="42abf-119">Multi-class classifiers in a confusion matrix</span></span>

<span data-ttu-id="42abf-120">Useimmat sekaannusmatriiseja koskevat keskustelut keskittyvät binaarisiin luokittelijoihin edellä olevan esimerkin mukaisesti.</span><span class="sxs-lookup"><span data-stu-id="42abf-120">Most discussions about the confusion matrix are focused on binary classifiers, as in the preceding example.</span></span> <span data-ttu-id="42abf-121">Tämä tapaus on erityistapaus, jossa voidaan ottaa huomioon muut mittarit, kuten herkkyys ja peruutus.</span><span class="sxs-lookup"><span data-stu-id="42abf-121">This case is a special case where other metrics can be considered, such as sensitivity and recall.</span></span>

<span data-ttu-id="42abf-122">Seuraavaksi tarkastellaan kolme tilaa omaavan talousskenarion luokitteluongelmaa.</span><span class="sxs-lookup"><span data-stu-id="42abf-122">Next, we will consider a classification problem for a finance scenario that has three states.</span></span> <span data-ttu-id="42abf-123">Malli ennustaa, maksetaanko myyntilasku kerralla, myöhässä vai erittäin paljon myöhässä.</span><span class="sxs-lookup"><span data-stu-id="42abf-123">The model predicts whether a customer invoice will be paid on time, late, or very late.</span></span> <span data-ttu-id="42abf-124">Esimerkiksi 100 testilaskun joukosta 50 maksetaan ajallaan, 35 myöhässä ja 15 erittäin paljon myöhässä.</span><span class="sxs-lookup"><span data-stu-id="42abf-124">For example, out of 100 test invoices, 50 are paid on time, 35 are paid late, and 15 are paid very late.</span></span> <span data-ttu-id="42abf-125">Tässä tapauksessa malli voi muodostaa sekaannusmatriisin, joka muistuttaa seuraavaa kuvaa.</span><span class="sxs-lookup"><span data-stu-id="42abf-125">In this case, a model might produce a confusion matrix that resembles the following illustration.</span></span>

![Malli 1](media/payment-prediction-matrix.png)<span data-ttu-id="42abf-127">]</span><span class="sxs-lookup"><span data-stu-id="42abf-127">]</span></span>

<span data-ttu-id="42abf-128">Sekaannusmalli sisältää paljon enemmän tietoja kuin yksinkertainen tarkkuusmittari.</span><span class="sxs-lookup"><span data-stu-id="42abf-128">A confusion matrix provides significantly more information than a simple accuracy metric.</span></span> <span data-ttu-id="42abf-129">Siitä huolimatta matriisi on suhteellisen helposti ymmärrettävä.</span><span class="sxs-lookup"><span data-stu-id="42abf-129">However, it's still relatively easy to understand.</span></span> <span data-ttu-id="42abf-130">Sekaannusmatriisi kertoo, onko tietojoukko tasapainossa ja ovatko tulostusluokkien määrät samat.</span><span class="sxs-lookup"><span data-stu-id="42abf-130">A confusion matrix tells you whether you have a balanced dataset where the output classes have similar counts.</span></span> <span data-ttu-id="42abf-131">Moniluokkainen skenaario kertoo, miten kaukana ennuste voi olla, kun tulostusluokat ovat ordinaaleja, kuten edellä olevassa asiakasmaksuesimerkissä.</span><span class="sxs-lookup"><span data-stu-id="42abf-131">For the multi-class scenario, it tells you how far off a prediction might be when the output classes are ordinal, as in the preceding example about customer payments.</span></span>

## <a name="model-accuracy"></a><span data-ttu-id="42abf-132">Mallin tarkkuus</span><span class="sxs-lookup"><span data-stu-id="42abf-132">Model accuracy</span></span> 
<span data-ttu-id="42abf-133">Eri tarkkuusmittareiden etu on mallin laadun kvantifioiminen.</span><span class="sxs-lookup"><span data-stu-id="42abf-133">Different accuracy metrics have the advantage of quantifying the model quality.</span></span> 

<span data-ttu-id="42abf-134">Koska tarkkuus on helposti ymmärrettävä mittari, se on hyvä aloituskohta esiteltäessä mallia muille henkilöille. Näin erityisesti, jos he eivät ole datatieteilijöitä.</span><span class="sxs-lookup"><span data-stu-id="42abf-134">Because accuracy is an easy metric to understand, it's a good starting point for explaining a model to other people, especially to users of the model who aren't data scientists.</span></span> <span data-ttu-id="42abf-135">Mallin tarkkuuden ymmärtäminen ei edellytä tilastojen ymmärtämistä.</span><span class="sxs-lookup"><span data-stu-id="42abf-135">No understanding of statistics is required to understand the model's accuracy.</span></span> <span data-ttu-id="42abf-136">Sekaannusmatriisi sisältää lisätietoja mallin suorituskyvystä.</span><span class="sxs-lookup"><span data-stu-id="42abf-136">When a confusion matrix is available, it provides further insight into the model's performance.</span></span>

<span data-ttu-id="42abf-137">Perinpohjainen ymmärtäminen edellyttää kuitenkin, että tarkkuuteen liittyvät haasteet tulee ottaa huomioon.</span><span class="sxs-lookup"><span data-stu-id="42abf-137">However, for a more thorough understanding, several challenges that are associated with accuracy should be noted.</span></span> <span data-ttu-id="42abf-138">Mittarin hyödyllisyys riippuu ongelman kontekstista.</span><span class="sxs-lookup"><span data-stu-id="42abf-138">The usefulness of the metric depends on the context of the problem.</span></span> <span data-ttu-id="42abf-139">Mallin suorituskyvyn yhteydessä halutaan usein tietää, miten hyvä malli on.</span><span class="sxs-lookup"><span data-stu-id="42abf-139">A question that often arises in relation to model performance is, "How good is the model?"</span></span> <span data-ttu-id="42abf-140">Vastaus tähän kysymykseen ei kuitenkaan välttämättä ole yksinkertainen.</span><span class="sxs-lookup"><span data-stu-id="42abf-140">However, the answer to this question isn't necessarily straightforward.</span></span> <span data-ttu-id="42abf-141">Ota huomioon seuraava sekaannusmatriisi (malli 2).</span><span class="sxs-lookup"><span data-stu-id="42abf-141">Consider the following confusion matrix (model 2).</span></span>

![Maksun ennustemalli ja suuri näytekoko](media/payment-prediction-matrix-2.png)

<span data-ttu-id="42abf-143">Nopea laskenta osoittaa, että tämän mallin tarkkuus on (70 + 10 + 3) ÷ 100 tai 0,83.</span><span class="sxs-lookup"><span data-stu-id="42abf-143">A quick calculation shows that this model's accuracy is (70 + 10 + 3) ÷ 100, or 0.83.</span></span> <span data-ttu-id="42abf-144">Nopeasti ajateltuna näyttää siltä, että tämä on parempi tulos kuin edellisessä usean luokan mallissa (malli 1), jonka tarkkuus on 0,73.</span><span class="sxs-lookup"><span data-stu-id="42abf-144">On the surface, this result seems better than result for the previous multi-class model (model 1), which has an accuracy of 0.73.</span></span> <span data-ttu-id="42abf-145">Mutta onko tämä parempi?</span><span class="sxs-lookup"><span data-stu-id="42abf-145">But is it better?</span></span>

<span data-ttu-id="42abf-146">Ota tämän kysymyksen tarkastelussa huomioon luonnollisen arvauksen tarkkuus.</span><span class="sxs-lookup"><span data-stu-id="42abf-146">To begin to address this question, consider the accuracy of a naïve guess.</span></span> <span data-ttu-id="42abf-147">Luokitteluongelmassa yksinkertainen arvaus ennustaa aina yleisimmän luokan.</span><span class="sxs-lookup"><span data-stu-id="42abf-147">For a classification problem, a simple guess will always predict the most common class.</span></span> <span data-ttu-id="42abf-148">Mallissa 1 tämä arvaus on "ajoissa". Se tuottaa tarkkuudeksi 0,50.</span><span class="sxs-lookup"><span data-stu-id="42abf-148">For model 1, that guess will be "on time," and it will produce an accuracy of 0.50.</span></span> <span data-ttu-id="42abf-149">Mallissa 2 tämä arvaus on myös "ajoissa". Se tuottaa tarkkuudeksi 0,80.</span><span class="sxs-lookup"><span data-stu-id="42abf-149">The guess for model 2 will also be "on time," and it will produce an accuracy of 0.80.</span></span> <span data-ttu-id="42abf-150">Koska malli 1 parantaa luonnollista arvausta arvolla 0,73 – 0,50 = 0,23 ja malli 2 arvolla 0,83 – 0,80 = 0,03, malli 1 on näistä parempi, vaikka sen tarkkuus on alhaisempi.</span><span class="sxs-lookup"><span data-stu-id="42abf-150">Because model 1 improves on the naïve guess by 0.73 – 0.50 = 0.23, whereas model 2 improves on the naïve guess by 0.83 – 0.80 = 0.03, model 1 is a better model, even though it has lower accuracy.</span></span> <span data-ttu-id="42abf-151">Laskelma paljastaa, että mallin laadun tehokas arviointi edellyttää tarkkuusarvoa enemmän tietoja.</span><span class="sxs-lookup"><span data-stu-id="42abf-151">The calculation reveals that effective assessment of a model's quality requires more context than the accuracy value.</span></span>

<span data-ttu-id="42abf-152">Toinen näkökulma tulee ottaa huomioon.</span><span class="sxs-lookup"><span data-stu-id="42abf-152">Another aspect is worth noting.</span></span> <span data-ttu-id="42abf-153">Ota huomioon skenaario, jossa potilaan sairauden havaitsemisessa käytetään lääketieteellistä testiä.</span><span class="sxs-lookup"><span data-stu-id="42abf-153">Consider a scenario where a medical test is used to detect a disease in a patient.</span></span> <span data-ttu-id="42abf-154">Tämä ongelma on binaarinen luokitteluongelma, jossa positiivinen tulos osoittaa, että potilaalla on kyseinen sairaus.</span><span class="sxs-lookup"><span data-stu-id="42abf-154">This problem is a binary classification problem where a positive result indicates that the patient has the disease.</span></span> <span data-ttu-id="42abf-155">Tässä skenaariossa on otettava huomioon seuraavien virheiden vaikutus:</span><span class="sxs-lookup"><span data-stu-id="42abf-155">In this scenario, you must think about the impact of the following errors:</span></span>

- <span data-ttu-id="42abf-156">Virheelliset positiiviset, joissa testi osoittaa potilaan olevan sairas, mutta oikeasti hän ei ole sairas.</span><span class="sxs-lookup"><span data-stu-id="42abf-156">False positives, where the test says that a patient has the disease, but the patient doesn't really have it.</span></span>
- <span data-ttu-id="42abf-157">Virheelliset negatiiviset, joissa testi osoittaa, että potilas ei ole sairas, vaikka tämä oikeasti on.</span><span class="sxs-lookup"><span data-stu-id="42abf-157">False negatives, where the test says that a patient doesn't have the disease, but the patient really does have it.</span></span>

<span data-ttu-id="42abf-158">On selvää, että kumpikaan tapaus ei ole toivottu tulos, mutta kumpi on pahempi?</span><span class="sxs-lookup"><span data-stu-id="42abf-158">Obviously, both types of error are undesirable, but which is worse?</span></span> <span data-ttu-id="42abf-159">Tämä riippuu tilanteesta.</span><span class="sxs-lookup"><span data-stu-id="42abf-159">Again, it depends.</span></span> <span data-ttu-id="42abf-160">Jos kysymyksessä on henkeä uhkaava sairaus, joka edellyttää nopeaa hoitoa, virheellisten negatiivisten minimoiminen (toivottavasti lisätestien jälkeen) on tärkeintä.</span><span class="sxs-lookup"><span data-stu-id="42abf-160">In the case of a life-threatening disease that requires fast treatment, minimization of false negatives (hopefully followed by additional tests) takes priority.</span></span> <span data-ttu-id="42abf-161">Muissa vähemmän kriittisissä tilanteissa mallien tekijät voivat minimoida virheelliset positiiviset sen sijaan.</span><span class="sxs-lookup"><span data-stu-id="42abf-161">In other, less critical situations, the model creators might minimize false positives instead.</span></span> <span data-ttu-id="42abf-162">Joka tapauksessa on perusteltua sanoa, että mallin laadun määrittäminen tehokkaasti edellyttää, että tietoja on tarkkuusmittaria enemmän.</span><span class="sxs-lookup"><span data-stu-id="42abf-162">At any rate, a reasonable conclusion is that to effectively determine a model's quality, you must have more information than an accuracy metric provides.</span></span>

### <a name="recommendations"></a><span data-ttu-id="42abf-163">Suositukset</span><span class="sxs-lookup"><span data-stu-id="42abf-163">Recommendations</span></span>

<span data-ttu-id="42abf-164">Tarkkuus on tärkeä työkalu kommunikoitaessa domain-asiantuntijoiden kanssa, jotka eivät tunne tilastoja.</span><span class="sxs-lookup"><span data-stu-id="42abf-164">Accuracy is an important tool for communicating with domain experts who aren't familiar with statistics.</span></span> <span data-ttu-id="42abf-165">Jotta tiedoista on hyötyä, on tärkeää antaa lisätietoja tarkkuuden arvon kanssa.</span><span class="sxs-lookup"><span data-stu-id="42abf-165">However, to make the information useful, it's critical that additional context be provided together with the accuracy value.</span></span>

<span data-ttu-id="42abf-166">Maksuennusteskenaariossa koneoppimismallille voidaan asettaa tavoite, joka sisältää eri maksutoiminnan tekijöitä.</span><span class="sxs-lookup"><span data-stu-id="42abf-166">For the payment prediction scenario, you can set a target for the ML model that includes factors in different payment behaviors.</span></span> <span data-ttu-id="42abf-167">Tavoite on, että mallin tulisi parantaa luonnollista arvausta vähentämällä virheellisten vastausten määrää vähintään 50 prosentilla.</span><span class="sxs-lookup"><span data-stu-id="42abf-167">The target is that the model should improve upon a naïve guess by reducing the number of incorrect answers by at least 50 percent.</span></span> <span data-ttu-id="42abf-168">Toisin sanoen halutaan, että kohdetavoite jakaa eron luonnollisen arvauksen ja 100 prosentin välillä.</span><span class="sxs-lookup"><span data-stu-id="42abf-168">In other words, you want a target accuracy that splits the different between the accuracy of a naïve guess and 100 percent.</span></span>

<span data-ttu-id="42abf-169">Seuraavassa taulukossa on yhteenveto tämän ohjeaiheen sekaannusmatriisien periaatteesta.</span><span class="sxs-lookup"><span data-stu-id="42abf-169">The following table summarizes this principle for the confusion matrices in this topic.</span></span>

| <span data-ttu-id="42abf-170">Malli</span><span class="sxs-lookup"><span data-stu-id="42abf-170">Model</span></span>   | <span data-ttu-id="42abf-171">Luonnollinen arvaus</span><span class="sxs-lookup"><span data-stu-id="42abf-171">Naïve guess</span></span> | <span data-ttu-id="42abf-172">Tavoite</span><span class="sxs-lookup"><span data-stu-id="42abf-172">Target</span></span> | <span data-ttu-id="42abf-173">Mallin tarkkuus</span><span class="sxs-lookup"><span data-stu-id="42abf-173">Model accuracy</span></span> | <span data-ttu-id="42abf-174">Onko tavoite täyttynyt?</span><span class="sxs-lookup"><span data-stu-id="42abf-174">Is the goal met?</span></span>                                          |
|---------|-------------|--------|----------------|-----------------------------------------------------------|
| <span data-ttu-id="42abf-175">Malli 1</span><span class="sxs-lookup"><span data-stu-id="42abf-175">Model 1</span></span> | <span data-ttu-id="42abf-176">0.50</span><span class="sxs-lookup"><span data-stu-id="42abf-176">0.50</span></span>        | <span data-ttu-id="42abf-177">0.75</span><span class="sxs-lookup"><span data-stu-id="42abf-177">0.75</span></span>   | <span data-ttu-id="42abf-178">0.73</span><span class="sxs-lookup"><span data-stu-id="42abf-178">0.73</span></span>           | <span data-ttu-id="42abf-179">Lähes.</span><span class="sxs-lookup"><span data-stu-id="42abf-179">Almost.</span></span> <span data-ttu-id="42abf-180">Tämä malli parantaa arvauksia huomattavasti.</span><span class="sxs-lookup"><span data-stu-id="42abf-180">This model significantly improves upon the guess.</span></span> |
| <span data-ttu-id="42abf-181">Malli 2</span><span class="sxs-lookup"><span data-stu-id="42abf-181">Model 2</span></span> | <span data-ttu-id="42abf-182">0.80</span><span class="sxs-lookup"><span data-stu-id="42abf-182">0.80</span></span>        | <span data-ttu-id="42abf-183">0.90</span><span class="sxs-lookup"><span data-stu-id="42abf-183">0.90</span></span>   | <span data-ttu-id="42abf-184">0.83</span><span class="sxs-lookup"><span data-stu-id="42abf-184">0.83</span></span>           | <span data-ttu-id="42abf-185">Nro</span><span class="sxs-lookup"><span data-stu-id="42abf-185">No.</span></span> <span data-ttu-id="42abf-186">Parannus on tarpeen.</span><span class="sxs-lookup"><span data-stu-id="42abf-186">Improvement is required.</span></span>                              |

## <a name="classification-f1-accuracy"></a><span data-ttu-id="42abf-187">Luokituksen F1-tarkkuus</span><span class="sxs-lookup"><span data-stu-id="42abf-187">Classification F1 accuracy</span></span>

<span data-ttu-id="42abf-188">Tässä ohjeaiheessa käsitellään luokituksen koneoppimisen suorituskyvyn lisämittaria, joka on nyt nimeltään F1-tarkkuus.</span><span class="sxs-lookup"><span data-stu-id="42abf-188">The final consideration in this topic is a more advanced measure of classification ML performance that is known as F1 accuracy.</span></span>

<span data-ttu-id="42abf-189">Ennen kuin F1-tarkkuus voidaan määrittää, on otettava käyttöön kaksi lisämittaria: tarkkuus ja saanti.</span><span class="sxs-lookup"><span data-stu-id="42abf-189">Before F1 accuracy can be defined, two additional metrics must be introduced: precision and recall.</span></span> <span data-ttu-id="42abf-190">Tarkkuus ilmaisee, kuinka monta positiiviseksi määritettyä ennustetta on määritetty oikein.</span><span class="sxs-lookup"><span data-stu-id="42abf-190">Precision indicates how many of the total number of predictions that are specified as positive are correctly assigned.</span></span> <span data-ttu-id="42abf-191">Tätä mittaria kutsutaan myös positiiviseksi ennakoivaksi arvoksi.</span><span class="sxs-lookup"><span data-stu-id="42abf-191">This metric is also known as the positive predictive value.</span></span> <span data-ttu-id="42abf-192">Saanti on niiden todellisten positiivisten tapausten määrä, jotka ennustettiin oikein.</span><span class="sxs-lookup"><span data-stu-id="42abf-192">Recall is the total number of the actual positive cases that were predicted correctly.</span></span> <span data-ttu-id="42abf-193">Tätä mittaria kutsutaan myös herkkyydeksi.</span><span class="sxs-lookup"><span data-stu-id="42abf-193">This metric is also known as sensitivity.</span></span>

<span data-ttu-id="42abf-194">[![Todelliset tulokset vs. virheelliset tulokset](./media/tn-fn.png)](./media/tn-fn.png)</span><span class="sxs-lookup"><span data-stu-id="42abf-194">[![True results vs. false results](./media/tn-fn.png)](./media/tn-fn.png)</span></span>

<span data-ttu-id="42abf-195">Edellä olevan kuvan sekaannusmatriisissa nämä mittarit lasketaan seuraavalla tavalla:</span><span class="sxs-lookup"><span data-stu-id="42abf-195">In the confusion matrix in the preceding illustration, these metrics are calculated in the following way:</span></span>

- <span data-ttu-id="42abf-196">Tarkkuus = TP ÷ (TP + FP)</span><span class="sxs-lookup"><span data-stu-id="42abf-196">Precision = TP ÷ (TP + FP)</span></span>
- <span data-ttu-id="42abf-197">Saanti = TP ÷ (TP + FN)</span><span class="sxs-lookup"><span data-stu-id="42abf-197">Recall = TP ÷ (TP + FN)</span></span>

<span data-ttu-id="42abf-198">F1-mittari yhdistää tarkkuuden ja saannin.</span><span class="sxs-lookup"><span data-stu-id="42abf-198">The F1 measure combines precision and recall.</span></span> <span data-ttu-id="42abf-199">Tuloksena on kahden arvon harmoninen keskiarvo.</span><span class="sxs-lookup"><span data-stu-id="42abf-199">The result is the harmonic mean of the two values.</span></span> <span data-ttu-id="42abf-200">Se lasketaan seuraavalla tavalla:</span><span class="sxs-lookup"><span data-stu-id="42abf-200">It's calculated in the following way:</span></span>

- <span data-ttu-id="42abf-201">F1 = 2 × (tarkkuus × saanti) ÷ (tarkkuus + saanti)</span><span class="sxs-lookup"><span data-stu-id="42abf-201">F1 = 2 × (Precision × Recall) ÷ (Precision + Recall)</span></span>

<span data-ttu-id="42abf-202">Alla on konkreettinen esimerkki.</span><span class="sxs-lookup"><span data-stu-id="42abf-202">Let's look at a concrete example.</span></span> <span data-ttu-id="42abf-203">Aiemmin tässä ohjeaiheessa oli esimerkki, jossa ennustettiin eläin koiraksi tai kissaksi.</span><span class="sxs-lookup"><span data-stu-id="42abf-203">Earlier in this topic, there was an example of a model that predicted whether an animal was a dog or a cat.</span></span> <span data-ttu-id="42abf-204">Kuva näytetään myös tässä.</span><span class="sxs-lookup"><span data-stu-id="42abf-204">The illustration is repeated here.</span></span>

<span data-ttu-id="42abf-205">[![Lajien ennustamisen esimerkki (toistettu)](./media/species-prediction-matrix.png)](./media/species-prediction-matrix.png)</span><span class="sxs-lookup"><span data-stu-id="42abf-205">[![Species prediction example (repeated)](./media/species-prediction-matrix.png)](./media/species-prediction-matrix.png)</span></span>

<span data-ttu-id="42abf-206">Tässä ovat tulokset, jos koira on positiivinen vastaus.</span><span class="sxs-lookup"><span data-stu-id="42abf-206">Here are the results if "Dog" is used as the positive answer.</span></span>

- <span data-ttu-id="42abf-207">Tarkkuus = 24 ÷ (24 + 2) = 0,9231</span><span class="sxs-lookup"><span data-stu-id="42abf-207">Precision = 24 ÷ (24 + 2) = 0.9231</span></span>
- <span data-ttu-id="42abf-208">Saanti = 24 ÷ (24 + 6) = 0,8</span><span class="sxs-lookup"><span data-stu-id="42abf-208">Recall = 24 ÷ (24 + 6) = 0.8</span></span>
- <span data-ttu-id="42abf-209">F1 = 2 × (0,9231 × 0,8) ÷ (0,9231 + 0,8) = 0,8572</span><span class="sxs-lookup"><span data-stu-id="42abf-209">F1 = 2 × (0.9231 × 0.8) ÷ (0.9231 + 0.8) = 0.8572</span></span>

<span data-ttu-id="42abf-210">Kuten nähdään, F1-arvo on tarkkuuden ja saannin välissä.</span><span class="sxs-lookup"><span data-stu-id="42abf-210">As you can see, the F1 value is between the values for precision and recall.</span></span>

<span data-ttu-id="42abf-211">Vaikka F1-tarkkuuden ymmärtäminen ei ole helppoa, se tuo lisäarvoa tarkkuuden perusarvoon.</span><span class="sxs-lookup"><span data-stu-id="42abf-211">Although F1 accuracy isn't as easy to understand, it adds nuance to the basic accuracy number.</span></span> <span data-ttu-id="42abf-212">Se voi myös auttaa epätasapainossa olevien tietojoukkojen käsittelemisessä seuraavan keskustelun tapaan.</span><span class="sxs-lookup"><span data-stu-id="42abf-212">It can also help with unbalanced datasets, as the following discussion will show.</span></span>

<span data-ttu-id="42abf-213">Tämän ohjeaiheen [Mallin tarkkuus](#model-accuracy) -osassa vertailtiin seuraavaa kahta sekaannusmatriisia.</span><span class="sxs-lookup"><span data-stu-id="42abf-213">The [Model accuracy](#model-accuracy) section of this topic compared the following two confusion matrices.</span></span> <span data-ttu-id="42abf-214">Vaikka ensimmäisen mallin tarkkuus on toista alhaisempi, se arvotettiin hyödyllisemmäksi malliksi, koska se näytti enemmän parannuksia kuin ajallaan tehdyn maksun oletusarvaus.</span><span class="sxs-lookup"><span data-stu-id="42abf-214">Even though the first model had lower accuracy, it was deemed a more useful model because it showed more improvement than the default guess of an on-time payment.</span></span>

![Maksuennuste vs. todellisten arvojen esimerkki](media/payment-prediction-matrix.png)

![Maksun ennustemalli ja suuri näytekoko (toistettu)](media/payment-prediction-matrix-2.png)

<span data-ttu-id="42abf-217">Katsotaan, miten näitä kahta mallia verrataan, kun käytetään F1-pisteitä.</span><span class="sxs-lookup"><span data-stu-id="42abf-217">Let's see how these two models compare when the F1 score is used.</span></span> <span data-ttu-id="42abf-218">F1-pisteitä käytetään kunkin tilan tarkkuudessa ja saannissa. F1-makrolaskelma määrittää F1-pisteiden keskiarvot tiloissa, jotta saadaan selville yleiset F1-pisteet.</span><span class="sxs-lookup"><span data-stu-id="42abf-218">The F1 score factors in precision and recall for each state, and the F1 macro calculation then averages the F1 score across the states to determine an overall F1 score.</span></span> <span data-ttu-id="42abf-219">F1-muuttujia on muitakin, mutta makroversioon keskittyminen on kiinnostavinta, koska kaikkia kolmea tilaa käsitellään yhtä paljon.</span><span class="sxs-lookup"><span data-stu-id="42abf-219">There are other F1 variants, but it's of greater interest to consider the macro version, given the equal consideration that is given to all three states.</span></span>

<span data-ttu-id="42abf-220">Laskelmien yksinkertaistamiseksi on luotu mallitaulukoita, jotka vastaavat todellisia ja ennustettuja arvoja.</span><span class="sxs-lookup"><span data-stu-id="42abf-220">To simplify the calculations, sample arrays were built to match the actual and predicted values.</span></span> <span data-ttu-id="42abf-221">Näissä taulukoissa käytettiin Pythonin sklearn-mittarikirjastoa arvojen laskemisessa.</span><span class="sxs-lookup"><span data-stu-id="42abf-221">These arrays used sklearn's metrics library in Python to calculate the values.</span></span> <span data-ttu-id="42abf-222">Tulos näyttää tältä.</span><span class="sxs-lookup"><span data-stu-id="42abf-222">Here is the result.</span></span>

| <span data-ttu-id="42abf-223">Malli</span><span class="sxs-lookup"><span data-stu-id="42abf-223">Model</span></span>   | <span data-ttu-id="42abf-224">Luonnollinen arvaus</span><span class="sxs-lookup"><span data-stu-id="42abf-224">Naive guess</span></span> | <span data-ttu-id="42abf-225">Tarkkuus</span><span class="sxs-lookup"><span data-stu-id="42abf-225">Accuracy</span></span> | <span data-ttu-id="42abf-226">F1-makro</span><span class="sxs-lookup"><span data-stu-id="42abf-226">F1 macro</span></span> |
|---------|-------------|----------|----------|
| <span data-ttu-id="42abf-227">Malli 1</span><span class="sxs-lookup"><span data-stu-id="42abf-227">Model 1</span></span> | <span data-ttu-id="42abf-228">0.5</span><span class="sxs-lookup"><span data-stu-id="42abf-228">0.5</span></span>         | <span data-ttu-id="42abf-229">0.73</span><span class="sxs-lookup"><span data-stu-id="42abf-229">0.73</span></span>     | <span data-ttu-id="42abf-230">0.67</span><span class="sxs-lookup"><span data-stu-id="42abf-230">0.67</span></span>     |
| <span data-ttu-id="42abf-231">Malli 2</span><span class="sxs-lookup"><span data-stu-id="42abf-231">Model 2</span></span> | <span data-ttu-id="42abf-232">0.80</span><span class="sxs-lookup"><span data-stu-id="42abf-232">0.80</span></span>        | <span data-ttu-id="42abf-233">0.83</span><span class="sxs-lookup"><span data-stu-id="42abf-233">0.83</span></span>     | <span data-ttu-id="42abf-234">0.66</span><span class="sxs-lookup"><span data-stu-id="42abf-234">0.66</span></span>     |

<span data-ttu-id="42abf-235">Lisätietoja tämän laskelman toiminnasta on tässä mallin 1 sklearn-mittareiden luokitteluraportissa.</span><span class="sxs-lookup"><span data-stu-id="42abf-235">For more detail about how this calculation works, here is the sklearn.metrics classification report for model 1.</span></span> <span data-ttu-id="42abf-236">Nämä kolme tilaa (Ajoissa, Myöhässä ja Erittäin paljon myöhässä) kuvataan riveillä 1, 2 ja 3.</span><span class="sxs-lookup"><span data-stu-id="42abf-236">The three states, "On time," "Late," and "Very late," are represented by the rows that are labeled 1, 2, and 3, respectively.</span></span> <span data-ttu-id="42abf-237">Makron keskiarvo on f1-pisteet-sarakkeen keskiarvo.</span><span class="sxs-lookup"><span data-stu-id="42abf-237">The macro average is just the average of the "f1-score" column.</span></span>

| &nbsp;    | <span data-ttu-id="42abf-238">tarkkuus</span><span class="sxs-lookup"><span data-stu-id="42abf-238">precision</span></span> | <span data-ttu-id="42abf-239">saanti</span><span class="sxs-lookup"><span data-stu-id="42abf-239">recall</span></span>   | <span data-ttu-id="42abf-240">f1-pisteet</span><span class="sxs-lookup"><span data-stu-id="42abf-240">f1-score</span></span> |
|-----------|-----------|----------|----------|
| <span data-ttu-id="42abf-241">**1**</span><span class="sxs-lookup"><span data-stu-id="42abf-241">**1**</span></span>     | <span data-ttu-id="42abf-242">0.83</span><span class="sxs-lookup"><span data-stu-id="42abf-242">0.83</span></span>      | <span data-ttu-id="42abf-243">0.80</span><span class="sxs-lookup"><span data-stu-id="42abf-243">0.80</span></span>     | <span data-ttu-id="42abf-244">0.82</span><span class="sxs-lookup"><span data-stu-id="42abf-244">0.82</span></span>     |
| <span data-ttu-id="42abf-245">**2**</span><span class="sxs-lookup"><span data-stu-id="42abf-245">**2**</span></span>     | <span data-ttu-id="42abf-246">0.68</span><span class="sxs-lookup"><span data-stu-id="42abf-246">0.68</span></span>      | <span data-ttu-id="42abf-247">0.71</span><span class="sxs-lookup"><span data-stu-id="42abf-247">0.71</span></span>     | <span data-ttu-id="42abf-248">0.69</span><span class="sxs-lookup"><span data-stu-id="42abf-248">0.69</span></span>     |
| <span data-ttu-id="42abf-249">**3**</span><span class="sxs-lookup"><span data-stu-id="42abf-249">**3**</span></span>     | <span data-ttu-id="42abf-250">0.50</span><span class="sxs-lookup"><span data-stu-id="42abf-250">0.50</span></span>      | <span data-ttu-id="42abf-251">0.50</span><span class="sxs-lookup"><span data-stu-id="42abf-251">0.50</span></span>     | <span data-ttu-id="42abf-252">0.50</span><span class="sxs-lookup"><span data-stu-id="42abf-252">0.50</span></span>     |

<span data-ttu-id="42abf-253">Näiden kahden mallin F1-makron tarkkuuspisteet ovat lähes samat, kuten tuloksista nähdään.</span><span class="sxs-lookup"><span data-stu-id="42abf-253">As these results show, the two models have nearly identical F1 macro accuracy scores.</span></span> <span data-ttu-id="42abf-254">Tässä ja useassa muussa tapauksessa F1-tarkkuus on muita osoittimia parempi mallin ominaisuuden osoitin.</span><span class="sxs-lookup"><span data-stu-id="42abf-254">In this and many other cases, F1 accuracy provides a better indicator of a model's capability.</span></span> <span data-ttu-id="42abf-255">Tulosten tulkinta tarkkuuden osalta edellyttää, että käyttäjä ymmärtää mallin tärkeimmät ominaisuudet.</span><span class="sxs-lookup"><span data-stu-id="42abf-255">As for accuracy, interpretation of the results requires that you understand what is most important to consider in the model.</span></span>

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
