---
title: Koneoppimismallien tulokset (esiversio)
description: Tämä ohjeaihe sisältää tietoja sekaannusmatriiseista, luokitteluongelmista ja koneoppimismallien tarkkuudesta. Tarkoitus on parantaa koneoppimisennusteiden tulosten ymmärtämistä.
author: ShivamPandey-msft
manager: AnnBe
ms.date: 06/05/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: roschlom
ms.search.scope: Core, Operations
ms.custom: 14151
ms.assetid: 3d43ba40-780c-459a-a66f-9a01d556e674
ms.search.region: Global
ms.author: shpandey
ms.search.validFrom: 2020-07-14
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: 6a1620c33ee1e23a79ef5413afebdee332aa82b6
ms.sourcegitcommit: deb711c92251ed48cdf20ea514d03461c26a2262
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 11/25/2020
ms.locfileid: "4645014"
---
# <a name="results-of-machine-learning-models-preview"></a><span data-ttu-id="1edf4-104">Koneoppimismallien tulokset (esiversio)</span><span class="sxs-lookup"><span data-stu-id="1edf4-104">Results of machine learning models (preview)</span></span>

[!include [banner](../includes/banner.md)]
[!include [preview banner](../includes/preview-banner.md)]

<span data-ttu-id="1edf4-105">Tämä ohjeaihe sisältää tietoja sekaannusmatriiseista, luokitteluongelmista ja koneoppimismallien tarkkuudesta.</span><span class="sxs-lookup"><span data-stu-id="1edf4-105">This topic discusses confusion matrices, classification problems, and accuracy in machine learning (ML) models.</span></span> <span data-ttu-id="1edf4-106">Tarkoitus on parantaa koneoppimisennusteiden tulosten ymmärtämistä.</span><span class="sxs-lookup"><span data-stu-id="1edf4-106">The purpose is to enhance your understanding of accuracy in ML prediction results.</span></span> <span data-ttu-id="1edf4-107">Kohdeyleisöä ovat insinöörit, analysoijat ja esimiehet, jotka haluavat parantaa tietämystään ja taitojaan datatieteen parissa.</span><span class="sxs-lookup"><span data-stu-id="1edf4-107">The target audience includes engineers, analysts, and managers who want to build their knowledge and skills in data science.</span></span>

## <a name="confusion-matrix"></a><span data-ttu-id="1edf4-108">Sekaannusmatriisi</span><span class="sxs-lookup"><span data-stu-id="1edf4-108">Confusion matrix</span></span>
<span data-ttu-id="1edf4-109">Kun valvottu koneoppimisen ongelma on koulutettu aiempien tietojen joukon avulla, se testataan käyttämällä koulutusprosessin tietoja.</span><span class="sxs-lookup"><span data-stu-id="1edf4-109">After a supervised ML problem is trained on a set of historical data, it's tested by using data that is withheld from the training process.</span></span> <span data-ttu-id="1edf4-110">Näin voidaan vertailla koulutetun mallin ja todellisten arvojen ennusteita.</span><span class="sxs-lookup"><span data-stu-id="1edf4-110">In this way, you can compare the predictions from the trained model with the actual values.</span></span> <span data-ttu-id="1edf4-111">Sekaannusmatriisin avulla voidaan arvioida, miten onnistunut luokitteluongelma on ja missä se tekee virheitä (eli missä kohdassa tapahtuu sekaannus).</span><span class="sxs-lookup"><span data-stu-id="1edf4-111">The confusion matrix provides a means of evaluating how successful a classification problem is and where it makes mistakes (that is, where it becomes "confused").</span></span>

<span data-ttu-id="1edf4-112">Ajatellaan esimerkiksi, että tavoitteena on ennustaa joidenkin fyysisten määritteiden ja toimintamääritteiden avulla, onko lemmikki koira vai kissa.</span><span class="sxs-lookup"><span data-stu-id="1edf4-112">For example, your objective is to predict whether a pet is a dog or a cat, based on some physical and behavioral attributes.</span></span> <span data-ttu-id="1edf4-113">Jos testitietojoukossa on 30 koiraa ja 20 kissaa, sekaannusmatriisi saattaa muistuttaa alla olevaa kuvaa.</span><span class="sxs-lookup"><span data-stu-id="1edf4-113">If you have a test dataset that contains 30 dogs and 20 cats, the confusion matrix might resemble the following illustration.</span></span>

<span data-ttu-id="1edf4-114">[![Lajien ennustamisen esimerkki](./media/species-prediction-matrix.png)](./media/species-prediction-matrix.png)</span><span class="sxs-lookup"><span data-stu-id="1edf4-114">[![Species prediction example](./media/species-prediction-matrix.png)](./media/species-prediction-matrix.png)</span></span>

<span data-ttu-id="1edf4-115">Vihreiden solujen numerot edustavat oikeita ennusteita.</span><span class="sxs-lookup"><span data-stu-id="1edf4-115">The numbers in the green cells represent correct predictions.</span></span> <span data-ttu-id="1edf4-116">Kuten näemme, malli ennusti korkeamman prosenttiosuuden kuin kissoja todella on.</span><span class="sxs-lookup"><span data-stu-id="1edf4-116">As you can see, the model predicted a higher percentage of the actual cats correctly.</span></span> <span data-ttu-id="1edf4-117">Mallin yleinen tarkkuus on helppo laskea.</span><span class="sxs-lookup"><span data-stu-id="1edf4-117">The overall accuracy of the model is easy to calculate.</span></span> <span data-ttu-id="1edf4-118">Tässä tapauksessa se on 42 ÷ 50 tai 0,84.</span><span class="sxs-lookup"><span data-stu-id="1edf4-118">In this case, it's 42 ÷ 50, or 0.84.</span></span>

### <a name="multi-class-classifiers-in-a-confusion-matrix"></a><span data-ttu-id="1edf4-119">Usean luokan luokittelijat sekaannusmatriisissa</span><span class="sxs-lookup"><span data-stu-id="1edf4-119">Multi-class classifiers in a confusion matrix</span></span>

<span data-ttu-id="1edf4-120">Useimmat sekaannusmatriiseja koskevat keskustelut keskittyvät binaarisiin luokittelijoihin edellä olevan esimerkin mukaisesti.</span><span class="sxs-lookup"><span data-stu-id="1edf4-120">Most discussions about the confusion matrix are focused on binary classifiers, as in the preceding example.</span></span> <span data-ttu-id="1edf4-121">Tämä tapaus on erityistapaus, jossa voidaan ottaa huomioon muut mittarit, kuten herkkyys ja peruutus.</span><span class="sxs-lookup"><span data-stu-id="1edf4-121">This case is a special case where other metrics can be considered, such as sensitivity and recall.</span></span>

<span data-ttu-id="1edf4-122">Seuraavaksi tarkastellaan kolme tilaa omaavan talousskenarion luokitteluongelmaa.</span><span class="sxs-lookup"><span data-stu-id="1edf4-122">Next, we will consider a classification problem for a finance scenario that has three states.</span></span> <span data-ttu-id="1edf4-123">Malli ennustaa, maksetaanko myyntilasku kerralla, myöhässä vai erittäin paljon myöhässä.</span><span class="sxs-lookup"><span data-stu-id="1edf4-123">The model predicts whether a customer invoice will be paid on time, late, or very late.</span></span> <span data-ttu-id="1edf4-124">Esimerkiksi 100 testilaskun joukosta 50 maksetaan ajallaan, 35 myöhässä ja 15 erittäin paljon myöhässä.</span><span class="sxs-lookup"><span data-stu-id="1edf4-124">For example, out of 100 test invoices, 50 are paid on time, 35 are paid late, and 15 are paid very late.</span></span> <span data-ttu-id="1edf4-125">Tässä tapauksessa malli voi muodostaa sekaannusmatriisin, joka muistuttaa seuraavaa kuvaa.</span><span class="sxs-lookup"><span data-stu-id="1edf4-125">In this case, a model might produce a confusion matrix that resembles the following illustration.</span></span>

<span data-ttu-id="1edf4-126">[![Malli 1](./media/payment-prediction-matrix.png)](payment-prediction-matrix.png) Malli 1</span><span class="sxs-lookup"><span data-stu-id="1edf4-126">[![Model 1](./media/payment-prediction-matrix.png)](payment-prediction-matrix.png) Model 1</span></span>

<span data-ttu-id="1edf4-127">Sekaannusmalli sisältää paljon enemmän tietoja kuin yksinkertainen tarkkuusmittari.</span><span class="sxs-lookup"><span data-stu-id="1edf4-127">A confusion matrix provides significantly more information than a simple accuracy metric.</span></span> <span data-ttu-id="1edf4-128">Siitä huolimatta matriisi on suhteellisen helposti ymmärrettävä.</span><span class="sxs-lookup"><span data-stu-id="1edf4-128">However, it's still relatively easy to understand.</span></span> <span data-ttu-id="1edf4-129">Sekaannusmatriisi kertoo, onko tietojoukko tasapainossa ja ovatko tulostusluokkien määrät samat.</span><span class="sxs-lookup"><span data-stu-id="1edf4-129">A confusion matrix tells you whether you have a balanced dataset where the output classes have similar counts.</span></span> <span data-ttu-id="1edf4-130">Moniluokkainen skenaario kertoo, miten kaukana ennuste voi olla, kun tulostusluokat ovat ordinaaleja, kuten edellä olevassa asiakasmaksuesimerkissä.</span><span class="sxs-lookup"><span data-stu-id="1edf4-130">For the multi-class scenario, it tells you how far off a prediction might be when the output classes are ordinal, as in the preceding example about customer payments.</span></span>

## <a name="model-accuracy"></a><span data-ttu-id="1edf4-131">Mallin tarkkuus</span><span class="sxs-lookup"><span data-stu-id="1edf4-131">Model accuracy</span></span> 
<span data-ttu-id="1edf4-132">Eri tarkkuusmittareiden etu on mallin laadun kvantifioiminen.</span><span class="sxs-lookup"><span data-stu-id="1edf4-132">Different accuracy metrics have the advantage of quantifying the model quality.</span></span> 

<span data-ttu-id="1edf4-133">Koska tarkkuus on helposti ymmärrettävä mittari, se on hyvä aloituskohta esiteltäessä mallia muille henkilöille. Näin erityisesti, jos he eivät ole datatieteilijöitä.</span><span class="sxs-lookup"><span data-stu-id="1edf4-133">Because accuracy is an easy metric to understand, it's a good starting point for explaining a model to other people, especially to users of the model who aren't data scientists.</span></span> <span data-ttu-id="1edf4-134">Mallin tarkkuuden ymmärtäminen ei edellytä tilastojen ymmärtämistä.</span><span class="sxs-lookup"><span data-stu-id="1edf4-134">No understanding of statistics is required to understand the model's accuracy.</span></span> <span data-ttu-id="1edf4-135">Sekaannusmatriisi sisältää lisätietoja mallin suorituskyvystä.</span><span class="sxs-lookup"><span data-stu-id="1edf4-135">When a confusion matrix is available, it provides further insight into the model's performance.</span></span>

<span data-ttu-id="1edf4-136">Perinpohjainen ymmärtäminen edellyttää kuitenkin, että tarkkuuteen liittyvät haasteet tulee ottaa huomioon.</span><span class="sxs-lookup"><span data-stu-id="1edf4-136">However, for a more thorough understanding, several challenges that are associated with accuracy should be noted.</span></span> <span data-ttu-id="1edf4-137">Mittarin hyödyllisyys riippuu ongelman kontekstista.</span><span class="sxs-lookup"><span data-stu-id="1edf4-137">The usefulness of the metric depends on the context of the problem.</span></span> <span data-ttu-id="1edf4-138">Mallin suorituskyvyn yhteydessä halutaan usein tietää, miten hyvä malli on.</span><span class="sxs-lookup"><span data-stu-id="1edf4-138">A question that often arises in relation to model performance is, "How good is the model?"</span></span> <span data-ttu-id="1edf4-139">Vastaus tähän kysymykseen ei kuitenkaan välttämättä ole yksinkertainen.</span><span class="sxs-lookup"><span data-stu-id="1edf4-139">However, the answer to this question isn't necessarily straightforward.</span></span> <span data-ttu-id="1edf4-140">Ota huomioon seuraava sekaannusmatriisi (malli 2).</span><span class="sxs-lookup"><span data-stu-id="1edf4-140">Consider the following confusion matrix (model 2).</span></span>

<span data-ttu-id="1edf4-141">[![Maksun ennustemalli ja suuri näytekoko](./media/payment-prediction-matrix-2.png)](payment-prediction-matrix-2.png)</span><span class="sxs-lookup"><span data-stu-id="1edf4-141">[![Payment prediction example with a larger sample](./media/payment-prediction-matrix-2.png)](payment-prediction-matrix-2.png)</span></span>

<span data-ttu-id="1edf4-142">Nopea laskenta osoittaa, että tämän mallin tarkkuus on (70 + 10 + 3) ÷ 100 tai 0,83.</span><span class="sxs-lookup"><span data-stu-id="1edf4-142">A quick calculation shows that this model's accuracy is (70 + 10 + 3) ÷ 100, or 0.83.</span></span> <span data-ttu-id="1edf4-143">Nopeasti ajateltuna näyttää siltä, että tämä on parempi tulos kuin edellisessä usean luokan mallissa (malli 1), jonka tarkkuus on 0,73.</span><span class="sxs-lookup"><span data-stu-id="1edf4-143">On the surface, this result seems better than result for the previous multi-class model (model 1), which has an accuracy of 0.73.</span></span> <span data-ttu-id="1edf4-144">Mutta onko tämä parempi?</span><span class="sxs-lookup"><span data-stu-id="1edf4-144">But is it better?</span></span>

<span data-ttu-id="1edf4-145">Ota tämän kysymyksen tarkastelussa huomioon luonnollisen arvauksen tarkkuus.</span><span class="sxs-lookup"><span data-stu-id="1edf4-145">To begin to address this question, consider the accuracy of a naïve guess.</span></span> <span data-ttu-id="1edf4-146">Luokitteluongelmassa yksinkertainen arvaus ennustaa aina yleisimmän luokan.</span><span class="sxs-lookup"><span data-stu-id="1edf4-146">For a classification problem, a simple guess will always predict the most common class.</span></span> <span data-ttu-id="1edf4-147">Mallissa 1 tämä arvaus on "ajoissa". Se tuottaa tarkkuudeksi 0,50.</span><span class="sxs-lookup"><span data-stu-id="1edf4-147">For model 1, that guess will be "on time," and it will produce an accuracy of 0.50.</span></span> <span data-ttu-id="1edf4-148">Mallissa 2 tämä arvaus on myös "ajoissa". Se tuottaa tarkkuudeksi 0,80.</span><span class="sxs-lookup"><span data-stu-id="1edf4-148">The guess for model 2 will also be "on time," and it will produce an accuracy of 0.80.</span></span> <span data-ttu-id="1edf4-149">Koska malli 1 parantaa luonnollista arvausta arvolla 0,73 – 0,50 = 0,23 ja malli 2 arvolla 0,83 – 0,80 = 0,03, malli 1 on näistä parempi, vaikka sen tarkkuus on alhaisempi.</span><span class="sxs-lookup"><span data-stu-id="1edf4-149">Because model 1 improves on the naïve guess by 0.73 – 0.50 = 0.23, whereas model 2 improves on the naïve guess by 0.83 – 0.80 = 0.03, model 1 is a better model, even though it has lower accuracy.</span></span> <span data-ttu-id="1edf4-150">Laskelma paljastaa, että mallin laadun tehokas arviointi edellyttää tarkkuusarvoa enemmän tietoja.</span><span class="sxs-lookup"><span data-stu-id="1edf4-150">The calculation reveals that effective assessment of a model's quality requires more context than the accuracy value.</span></span>

<span data-ttu-id="1edf4-151">Toinen näkökulma tulee ottaa huomioon.</span><span class="sxs-lookup"><span data-stu-id="1edf4-151">Another aspect is worth noting.</span></span> <span data-ttu-id="1edf4-152">Ota huomioon skenaario, jossa potilaan sairauden havaitsemisessa käytetään lääketieteellistä testiä.</span><span class="sxs-lookup"><span data-stu-id="1edf4-152">Consider a scenario where a medical test is used to detect a disease in a patient.</span></span> <span data-ttu-id="1edf4-153">Tämä ongelma on binaarinen luokitteluongelma, jossa positiivinen tulos osoittaa, että potilaalla on kyseinen sairaus.</span><span class="sxs-lookup"><span data-stu-id="1edf4-153">This problem is a binary classification problem where a positive result indicates that the patient has the disease.</span></span> <span data-ttu-id="1edf4-154">Tässä skenaariossa on otettava huomioon seuraavien virheiden vaikutus:</span><span class="sxs-lookup"><span data-stu-id="1edf4-154">In this scenario, you must think about the impact of the following errors:</span></span>

- <span data-ttu-id="1edf4-155">Virheelliset positiiviset, joissa testi osoittaa potilaan olevan sairas, mutta oikeasti hän ei ole sairas</span><span class="sxs-lookup"><span data-stu-id="1edf4-155">False positives, where the test says that a patient has the disease, but she doesn't really have it</span></span>
- <span data-ttu-id="1edf4-156">Virheelliset negatiiviset, joissa testi osoittaa, että potilas ei ole sairas, vaikka tämä oikeasti on</span><span class="sxs-lookup"><span data-stu-id="1edf4-156">False negatives, where the test says that a patient doesn't have the disease, but he really does have it</span></span>

<span data-ttu-id="1edf4-157">On selvää, että kumpikaan tapaus ei ole toivottu tulos, mutta kumpi on pahempi?</span><span class="sxs-lookup"><span data-stu-id="1edf4-157">Obviously, both types of error are undesirable, but which is worse?</span></span> <span data-ttu-id="1edf4-158">Tämä riippuu tilanteesta.</span><span class="sxs-lookup"><span data-stu-id="1edf4-158">Again, it depends.</span></span> <span data-ttu-id="1edf4-159">Jos kysymyksessä on henkeä uhkaava sairaus, joka edellyttää nopeaa hoitoa, virheellisten negatiivisten minimoiminen (toivottavasti lisätestien jälkeen) on tärkeintä.</span><span class="sxs-lookup"><span data-stu-id="1edf4-159">In the case of a life-threatening disease that requires fast treatment, minimization of false negatives (hopefully followed by additional tests) takes priority.</span></span> <span data-ttu-id="1edf4-160">Muissa vähemmän kriittisissä tilanteissa mallien tekijät voivat minimoida virheelliset positiiviset sen sijaan.</span><span class="sxs-lookup"><span data-stu-id="1edf4-160">In other, less critical situations, the model creators might minimize false positives instead.</span></span> <span data-ttu-id="1edf4-161">Joka tapauksessa on perusteltua sanoa, että mallin laadun määrittäminen tehokkaasti edellyttää, että tietoja on tarkkuusmittaria enemmän.</span><span class="sxs-lookup"><span data-stu-id="1edf4-161">At any rate, a reasonable conclusion is that to effectively determine a model's quality, you must have more information than an accuracy metric provides.</span></span>

### <a name="recommendations"></a><span data-ttu-id="1edf4-162">Suositukset</span><span class="sxs-lookup"><span data-stu-id="1edf4-162">Recommendations</span></span>

<span data-ttu-id="1edf4-163">Tarkkuus on tärkeä työkalu kommunikoitaessa domain-asiantuntijoiden kanssa, jotka eivät tunne tilastoja.</span><span class="sxs-lookup"><span data-stu-id="1edf4-163">Accuracy is an important tool for communicating with domain experts who aren't familiar with statistics.</span></span> <span data-ttu-id="1edf4-164">Jotta tiedoista on hyötyä, on tärkeää antaa lisätietoja tarkkuuden arvon kanssa.</span><span class="sxs-lookup"><span data-stu-id="1edf4-164">However, to make the information useful, it's critical that additional context be provided together with the accuracy value.</span></span>

<span data-ttu-id="1edf4-165">Maksuennusteskenaariossa koneoppimismallille voidaan asettaa tavoite, joka sisältää eri maksutoiminnan tekijöitä.</span><span class="sxs-lookup"><span data-stu-id="1edf4-165">For the payment prediction scenario, you can set a target for the ML model that includes factors in different payment behaviors.</span></span> <span data-ttu-id="1edf4-166">Tavoite on, että mallin tulisi parantaa luonnollista arvausta vähentämällä virheellisten vastausten määrää vähintään 50 prosentilla.</span><span class="sxs-lookup"><span data-stu-id="1edf4-166">The target is that the model should improve upon a naïve guess by reducing the number of incorrect answers by at least 50 percent.</span></span> <span data-ttu-id="1edf4-167">Toisin sanoen halutaan, että kohdetavoite jakaa eron luonnollisen arvauksen ja 100 prosentin välillä.</span><span class="sxs-lookup"><span data-stu-id="1edf4-167">In other words, you want a target accuracy that splits the different between the accuracy of a naïve guess and 100 percent.</span></span>

<span data-ttu-id="1edf4-168">Seuraavassa taulukossa on yhteenveto tämän ohjeaiheen sekaannusmatriisien periaatteesta.</span><span class="sxs-lookup"><span data-stu-id="1edf4-168">The following table summarizes this principle for the confusion matrices in this topic.</span></span>

| <span data-ttu-id="1edf4-169">Malli</span><span class="sxs-lookup"><span data-stu-id="1edf4-169">Model</span></span>   | <span data-ttu-id="1edf4-170">Luonnollinen arvaus</span><span class="sxs-lookup"><span data-stu-id="1edf4-170">Naïve guess</span></span> | <span data-ttu-id="1edf4-171">Tavoite</span><span class="sxs-lookup"><span data-stu-id="1edf4-171">Target</span></span> | <span data-ttu-id="1edf4-172">Mallin tarkkuus</span><span class="sxs-lookup"><span data-stu-id="1edf4-172">Model accuracy</span></span> | <span data-ttu-id="1edf4-173">Onko tavoite täyttynyt?</span><span class="sxs-lookup"><span data-stu-id="1edf4-173">Is the goal met?</span></span>                                          |
|---------|-------------|--------|----------------|-----------------------------------------------------------|
| <span data-ttu-id="1edf4-174">Malli 1</span><span class="sxs-lookup"><span data-stu-id="1edf4-174">Model 1</span></span> | <span data-ttu-id="1edf4-175">0.50</span><span class="sxs-lookup"><span data-stu-id="1edf4-175">0.50</span></span>        | <span data-ttu-id="1edf4-176">0.75</span><span class="sxs-lookup"><span data-stu-id="1edf4-176">0.75</span></span>   | <span data-ttu-id="1edf4-177">0.73</span><span class="sxs-lookup"><span data-stu-id="1edf4-177">0.73</span></span>           | <span data-ttu-id="1edf4-178">Lähes.</span><span class="sxs-lookup"><span data-stu-id="1edf4-178">Almost.</span></span> <span data-ttu-id="1edf4-179">Tämä malli parantaa arvauksia huomattavasti.</span><span class="sxs-lookup"><span data-stu-id="1edf4-179">This model significantly improves upon the guess.</span></span> |
| <span data-ttu-id="1edf4-180">Malli 2</span><span class="sxs-lookup"><span data-stu-id="1edf4-180">Model 2</span></span> | <span data-ttu-id="1edf4-181">0.80</span><span class="sxs-lookup"><span data-stu-id="1edf4-181">0.80</span></span>        | <span data-ttu-id="1edf4-182">0.90</span><span class="sxs-lookup"><span data-stu-id="1edf4-182">0.90</span></span>   | <span data-ttu-id="1edf4-183">0.83</span><span class="sxs-lookup"><span data-stu-id="1edf4-183">0.83</span></span>           | <span data-ttu-id="1edf4-184">Nro</span><span class="sxs-lookup"><span data-stu-id="1edf4-184">No.</span></span> <span data-ttu-id="1edf4-185">Parannus on tarpeen.</span><span class="sxs-lookup"><span data-stu-id="1edf4-185">Improvement is required.</span></span>                              |

## <a name="classification-f1-accuracy"></a><span data-ttu-id="1edf4-186">Luokituksen F1-tarkkuus</span><span class="sxs-lookup"><span data-stu-id="1edf4-186">Classification F1 accuracy</span></span>

<span data-ttu-id="1edf4-187">Tässä ohjeaiheessa käsitellään luokituksen koneoppimisen suorituskyvyn lisämittaria, joka on nyt nimeltään F1-tarkkuus.</span><span class="sxs-lookup"><span data-stu-id="1edf4-187">The final consideration in this topic is a more advanced measure of classification ML performance that is known as F1 accuracy.</span></span>

<span data-ttu-id="1edf4-188">Ennen kuin F1-tarkkuus voidaan määrittää, on otettava käyttöön kaksi lisämittaria: tarkkuus ja saanti.</span><span class="sxs-lookup"><span data-stu-id="1edf4-188">Before F1 accuracy can be defined, two additional metrics must be introduced: precision and recall.</span></span> <span data-ttu-id="1edf4-189">Tarkkuus ilmaisee, kuinka monta positiiviseksi määritettyä ennustetta on määritetty oikein.</span><span class="sxs-lookup"><span data-stu-id="1edf4-189">Precision indicates how many of the total number of predictions that are specified as positive are correctly assigned.</span></span> <span data-ttu-id="1edf4-190">Tätä mittaria kutsutaan myös positiiviseksi ennakoivaksi arvoksi.</span><span class="sxs-lookup"><span data-stu-id="1edf4-190">This metric is also known as the positive predictive value.</span></span> <span data-ttu-id="1edf4-191">Saanti on niiden todellisten positiivisten tapausten määrä, jotka ennustettiin oikein.</span><span class="sxs-lookup"><span data-stu-id="1edf4-191">Recall is the total number of the actual positive cases that were predicted correctly.</span></span> <span data-ttu-id="1edf4-192">Tätä mittaria kutsutaan myös herkkyydeksi.</span><span class="sxs-lookup"><span data-stu-id="1edf4-192">This metric is also known as sensitivity.</span></span>

<span data-ttu-id="1edf4-193">[![Todelliset tulokset vs. virheelliset tulokset](./media/tn-fn.png)](./media/tn-fn.png)</span><span class="sxs-lookup"><span data-stu-id="1edf4-193">[![True results vs. false results](./media/tn-fn.png)](./media/tn-fn.png)</span></span>

<span data-ttu-id="1edf4-194">Edellä olevan kuvan sekaannusmatriisissa nämä mittarit lasketaan seuraavalla tavalla:</span><span class="sxs-lookup"><span data-stu-id="1edf4-194">In the confusion matrix in the preceding illustration, these metrics are calculated in the following way:</span></span>

- <span data-ttu-id="1edf4-195">Tarkkuus = TP ÷ (TP + FP)</span><span class="sxs-lookup"><span data-stu-id="1edf4-195">Precision = TP ÷ (TP + FP)</span></span>
- <span data-ttu-id="1edf4-196">Saanti = TP ÷ (TP + FN)</span><span class="sxs-lookup"><span data-stu-id="1edf4-196">Recall = TP ÷ (TP + FN)</span></span>

<span data-ttu-id="1edf4-197">F1-mittari yhdistää tarkkuuden ja saannin.</span><span class="sxs-lookup"><span data-stu-id="1edf4-197">The F1 measure combines precision and recall.</span></span> <span data-ttu-id="1edf4-198">Tuloksena on kahden arvon harmoninen keskiarvo.</span><span class="sxs-lookup"><span data-stu-id="1edf4-198">The result is the harmonic mean of the two values.</span></span> <span data-ttu-id="1edf4-199">Se lasketaan seuraavalla tavalla:</span><span class="sxs-lookup"><span data-stu-id="1edf4-199">It's calculated in the following way:</span></span>

- <span data-ttu-id="1edf4-200">F1 = 2 × (tarkkuus × saanti) ÷ (tarkkuus + saanti)</span><span class="sxs-lookup"><span data-stu-id="1edf4-200">F1 = 2 × (Precision × Recall) ÷ (Precision + Recall)</span></span>

<span data-ttu-id="1edf4-201">Alla on konkreettinen esimerkki.</span><span class="sxs-lookup"><span data-stu-id="1edf4-201">Let's look at a concrete example.</span></span> <span data-ttu-id="1edf4-202">Aiemmin tässä ohjeaiheessa oli esimerkki, jossa ennustettiin eläin koiraksi tai kissaksi.</span><span class="sxs-lookup"><span data-stu-id="1edf4-202">Earlier in this topic, there was an example of a model that predicted whether an animal was a dog or a cat.</span></span> <span data-ttu-id="1edf4-203">Kuva näytetään myös tässä.</span><span class="sxs-lookup"><span data-stu-id="1edf4-203">The illustration is repeated here.</span></span>

<span data-ttu-id="1edf4-204">[![Lajien ennustamisen esimerkki](./media/species-prediction-matrix.png)](./media/species-prediction-matrix.png)</span><span class="sxs-lookup"><span data-stu-id="1edf4-204">[![Species prediction example](./media/species-prediction-matrix.png)](./media/species-prediction-matrix.png)</span></span>

<span data-ttu-id="1edf4-205">Tässä ovat tulokset, jos koira on positiivinen vastaus.</span><span class="sxs-lookup"><span data-stu-id="1edf4-205">Here are the results if "Dog" is used as the positive answer.</span></span>

- <span data-ttu-id="1edf4-206">Tarkkuus = 24 ÷ (24 + 2) = 0,9231</span><span class="sxs-lookup"><span data-stu-id="1edf4-206">Precision = 24 ÷ (24 + 2) = 0.9231</span></span>
- <span data-ttu-id="1edf4-207">Saanti = 24 ÷ (24 + 6) = 0,8</span><span class="sxs-lookup"><span data-stu-id="1edf4-207">Recall = 24 ÷ (24 + 6) = 0.8</span></span>
- <span data-ttu-id="1edf4-208">F1 = 2 × (0,9231 × 0,8) ÷ (0,9231 + 0,8) = 0,8572</span><span class="sxs-lookup"><span data-stu-id="1edf4-208">F1 = 2 × (0.9231 × 0.8) ÷ (0.9231 + 0.8) = 0.8572</span></span>

<span data-ttu-id="1edf4-209">Kuten nähdään, F1-arvo on tarkkuuden ja saannin välissä.</span><span class="sxs-lookup"><span data-stu-id="1edf4-209">As you can see, the F1 value is between the values for precision and recall.</span></span>

<span data-ttu-id="1edf4-210">Vaikka F1-tarkkuuden ymmärtäminen ei ole helppoa, se tuo lisäarvoa tarkkuuden perusarvoon.</span><span class="sxs-lookup"><span data-stu-id="1edf4-210">Although F1 accuracy isn't as easy to understand, it adds nuance to the basic accuracy number.</span></span> <span data-ttu-id="1edf4-211">Se voi myös auttaa epätasapainossa olevien tietojoukkojen käsittelemisessä seuraavan keskustelun tapaan.</span><span class="sxs-lookup"><span data-stu-id="1edf4-211">It can also help with unbalanced datasets, as the following discussion will show.</span></span>

<span data-ttu-id="1edf4-212">Tämän ohjeaiheen [Mallin tarkkuus](#classify-machine-learning-accuracy) -osassa vertailtiin seuraavaa kahta sekaannusmatriisia.</span><span class="sxs-lookup"><span data-stu-id="1edf4-212">The [Model accuracy](#classify-machine-learning-accuracy) section of this topic compared the following two confusion matrices.</span></span> <span data-ttu-id="1edf4-213">Vaikka ensimmäisen mallin tarkkuus on toista alhaisempi, se arvotettiin hyödyllisemmäksi malliksi, koska se näytti enemmän parannuksia kuin ajallaan tehdyn maksun oletusarvaus.</span><span class="sxs-lookup"><span data-stu-id="1edf4-213">Even though the first model had lower accuracy, it was deemed a more useful model because it showed more improvement than the default guess of an on-time payment.</span></span>

<span data-ttu-id="1edf4-214">[![Maksuennuste vs. todellisten arvojen esimerkki](./media/payment-prediction-matrix.png)](payment-prediction-matrix.png)</span><span class="sxs-lookup"><span data-stu-id="1edf4-214">[![Payment prediction vs. actuals example](./media/payment-prediction-matrix.png)](payment-prediction-matrix.png)</span></span>

<span data-ttu-id="1edf4-215">[![Maksun ennustemalli ja suuri näytekoko](./media/payment-prediction-matrix-2.png)](payment-prediction-matrix-2.png)</span><span class="sxs-lookup"><span data-stu-id="1edf4-215">[![Payment prediction example with a larger sample](./media/payment-prediction-matrix-2.png)](payment-prediction-matrix-2.png)</span></span>

<span data-ttu-id="1edf4-216">Katsotaan, miten näitä kahta mallia verrataan, kun käytetään F1-pisteitä.</span><span class="sxs-lookup"><span data-stu-id="1edf4-216">Let's see how these two models compare when the F1 score is used.</span></span> <span data-ttu-id="1edf4-217">F1-pisteitä käytetään kunkin tilan tarkkuudessa ja saannissa. F1-makrolaskelma määrittää F1-pisteiden keskiarvot tiloissa, jotta saadaan selville yleiset F1-pisteet.</span><span class="sxs-lookup"><span data-stu-id="1edf4-217">The F1 score factors in precision and recall for each state, and the F1 macro calculation then averages the F1 score across the states to determine an overall F1 score.</span></span> <span data-ttu-id="1edf4-218">F1-muuttujia on muitakin, mutta makroversioon keskittyminen on kiinnostavinta, koska kaikkia kolmea tilaa käsitellään yhtä paljon.</span><span class="sxs-lookup"><span data-stu-id="1edf4-218">There are other F1 variants, but it's of greater interest to consider the macro version, given the equal consideration that is given to all three states.</span></span>

<span data-ttu-id="1edf4-219">Laskelmien yksinkertaistamiseksi on luotu mallitaulukoita, jotka vastaavat todellisia ja ennustettuja arvoja.</span><span class="sxs-lookup"><span data-stu-id="1edf4-219">To simplify the calculations, sample arrays were built to match the actual and predicted values.</span></span> <span data-ttu-id="1edf4-220">Näissä taulukoissa käytettiin Pythonin sklearn-mittarikirjastoa arvojen laskemisessa.</span><span class="sxs-lookup"><span data-stu-id="1edf4-220">These arrays used sklearn's metrics library in Python to calculate the values.</span></span> <span data-ttu-id="1edf4-221">Tulos näyttää tältä.</span><span class="sxs-lookup"><span data-stu-id="1edf4-221">Here is the result.</span></span>

| <span data-ttu-id="1edf4-222">Malli</span><span class="sxs-lookup"><span data-stu-id="1edf4-222">Model</span></span>   | <span data-ttu-id="1edf4-223">Luonnollinen arvaus</span><span class="sxs-lookup"><span data-stu-id="1edf4-223">Naive guess</span></span> | <span data-ttu-id="1edf4-224">Tarkkuus</span><span class="sxs-lookup"><span data-stu-id="1edf4-224">Accuracy</span></span> | <span data-ttu-id="1edf4-225">F1-makro</span><span class="sxs-lookup"><span data-stu-id="1edf4-225">F1 macro</span></span> |
|---------|-------------|----------|----------|
| <span data-ttu-id="1edf4-226">Malli 1</span><span class="sxs-lookup"><span data-stu-id="1edf4-226">Model 1</span></span> | <span data-ttu-id="1edf4-227">0.5</span><span class="sxs-lookup"><span data-stu-id="1edf4-227">0.5</span></span>         | <span data-ttu-id="1edf4-228">0.73</span><span class="sxs-lookup"><span data-stu-id="1edf4-228">0.73</span></span>     | <span data-ttu-id="1edf4-229">0.67</span><span class="sxs-lookup"><span data-stu-id="1edf4-229">0.67</span></span>     |
| <span data-ttu-id="1edf4-230">Malli 2</span><span class="sxs-lookup"><span data-stu-id="1edf4-230">Model 2</span></span> | <span data-ttu-id="1edf4-231">0.80</span><span class="sxs-lookup"><span data-stu-id="1edf4-231">0.80</span></span>        | <span data-ttu-id="1edf4-232">0.83</span><span class="sxs-lookup"><span data-stu-id="1edf4-232">0.83</span></span>     | <span data-ttu-id="1edf4-233">0.66</span><span class="sxs-lookup"><span data-stu-id="1edf4-233">0.66</span></span>     |

<span data-ttu-id="1edf4-234">Lisätietoja tämän laskelman toiminnasta on tässä mallin 1 sklearn-mittareiden luokitteluraportissa.</span><span class="sxs-lookup"><span data-stu-id="1edf4-234">For more detail about how this calculation works, here is the sklearn.metrics classification report for model 1.</span></span> <span data-ttu-id="1edf4-235">Nämä kolme tilaa (Ajoissa, Myöhässä ja Erittäin paljon myöhässä) kuvataan riveillä 1, 2 ja 3.</span><span class="sxs-lookup"><span data-stu-id="1edf4-235">The three states, "On time," "Late," and "Very late," are represented by the rows that are labeled 1, 2, and 3, respectively.</span></span> <span data-ttu-id="1edf4-236">Makron keskiarvo on f1-pisteet-sarakkeen keskiarvo.</span><span class="sxs-lookup"><span data-stu-id="1edf4-236">The macro average is just the average of the "f1-score" column.</span></span>

|           | <span data-ttu-id="1edf4-237">tarkkuus</span><span class="sxs-lookup"><span data-stu-id="1edf4-237">precision</span></span> | <span data-ttu-id="1edf4-238">saanti</span><span class="sxs-lookup"><span data-stu-id="1edf4-238">recall</span></span>   | <span data-ttu-id="1edf4-239">f1-pisteet</span><span class="sxs-lookup"><span data-stu-id="1edf4-239">f1-score</span></span> |
|-----------|-----------|----------|----------|
| <span data-ttu-id="1edf4-240">**1**</span><span class="sxs-lookup"><span data-stu-id="1edf4-240">**1**</span></span>     | <span data-ttu-id="1edf4-241">0.83</span><span class="sxs-lookup"><span data-stu-id="1edf4-241">0.83</span></span>      | <span data-ttu-id="1edf4-242">0.80</span><span class="sxs-lookup"><span data-stu-id="1edf4-242">0.80</span></span>     | <span data-ttu-id="1edf4-243">0.82</span><span class="sxs-lookup"><span data-stu-id="1edf4-243">0.82</span></span>     |
| <span data-ttu-id="1edf4-244">**2**</span><span class="sxs-lookup"><span data-stu-id="1edf4-244">**2**</span></span>     | <span data-ttu-id="1edf4-245">0.68</span><span class="sxs-lookup"><span data-stu-id="1edf4-245">0.68</span></span>      | <span data-ttu-id="1edf4-246">0.71</span><span class="sxs-lookup"><span data-stu-id="1edf4-246">0.71</span></span>     | <span data-ttu-id="1edf4-247">0.69</span><span class="sxs-lookup"><span data-stu-id="1edf4-247">0.69</span></span>     |
| <span data-ttu-id="1edf4-248">**3**</span><span class="sxs-lookup"><span data-stu-id="1edf4-248">**3**</span></span>     | <span data-ttu-id="1edf4-249">0.50</span><span class="sxs-lookup"><span data-stu-id="1edf4-249">0.50</span></span>      | <span data-ttu-id="1edf4-250">0.50</span><span class="sxs-lookup"><span data-stu-id="1edf4-250">0.50</span></span>     | <span data-ttu-id="1edf4-251">0.50</span><span class="sxs-lookup"><span data-stu-id="1edf4-251">0.50</span></span>     |

<span data-ttu-id="1edf4-252">Näiden kahden mallin F1-makron tarkkuuspisteet ovat lähes samat, kuten tuloksista nähdään.</span><span class="sxs-lookup"><span data-stu-id="1edf4-252">As these results show, the two models have nearly identical F1 macro accuracy scores.</span></span> <span data-ttu-id="1edf4-253">Tässä ja useassa muussa tapauksessa F1-tarkkuus on muita osoittimia parempi mallin ominaisuuden osoitin.</span><span class="sxs-lookup"><span data-stu-id="1edf4-253">In this and many other cases, F1 accuracy provides a better indicator of a model's capability.</span></span> <span data-ttu-id="1edf4-254">Tulosten tulkinta tarkkuuden osalta edellyttää, että käyttäjä ymmärtää mallin tärkeimmät ominaisuudet.</span><span class="sxs-lookup"><span data-stu-id="1edf4-254">As for accuracy, interpretation of the results requires that you understand what is most important to consider in the model.</span></span>

#### <a name="privacy-notice"></a><span data-ttu-id="1edf4-255">Tietosuojatiedot</span><span class="sxs-lookup"><span data-stu-id="1edf4-255">Privacy notice</span></span>
<span data-ttu-id="1edf4-256">Esiversiot (1) voivat käyttää vähemmän tietosuojaa ja suojaustoimenpiteitä kuin Dynamics 365 Finance and Operations -palvelu, (2) eivät sisälly tämän huoltotilauksen palvelutasosopimukseen, (3) niitä ei ole tarkoitettu henkilötietojen tai muiden sellaisten tietojen käsittelemiseen, joihin liittyy lainsäädännön tai määräysten vaatimustenmukaisuusvaatimuksia ja (4) niillä on rajoitettu tuki.</span><span class="sxs-lookup"><span data-stu-id="1edf4-256">Previews (1) might use less privacy and fewer security measures than the Dynamics 365 Finance and Operations service, (2) aren't included in the service level agreement (SLA) for this service, (3) should not be used to process personal data or other data that is subject to legal or regulatory compliance requirements, and (4) have limited support.</span></span>
