<span data-ttu-id="83bfe-101">Kun kopioit tietokantaa ympäristöstä toiseen, sinun on varmistettava kaikkien Retail-komponenttien ajantasaisuus suorittamalla ympäristön uudelleenvalmistelutyökalu, jotta kopioitu tietokanta toimisi oikein.</span><span class="sxs-lookup"><span data-stu-id="83bfe-101">When copying a database between environments, you will need to run the environment re-provisioning tool before the copied database is fully functional, to ensure that all Retail components are up-to-date.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="83bfe-102">Suosittelemme, että suoritat tämän toimenpiteen riippumatta siitä, käytetäänkö Retail-komponentteja vai ei, koska Retail-toiminnallisuus sisältyy kaikkiin ympäristöihin.</span><span class="sxs-lookup"><span data-stu-id="83bfe-102">We recommend that you run this procedure whether you are using Retail components or not, because Retail functionality is included in all environments.</span></span> 

<span data-ttu-id="83bfe-103">Ennen jatkamista sinun on varmistettava, että seuraavat edellytykset täyttyvät:</span><span class="sxs-lookup"><span data-stu-id="83bfe-103">Before you continue, you must make sure that the following prerequisites are met:</span></span>
1. <span data-ttu-id="83bfe-104">Jos päivität heinäkuun 2017 versioon (tunnetaan myös nimellä 7.2) 7.2.11792.56024, ota käyttöön seuraavat sovelluksen X++ -hotfix-korjaukset kohdeympäristössä ennen tietojen päivityksen suorittamista kyseisessä ympäristössä.</span><span class="sxs-lookup"><span data-stu-id="83bfe-104">If you are upgrading to the July 2017 release (also known as 7.2) 7.2.11792.56024, apply the following application X++ hotfixes in the destination environment before running the data upgrade in that environment.</span></span> <span data-ttu-id="83bfe-105">Tämä estää tietojen päivityksen aikana tapahtuvia erilaisia virheitä:</span><span class="sxs-lookup"><span data-stu-id="83bfe-105">These will prevent various errors occurring during the data upgrade:</span></span>

    - <span data-ttu-id="83bfe-106">KB 4036156 – Retail-aliversiopäivitys – Muuttujan numerojärjestystä ei ole määritetty.</span><span class="sxs-lookup"><span data-stu-id="83bfe-106">KB 4036156 - Retail minor version upgrade - 'Variant number sequence is not set.'</span></span> <span data-ttu-id="83bfe-107">Tämä paketti sisältää myös korjaukset KB 4035399 ja KB 4035751.</span><span class="sxs-lookup"><span data-stu-id="83bfe-107">This fix package also includes KB 4035399 and KB 4035751.</span></span> <span data-ttu-id="83bfe-108">Huomaa, että tämän paketin käyttäminen edellyttää vähintään Platform Update 9 -versiota.</span><span class="sxs-lookup"><span data-stu-id="83bfe-108">Note that you must have a minimum of Platform Update 9 to use this package.</span></span> <span data-ttu-id="83bfe-109">Jos et ole varma edellytysten täyttymisestä, asenna uusimmat binaaritiedostot.</span><span class="sxs-lookup"><span data-stu-id="83bfe-109">If you are unsure, install the latest binaries.</span></span>
    
2. <span data-ttu-id="83bfe-110">Jos päivität Microsoft DynamicsAX 2012 -versiosta, asenna seuraavat sovelluksen X++ -korjaukset kohdeympäristöön ennen tietojen päivityksen suorittamista:</span><span class="sxs-lookup"><span data-stu-id="83bfe-110">If you are upgrading from Microsoft Dynamics AX 2012, install the following application X++ fixes in the destination environment before you run the data upgrade:</span></span>
    - <span data-ttu-id="83bfe-111">KB 4033183 – Dynamics AX 2012 R2- tai Dynamics AX 2012 R3 Pre-CU8 -päivitys (ei-vähittäismyynti) epäonnistuu ja näyttää virheen Objektia ei löydy kohteelle dbo.RETAILTILLLAYOUTZONE.</span><span class="sxs-lookup"><span data-stu-id="83bfe-111">KB 4033183 - Dynamics AX 2012 R2 or Dynamics AX 2012 R3 Pre-CU8 non-retail upgrade fails with Object not found for dbo.RETAILTILLLAYOUTZONE.</span></span>
    - <span data-ttu-id="83bfe-112">KB 4040692 – Päivitys Dynamics AX 2012 R3 -versiosta Microsoft Dynamics 365 for Operations 7.2 -versioon epäonnistuu: RetailSalesLine-objektin päällekkäinen indeksi kohteessa SalesLineIdx.</span><span class="sxs-lookup"><span data-stu-id="83bfe-112">KB 4040692 - Dynamics AX 2012 R3 to Microsoft Dynamics 365 for Operations 7.2 upgrade fails on RetailSalesLine duplicate index on SalesLineIdx.</span></span>
    - <span data-ttu-id="83bfe-113">KB 4035490 – Suorituskykyongelma GeneralJournalAccountEntry-objektin MainAccount-kentän päivityskomentosarjassa.</span><span class="sxs-lookup"><span data-stu-id="83bfe-113">KB 4035490 - Performance issue with GeneralJournalAccountEntry MainAccount field upgrade script.</span></span>


<span data-ttu-id="83bfe-114">Suorita ympäristön uudelleenvalmistelutyökalu seuraavien ohjeiden mukaisesti.</span><span class="sxs-lookup"><span data-stu-id="83bfe-114">Follow these steps to run the Environment reprovisioning tool.</span></span>

1. <span data-ttu-id="83bfe-115">Valitse jaetussa omaisuuskirjastossa **Käyttöönotettava ohjelmistopaketti**.</span><span class="sxs-lookup"><span data-stu-id="83bfe-115">In the Shared asset library, select **Software deployable package**.</span></span>
2. <span data-ttu-id="83bfe-116">Lataa ympäristön uudelleenvalmistelutyökalu.</span><span class="sxs-lookup"><span data-stu-id="83bfe-116">Download the Environment reprovisioning tool.</span></span>
3. <span data-ttu-id="83bfe-117">Valitse projektin omaisuuskirjastossa **Käyttöönotettava ohjelmistopaketti**.</span><span class="sxs-lookup"><span data-stu-id="83bfe-117">In the asset library for your project, select **Software deployable package**.</span></span>
4. <span data-ttu-id="83bfe-118">Luo uusi paketti valitsemalla **Uusi**.</span><span class="sxs-lookup"><span data-stu-id="83bfe-118">Select **New** to create a new package.</span></span>
5. <span data-ttu-id="83bfe-119">Kirjoita paketin nimi ja kuvaus.</span><span class="sxs-lookup"><span data-stu-id="83bfe-119">Enter a name and description for the package.</span></span> <span data-ttu-id="83bfe-120">Voit antaa paketin nimeksi **Ympäristön uudelleenvalmistelutyökalu**.</span><span class="sxs-lookup"><span data-stu-id="83bfe-120">You can use **Environment reprovisioning tool** as the package name.</span></span>
6. <span data-ttu-id="83bfe-121">Lataa aiemmin lataamasi paketti palvelimeen.</span><span class="sxs-lookup"><span data-stu-id="83bfe-121">Upload the package that you downloaded earlier.</span></span>
7. <span data-ttu-id="83bfe-122">Valitse kohdeympäristön **Ympäristön tiedot** -sivulla **Ylläpidä** > **Ota päivitykset käyttöön**.</span><span class="sxs-lookup"><span data-stu-id="83bfe-122">On the **Environment details** page for your target environment, select **Maintain** > **Apply updates**.</span></span>
8. <span data-ttu-id="83bfe-123">Valitse aiemmin lataamasi ympäristön uudelleenvalmistelutyökalu ja ota sitten paketti käyttöön valitsemalla **Käytä**.</span><span class="sxs-lookup"><span data-stu-id="83bfe-123">Select the Environment reprovisioning tool that you uploaded earlier, and then select **Apply** to apply the package.</span></span>
9. <span data-ttu-id="83bfe-124">Seuraa paketin käyttöönoton edistymistä.</span><span class="sxs-lookup"><span data-stu-id="83bfe-124">Monitor the progress of the package deployment.</span></span> 

<span data-ttu-id="83bfe-125">Lisätietoja käyttöönottopaketin käyttöönotosta on kohdassa [Käyttöönotettavan paketin käyttäminen](../deployment/create-apply-deployable-package.md).</span><span class="sxs-lookup"><span data-stu-id="83bfe-125">For more information about how to apply a deployable package, see [Apply a deployable package](../deployment/create-apply-deployable-package.md).</span></span> <span data-ttu-id="83bfe-126">Lisätietoja käyttöönottopaketin manuaalisesta käyttöönotosta on kohdassa [Käyttöönotettavan paketin asentaminen](../deployment/install-deployable-package.md).</span><span class="sxs-lookup"><span data-stu-id="83bfe-126">For more information about how to manually apply a deployable package, see [Install a deployable package](../deployment/install-deployable-package.md).</span></span>
