---
title: Kustannusten hallinnan vianmääritys
description: Tässä ohjeaiheessa käsitellään sellaisten ongelmien korjaamista, joita kustannusten hallinnan käytössä voi esiintyä.
author: riluan
manager: tfehr
ms.date: 10/13/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: InventAgingStorage, InventAgingStorageChart, InventAgingStorageDetails, InventValueProcess, InventValueReportSetup, InventClosing
audience: Application User
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: riluan
ms.search.validFrom: 2020-10-13
ms.dyn365.ops.version: Release 10.0.15
ms.openlocfilehash: b8c527e578fee6abfeeade99fba8070365c020bd
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 01/15/2021
ms.locfileid: "4983847"
---
# <a name="troubleshoot-cost-management"></a><span data-ttu-id="27218-103">Kustannusten hallinnan vianmääritys</span><span class="sxs-lookup"><span data-stu-id="27218-103">Troubleshoot cost management</span></span>

<span data-ttu-id="27218-104">Tässä ohjeaiheessa käsitellään sellaisten ongelmien korjaamista, joita kustannusten hallinnan käytössä voi esiintyä.</span><span class="sxs-lookup"><span data-stu-id="27218-104">This topic describes how to fix issues that you might encounter while working with cost management.</span></span>

## <a name="functional-gaps-between-the-inventory-valueaging-reports-and-their-storage-versions"></a><span data-ttu-id="27218-105">Varastoarvon ja erääntymisraporttien sekä niiden tallennusversioiden väliset toiminnalliset aukot</span><span class="sxs-lookup"><span data-stu-id="27218-105">Functional gaps between the inventory value/aging reports and their storage versions</span></span>

<span data-ttu-id="27218-106">[Varaston erääntymisraportin tallennus](inventory-aging-report-storage.md)- ja [Varaston arvon tallennusraportti](inventory-value-report-storage.md) -toimintojen avulla Supply Chain Management voi näyttää suuria määriä varastotapahtumia.</span><span class="sxs-lookup"><span data-stu-id="27218-106">The [Inventory aging report storage](inventory-aging-report-storage.md) and [Inventory value storage report](inventory-value-report-storage.md) features enable Supply Chain Management to display large volumes of inventory transactions.</span></span> <span data-ttu-id="27218-107">Kussakin tapauksessa raporttitulokset tallennetaan selausta ja vientiä varten toisin kuin näiden raporttien ei-tallennettavat versiot.</span><span class="sxs-lookup"><span data-stu-id="27218-107">In each case, the report results are saved for browsing and exporting, unlike with the non-storage versions of these reports.</span></span> <span data-ttu-id="27218-108">Näiden raporttien ei-tallennusversioissa on kuitenkin toimintoja, joita ei ole tallennusversioissa.</span><span class="sxs-lookup"><span data-stu-id="27218-108">However, some functionality that exists in the non-storage versions of these reports doesn't exist in the storage versions.</span></span> <span data-ttu-id="27218-109">Seuraavissa aliosissa on erojen yhteenveto ja niiden kiertotavat.</span><span class="sxs-lookup"><span data-stu-id="27218-109">The following subsections summarize the differences and provide workarounds.</span></span>

### <a name="storage-reports-dont-include-subtotals-even-if-they-are-enabled-in-the-report-layout"></a><span data-ttu-id="27218-110">Tallennusraportit eivät sisällä välisummia, vaikka ne olisi otettu käyttöön raporttiasettelussa.</span><span class="sxs-lookup"><span data-stu-id="27218-110">Storage reports don't include subtotals, even if they are enabled in the report layout</span></span>

<span data-ttu-id="27218-111">Välisummat voivat aiheuttaa ongelmia, kun tulos viedään, etenkin jo käyttäjät muuttavat tietuejärjestystä.</span><span class="sxs-lookup"><span data-stu-id="27218-111">Subtotals can cause issues when the result is exported, especially if users change the record sequence.</span></span>

<span data-ttu-id="27218-112">Välisummat voi tarkistaa viemällä tulokseen Microsoft Exceliin.</span><span class="sxs-lookup"><span data-stu-id="27218-112">To check the subtotals, you can export the result into Microsoft Excel.</span></span> <span data-ttu-id="27218-113">Vaihtoehtoisesti välisummat voidaan tarkistaa Supply Chain Managementissa ottamalla *Uusi ruudukon ohjausobjekti*- ja *(Esiversio) Ryhmittely ruudukoissa* -toiminnot käyttöön [ominaisuuksien hallinnassa](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md). Tällä tavoin voidaan tarkastella joustavasti minkä tahansa ryhmän välisumman sarakekohtaisesti.</span><span class="sxs-lookup"><span data-stu-id="27218-113">Alternatively, if you want to check subtotals within Supply Chain Management, use [Feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to enable the *New grid control* and *(Preview) Grouping in grids* features, which provide a much more flexible way to see the subtotal for any group by column.</span></span> <span data-ttu-id="27218-114">Lisätietoja on aiheessa [Ruudukon ominaisuudet](../../fin-ops-core/fin-ops/get-started/grid-capabilities.md).</span><span class="sxs-lookup"><span data-stu-id="27218-114">For more information, see [Grid capabilities](../../fin-ops-core/fin-ops/get-started/grid-capabilities.md).</span></span>

### <a name="inventory-value-storage-report-doesnt-support-ledger-account-information"></a><span data-ttu-id="27218-115">Varastoarvon tallennusraportti ei tue kirjanpitotilin tietoja</span><span class="sxs-lookup"><span data-stu-id="27218-115">Inventory value storage report doesn't support ledger account information</span></span>

<span data-ttu-id="27218-116">Varastotilien saldo saadaan suorittamalla pääkirja, ja tätä saldoa voidaan verrata **Varastoarvon tallennus** -raporttiin.</span><span class="sxs-lookup"><span data-stu-id="27218-116">You can run the trial balance to get the inventory accounts balance and compare that to the **Inventory value storage** report.</span></span>

## <a name="warnings-or-errors-are-shown-when-changing-a-ledger-period-status-without-closing-inventory"></a><span data-ttu-id="27218-117">Varoitusten tai virheiden näyttäminen muutettaessa kirjanpitokauden tilaa varastoa sulkematta</span><span class="sxs-lookup"><span data-stu-id="27218-117">Warnings or errors are shown when changing a ledger period status without closing inventory</span></span>

<span data-ttu-id="27218-118">Microsoft otti seuraavat vahvistukset käyttöön estämään ongelmat, joita kustannuslaskennan virheellinen kauden lopetusprosessi aiheuttaa.</span><span class="sxs-lookup"><span data-stu-id="27218-118">Microsoft introduced the following validations to prevent issues caused by an incorrect period-end process around costing.</span></span> <span data-ttu-id="27218-119">Jos jokin seuraavista virhesanomista avautuu, lisätietoja näiden ongelmien ratkaisemisesta on tietoartikkelissa [KB 4561987](https://fix.lcs.dynamics.com/Issue/Details?kb=4561987&bugId=445351&dbType=3&qc=f514f2adcddcddceec43af58c26ae8a9020effdc7cdfe085d9d0deeb8cc7b6a3).</span><span class="sxs-lookup"><span data-stu-id="27218-119">If you encounter any of the following error messages, refer to [KB 4561987](https://fix.lcs.dynamics.com/Issue/Details?kb=4561987&bugId=445351&dbType=3&qc=f514f2adcddcddceec43af58c26ae8a9020effdc7cdfe085d9d0deeb8cc7b6a3) for more information about how to resolve these issues.</span></span>

- <span data-ttu-id="27218-120">Olet suorittamassa uudelleenlaskennan päivämäärällä %1 (10-02-2019).</span><span class="sxs-lookup"><span data-stu-id="27218-120">You are about to execute a Recalculation with a date %1 (10-02-2019).</span></span> <span data-ttu-id="27218-121">Viimeksi rekisteröity uudelleenlaskenta suorittiin edellisellä kaudella päivämäärällä %2 (20-01-2019).</span><span class="sxs-lookup"><span data-stu-id="27218-121">The last registered Recalculation was executed in a previous period with a date %2 (20-01-2019).</span></span> <span data-ttu-id="27218-122">Varaston sulkemista ei suoriteta päivämäärällä %3 (31-01-2019), jolla kohdistuskauden loppu on rekisteröity.</span><span class="sxs-lookup"><span data-stu-id="27218-122">No execution of an inventory close with a date %3 (31-01-2019) matching period end has been registered.</span></span> <span data-ttu-id="27218-123">Muista suorittaa varaston sulkeminen alkaen päivämäärästä %3 (31-01-2019), jolloin kohdistuskausi päättyy.</span><span class="sxs-lookup"><span data-stu-id="27218-123">Please remember to execute an inventory close as of %3 (31-01-2019) matching the period end.</span></span> <span data-ttu-id="27218-124">Varastojen arvostus, myytyjen tuotteiden kustannukset ja varianssit eivät ehkä ole oikein alareskontrassa tai kirjanpidossa, kunnes tämä on suoritettu.</span><span class="sxs-lookup"><span data-stu-id="27218-124">The valuation of inventories, cost of goods sold, and variances may not be correct in subledger or general ledger until this has been executed.</span></span>

- <span data-ttu-id="27218-125">Olet muuttamassa kirjanpitokauden tila %1 tilaksi %2.</span><span class="sxs-lookup"><span data-stu-id="27218-125">You are about to change the status of ledger period %1 to %2.</span></span> <span data-ttu-id="27218-126">Varaston sulkemista ei suoriteta päivämäärällä %3, jolla kohdistuskauden loppu on rekisteröity.</span><span class="sxs-lookup"><span data-stu-id="27218-126">No execution of inventory close with a date %3 matching period end has been registered.</span></span> <span data-ttu-id="27218-127">Suorita varaston sulkeminen alkaen %3 kohdistuskauden lopusta ennen tilan muuttamista.</span><span class="sxs-lookup"><span data-stu-id="27218-127">Please execute an inventory close as of %3 matching the period end before changing the status.</span></span> <span data-ttu-id="27218-128">Varastojen arvostus, myytyjen tuotteiden kustannukset ja varianssit eivät ehkä ole oikein alareskontrassa tai kirjanpidossa, kunnes tämä on suoritettu.</span><span class="sxs-lookup"><span data-stu-id="27218-128">The valuation of inventories, cost of goods sold, and variances may not be correct in subledger or general ledger until this has been executed.</span></span> <span data-ttu-id="27218-129">Raportoidaan yrityksestä %4.</span><span class="sxs-lookup"><span data-stu-id="27218-129">Reported from legal entity %4.</span></span> <span data-ttu-id="27218-130">Toistaiseksi tämä on vain tiedoksi, mutta vastaisuudessa sinun on suoritettava tällainen toiminto.</span><span class="sxs-lookup"><span data-stu-id="27218-130">For now, it is informational, but you will be required to perform such action in future.</span></span>

- <span data-ttu-id="27218-131">Tilirakennetta %1on muutettu.</span><span class="sxs-lookup"><span data-stu-id="27218-131">The Account structure %1 has been changed.</span></span> <span data-ttu-id="27218-132">Vähintään yhtä päätiliä %2 ei enää ole.</span><span class="sxs-lookup"><span data-stu-id="27218-132">One or more main accounts %2 no longer exist.</span></span> <span data-ttu-id="27218-133">%3 tarvitsee näitä päätilejä päivämäärällä %4.</span><span class="sxs-lookup"><span data-stu-id="27218-133">These Main accounts are required by the %3 with a date %4.</span></span> <span data-ttu-id="27218-134">Lisää nämä päätilit tilirakenteeseen %1 ennen työn %3 jatkamista.</span><span class="sxs-lookup"><span data-stu-id="27218-134">Please add these Main accounts to the Account structure %1 before you can resume the %3 job.</span></span> <span data-ttu-id="27218-135">Toistaiseksi tämä on vain tiedoksi, mutta vastaisuudessa sinun on suoritettava tällainen toiminto.</span><span class="sxs-lookup"><span data-stu-id="27218-135">For now, it is informational, but you will be required to perform such action in future.</span></span>

- <span data-ttu-id="27218-136">Olet sulkemassa varaston päivämäärällä %1(31-01-2019).</span><span class="sxs-lookup"><span data-stu-id="27218-136">You are about to execute an inventory close with a date %1 (31-01-2019).</span></span> <span data-ttu-id="27218-137">Jälkikustannuslaskentaa ei suoriteta päivämäärällä %2 (31-01-2019), jolla kohdistuskauden loppu on rekisteröity.</span><span class="sxs-lookup"><span data-stu-id="27218-137">No execution of backflush costing calculation with a date %2 (31-01-2019) matching period end has been registered.</span></span> <span data-ttu-id="27218-138">Muista suorittaa jälkikustannuslaskentaa päivämäärällä %3 (31-01-2019), jolla kohdistuskausi päättyy.</span><span class="sxs-lookup"><span data-stu-id="27218-138">Please remember to execute a backflush costing calculation with a date of %3 (31-01-2019) matching period end.</span></span> <span data-ttu-id="27218-139">Varastojen arvostus, myytyjen tuotteiden kustannukset ja varianssit eivät ehkä ole oikein alareskontrassa tai kirjanpidossa, kunnes tämä on suoritettu.</span><span class="sxs-lookup"><span data-stu-id="27218-139">The valuation of inventories, cost of goods sold, and variances may not be correct in subledger or general ledger until this has been executed.</span></span>

- <span data-ttu-id="27218-140">Olet suorittamassa jälkikustannuslaskennan päivämäärällä %1 (28-02-2019).</span><span class="sxs-lookup"><span data-stu-id="27218-140">You are about to execute a backflush costing calculation with a date %1 (28-02-2019).</span></span> <span data-ttu-id="27218-141">Viimeksi rekisteröity jälkikustannuslaskenta suorittiin edellisellä kaudella päivämäärällä %2 (31-01-2019).</span><span class="sxs-lookup"><span data-stu-id="27218-141">The last registered backflush costing calculation was executed in a previous period with a date %2 (31-01-2019).</span></span> <span data-ttu-id="27218-142">Varaston sulkemista ei suoriteta päivämäärällä %3 (31-01-2019), jolla kohdistuskauden loppu on rekisteröity.</span><span class="sxs-lookup"><span data-stu-id="27218-142">No execution of an inventory close with a date %3 (31-01-2019) matching a period end has been registered.</span></span>
<span data-ttu-id="27218-143">Muista suorittaa varaston sulkeminen alkaen %3 (31-01-2019), jolloin kohdistuskausi päättyy.</span><span class="sxs-lookup"><span data-stu-id="27218-143">Please remember to execute an inventory close as of %3 (31-01-2019) matching a period end.</span></span> <span data-ttu-id="27218-144">Varastojen arvostus, myytyjen tuotteiden kustannukset ja varianssit eivät ehkä ole oikein alareskontrassa tai kirjanpidossa, kunnes varaston sulkeminen on suoritettu.</span><span class="sxs-lookup"><span data-stu-id="27218-144">The valuation of inventories, cost of goods sold and variances may not be correct in subledger or general ledger until the inventory close has been executed.</span></span>

## <a name="inventory-aging-report-discrepancies"></a><span data-ttu-id="27218-145">Varaston erääntymisraportin ristiriidat</span><span class="sxs-lookup"><span data-stu-id="27218-145">Inventory aging report discrepancies</span></span>

<span data-ttu-id="27218-146">**Varaston erääntymisraportissa** on eri arvot, kun tarkasteltavana on eri varastodimensioita (kuten toimipaikka tai varasto):</span><span class="sxs-lookup"><span data-stu-id="27218-146">The **Inventory aging report** shows different values when viewed at different storage dimensions (such as site or warehouse).</span></span> <span data-ttu-id="27218-147">Lisätietoja raportointilogiikasta on kohdassa [Varaston erääntymisraporttien esimerkkejä ja logiikka](inventory-aging-report.md).</span><span class="sxs-lookup"><span data-stu-id="27218-147">For more information about the reporting logic, see [Inventory aging report examples and logic](inventory-aging-report.md).</span></span>

## <a name="an-update-conflict-occurs-when-the-inventory-valuation-method-is-either-standard-cost-or-moving-average"></a><span data-ttu-id="27218-148">Päivitysristiriita tapahtuu, kun varaston arvostusmenetelmä on joko standardikustannus tai liukuva keskiarvo</span><span class="sxs-lookup"><span data-stu-id="27218-148">An update conflict occurs when the inventory valuation method is either Standard cost or Moving average</span></span>

<span data-ttu-id="27218-149">Kun asiakirjoja, kuten varastokirjauskansioita, ostotilauslaskuja tai myyntitilauslaskuja, kirjataan rinnakkain skaalautuvuuden ja suorituskyvyn vuoksi, tuloksena voi olla virhesanoma päivitysristiriidasta eikä kaikkia asiakirjoja ehkä kirjata.</span><span class="sxs-lookup"><span data-stu-id="27218-149">When you post documents such as inventory journals, purchase order invoices, or sales order invoices in parallel for scalability and performance, you might receive an error message about an update conflict, and some of the documents might not be posted.</span></span> <span data-ttu-id="27218-150">Tämä ongelma voi tapahtua, kun varaston arvostusmenetelmä on joko *standardikustannus* tai *liukuva keskiarvo*.</span><span class="sxs-lookup"><span data-stu-id="27218-150">This issue can occur when the inventory valuation method is either *Standard cost* or *Moving average*.</span></span> <span data-ttu-id="27218-151">Kumpikin menetelmä on jatkuva kustannuslaskentamenetelmä.</span><span class="sxs-lookup"><span data-stu-id="27218-151">Both these methods are perpetual costing methods.</span></span> <span data-ttu-id="27218-152">Lopullinen kustannus määritetään siis kirjauksen aikana.</span><span class="sxs-lookup"><span data-stu-id="27218-152">In other words, the final cost is determined at the time of posting.</span></span>

<span data-ttu-id="27218-153">Jos käytössä on *Liukuva keskiarvo* -menetelmä, virhesanoma muistuttaa seuraavaa esimerkkiä:</span><span class="sxs-lookup"><span data-stu-id="27218-153">If you're using the *Moving average* method, the error message resembles this example:</span></span>

> <span data-ttu-id="27218-154">Varaston arvoa xx.xx ei odoteta suhteellisen kululaskelman jälkeen</span><span class="sxs-lookup"><span data-stu-id="27218-154">Inventory value xx.xx is not expected after the proportional expense calculation</span></span>

<span data-ttu-id="27218-155">Jos käytössä on *Standardikustannus* -menetelmä, virhesanoma muistuttaa seuraavaa esimerkkiä:</span><span class="sxs-lookup"><span data-stu-id="27218-155">If you're using the *Standard cost* method, the error message resembles this example:</span></span>

> <span data-ttu-id="27218-156">Standardikustannus ei vastaa kirjanpitovaraston arvoa päivityksen jälkeen.</span><span class="sxs-lookup"><span data-stu-id="27218-156">The standard cost does not match with the financial inventory value after the update.</span></span> <span data-ttu-id="27218-157">Arvo = xx.xx, Määrä = yy.yy, Vakiokustannus = zz.zz</span><span class="sxs-lookup"><span data-stu-id="27218-157">Value = xx.xx, Qty = yy.yy, Standard cost = zz.zz</span></span>

<span data-ttu-id="27218-158">Nämä virheet voidaan välttää tai niitä voidaan vähentää käyttämällä seuraavia kiertotapoja siihen saakka, kunnes Microsoft julkaisee ongelman korjaavan ratkaisun:</span><span class="sxs-lookup"><span data-stu-id="27218-158">Until Microsoft releases a solution to fix the issue, consider using the following workarounds to help avoid or reduce these errors:</span></span>

- <span data-ttu-id="27218-159">Kirjaa epäonnistuneet asiakirjat uudelleen.</span><span class="sxs-lookup"><span data-stu-id="27218-159">Repost the failed documents.</span></span>
- <span data-ttu-id="27218-160">Luo asiakirjoja, joissa on vähemmän rivejä.</span><span class="sxs-lookup"><span data-stu-id="27218-160">Create documents that have fewer lines.</span></span>
- <span data-ttu-id="27218-161">Vältä desimaaliarvojen käyttämistä standardikustannuksissa.</span><span class="sxs-lookup"><span data-stu-id="27218-161">Avoid decimal values in the standard cost.</span></span> <span data-ttu-id="27218-162">Yritä määrittää vakiokustannus siten, että **Hintamäärä**-kentän arvoksi on määritetty *1*.</span><span class="sxs-lookup"><span data-stu-id="27218-162">Try to define the standard cost so that the **Price quantity** field is set to *1*.</span></span> <span data-ttu-id="27218-163">Jos **Hintamäärä**-arvoksi on määritettävä arvo, joka on suurempi kuin *1*, yritä käyttää yksikön standardikustannuksessa mahdollisimman vähän desimaaleja.</span><span class="sxs-lookup"><span data-stu-id="27218-163">If you must specify a **Price quantity** value that is more than *1*, try to minimize the number of decimal places in the unit standard cost.</span></span> <span data-ttu-id="27218-164">(Parhaassa tapauksessa desimaaleja on vähemmän kuin kaksi.) Yritä välttää standardikustannuksen asetuksina esimerkiksi seuraavia: **Hinta** = *10* ja **Hintamäärä** = *3*. Tässä tapauksessa yksikön vakiokustannukseksi tulee nimittäin 3,333333 (jossa desimaaliarvo toistuu).</span><span class="sxs-lookup"><span data-stu-id="27218-164">(Ideally, there should be fewer than two decimal places.) For example, avoid defining standard cost settings such as **Price** = *10* and **Price quantity** = *3*, because they will produce a unit standard cost of 3.333333 (where the decimal value repeats).</span></span>
- <span data-ttu-id="27218-165">Useimmissa asiakirjoissa kannattaa välttää sama tuotannon ja varaston taloushallinnon dimensioyhdistelmän käyttämistä useilla riveillä.</span><span class="sxs-lookup"><span data-stu-id="27218-165">In a majority of documents, avoid having multiple lines that hold the same combination of product and financial inventory dimensions.</span></span>
- <span data-ttu-id="27218-166">Vähennä rinnakkaisuutta.</span><span class="sxs-lookup"><span data-stu-id="27218-166">Reduce the degree of parallelization.</span></span> <span data-ttu-id="27218-167">(Tässä tapauksessa järjestelmä voi nopeutua, koska päivitysristiriitoja ja uudelleenyrityksiä on vähemmän.)</span><span class="sxs-lookup"><span data-stu-id="27218-167">(In this case, your system might become faster, because fewer update conflicts and retries occur.)</span></span>
