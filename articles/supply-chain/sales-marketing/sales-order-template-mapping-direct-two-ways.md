---
title: Myyntitilausten synkronointi suoraan Salesin ja Supply Chain Managementin välillä
description: Ohjeaiheessa käsitellään malleja ja niiden taustalla olevia tehtäviä, joita käytetään myyntitilausten synkronointiin suoraan Dynamics 365 Salesin ja Dynamics 365 Supply Chain Managementin välillä.
author: ChristianRytt
manager: tfehr
ms.date: 05/09/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: crytt
ms.dyn365.ops.version: July 2017 update
ms.search.validFrom: 2017-07-8
ms.openlocfilehash: 3eaa25f0befcff448250ba2cce8e568fa4a4c707
ms.sourcegitcommit: 4f9912439ff78acf0c754d5bff972c4b85763093
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 04/02/2020
ms.locfileid: "3212960"
---
# <a name="synchronization-of-sales-orders-directly-between-sales-and-supply-chain-management"></a><span data-ttu-id="d811c-103">Myyntitilausten synkronointi suoraan Salesin ja Supply Chain Managementin välillä</span><span class="sxs-lookup"><span data-stu-id="d811c-103">Synchronization of sales orders directly between Sales and Supply Chain Management</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="d811c-104">Ohjeaiheessa käsitellään malleja ja niiden taustalla olevia tehtäviä, joita käytetään myyntitilausten synkronointiin suoraan Dynamics 365 Salesin ja Dynamics 365 Supply Chain Managementin välillä.</span><span class="sxs-lookup"><span data-stu-id="d811c-104">The topic discusses the templates and underlying tasks that are used to run synchronization of sales orders directly between Dynamics 365 Sales and Dynamics 365 Supply Chain Management.</span></span>

## <a name="data-flow-in-prospect-to-cash"></a><span data-ttu-id="d811c-105">Prospektista käteiseksi -ratkaisun tiedonkulku</span><span class="sxs-lookup"><span data-stu-id="d811c-105">Data flow in Prospect to cash</span></span>

<span data-ttu-id="d811c-106">Prospektista käteiseksi -ratkaisu käyttää tietojen integrointitoimintoa Supply Chain Managementin and Salesin esiintymien tietojen synkronoinnissa.</span><span class="sxs-lookup"><span data-stu-id="d811c-106">The Prospect to cash solution uses the Data integration feature to synchronize data across instances of Supply Chain Management and Sales.</span></span> <span data-ttu-id="d811c-107">Tietojen integrointitoiminnon prospektista käteiseksi -mallit mahdollistavat tilien, yhteyshenkilöiden, tuotteiden, myyntitarjousten, myyntitilausten ja myyntilaskujen tietojen kulun Supply Chain Managementin ja Salesin välillä.</span><span class="sxs-lookup"><span data-stu-id="d811c-107">The Prospect to cash templates that are available with the Data integration feature enable the flow of data for accounts, contacts, products, sales quotations, sales orders, and sales invoices between Supply Chain Management and Sales.</span></span> <span data-ttu-id="d811c-108">Seuraava kuva näyttää, miten tiedot synkronoidaan Supply Chain Managementin ja Salesin välillä.</span><span class="sxs-lookup"><span data-stu-id="d811c-108">The following illustration shows how the data is synchronized between Supply Chain Management and Sales.</span></span>

<span data-ttu-id="d811c-109">[![Prospektista käteiseksi -ratkaisun tiedonkulku](./media/prospect-to-cash-data-flow.png)](./media/prospect-to-cash-data-flow.png)</span><span class="sxs-lookup"><span data-stu-id="d811c-109">[![Data flow in Prospect to cash](./media/prospect-to-cash-data-flow.png)](./media/prospect-to-cash-data-flow.png)</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="d811c-110">Mallit ja tehtävät</span><span class="sxs-lookup"><span data-stu-id="d811c-110">Templates and tasks</span></span>

<span data-ttu-id="d811c-111">Näet käytettävissä olevat mallit avaamalla [Power Apps-hallintakeskuksen](https://preview.admin.powerapps.com/dataintegration).</span><span class="sxs-lookup"><span data-stu-id="d811c-111">To access the available templates, open [Power Apps Admin Center](https://preview.admin.powerapps.com/dataintegration).</span></span> <span data-ttu-id="d811c-112">Valitse **Projektit** ja valitse sitten julkisia malleja oikeassa yläkulmassa olevan **Uusi projekti** -kohdan avulla.</span><span class="sxs-lookup"><span data-stu-id="d811c-112">Select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="d811c-113">Seuraavia malleja ja niiden taustalla olevia tehtäviä käytetään synkronoitaessa myyntitilauksia suoraan Salesin ja Supply Chain Managementin välillä.</span><span class="sxs-lookup"><span data-stu-id="d811c-113">The following templates and underlying tasks are used to run synchronization of sales orders directly between Sales and Supply Chain Management.</span></span>

- <span data-ttu-id="d811c-114">**Mallien nimet tietojen integroinnissa:**</span><span class="sxs-lookup"><span data-stu-id="d811c-114">**Names of the templates in Data integration:**</span></span> 

    - <span data-ttu-id="d811c-115">Myyntitilaukset (Salesista Supply Chain Managementiin) - suora</span><span class="sxs-lookup"><span data-stu-id="d811c-115">Sales Orders (Sales to Supply Chain Management) - Direct</span></span>
    - <span data-ttu-id="d811c-116">Myyntitilaukset (Supply Chain Managementista Salesiin) - suora</span><span class="sxs-lookup"><span data-stu-id="d811c-116">Sales Orders (Supply Chain Management to Sales) - Direct</span></span>

- <span data-ttu-id="d811c-117">**Tehtävien nimet tietojen integrointiprojektissa:**</span><span class="sxs-lookup"><span data-stu-id="d811c-117">**Names of the tasks in the Data integration project:**</span></span>

    - <span data-ttu-id="d811c-118">OrderHeader</span><span class="sxs-lookup"><span data-stu-id="d811c-118">OrderHeader</span></span>
    - <span data-ttu-id="d811c-119">OrderLine</span><span class="sxs-lookup"><span data-stu-id="d811c-119">OrderLine</span></span>

<span data-ttu-id="d811c-120">Seuraavat synkronointitehtävät tarvitaan, ennen kuin myyntilaskujen otsikot ja rivit voidaan synkronoida:</span><span class="sxs-lookup"><span data-stu-id="d811c-120">The following synchronization tasks are required before synchronization of sales invoice headers and lines can occur:</span></span>

- <span data-ttu-id="d811c-121">Tuotteet (Supply Chain Managementista Salesiin) - suora</span><span class="sxs-lookup"><span data-stu-id="d811c-121">Products (Supply Chain Management to Sales) - Direct</span></span>
- <span data-ttu-id="d811c-122">Tilit (Salesista Supply Chain Managementiin) - Suora (jos käytössä)</span><span class="sxs-lookup"><span data-stu-id="d811c-122">Accounts (Sales to Supply Chain Management) - Direct (if used)</span></span>
- <span data-ttu-id="d811c-123">Yhteyshenkilöistä asiakkaisiin (Salesista Supply Chain Managementiin) - Suora (jos käytössä)</span><span class="sxs-lookup"><span data-stu-id="d811c-123">Contacts to Customers (Sales to Supply Chain Management) - Direct (if used)</span></span>

## <a name="entity-set"></a><span data-ttu-id="d811c-124">Yksikköjoukko</span><span class="sxs-lookup"><span data-stu-id="d811c-124">Entity set</span></span>

| <span data-ttu-id="d811c-125">Toimitusketjun hallinta</span><span class="sxs-lookup"><span data-stu-id="d811c-125">Supply Chain Management</span></span>  | <span data-ttu-id="d811c-126">Myynti</span><span class="sxs-lookup"><span data-stu-id="d811c-126">Sales</span></span>             |
|-------------------------|-------------------|
| <span data-ttu-id="d811c-127">CDS-myyntitilauksien otsikot</span><span class="sxs-lookup"><span data-stu-id="d811c-127">CDS sales order headers</span></span> | <span data-ttu-id="d811c-128">SalesOrders</span><span class="sxs-lookup"><span data-stu-id="d811c-128">SalesOrders</span></span>       |
| <span data-ttu-id="d811c-129">CDS-myyntitilausrivit</span><span class="sxs-lookup"><span data-stu-id="d811c-129">CDS sales order lines</span></span>   | <span data-ttu-id="d811c-130">SalesOrderDetails</span><span class="sxs-lookup"><span data-stu-id="d811c-130">SalesOrderDetails</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="d811c-131">Yksikön työnkulku</span><span class="sxs-lookup"><span data-stu-id="d811c-131">Entity flow</span></span>

<span data-ttu-id="d811c-132">Myyntitilaukset luodaan Salesissa ja ne synkronoidaan Supply Chain Managementiin, kun **Suorita projekti** käynnistetään projektille, joka perustuu **Myyntitilaukset (Salesista Supply Chain Managementiin) - suora** -malliin.</span><span class="sxs-lookup"><span data-stu-id="d811c-132">Sales orders are created in Sales and synchronized to Supply Chain Management when **Run project** is triggered for a project based on the **Sales Orders (Sales to Supply Chain Management) - Direct** template.</span></span> <span data-ttu-id="d811c-133">Voit aktivoida ja synkronoida myyntitilaukset Salesista vain, jos **tilaustuotteet** koostuvat vain ulkoisesti ylläpidetyistä tuotteista.</span><span class="sxs-lookup"><span data-stu-id="d811c-133">You can only activate and synchronize orders from Sales if all **Order Products** consist of products that are externally maintained.</span></span> <span data-ttu-id="d811c-134">Tämän vuoksi käsin lisättyjä tuotteita ei voi olla.</span><span class="sxs-lookup"><span data-stu-id="d811c-134">Therefore, there can be no write-in products.</span></span> <span data-ttu-id="d811c-135">Kun tilaus on aktivoitu, myyntitilaus määritetään vain luku -tilaan käyttöliittymässä.</span><span class="sxs-lookup"><span data-stu-id="d811c-135">After the order is activated, the sales order becomes read-only in the user interface (UI).</span></span> <span data-ttu-id="d811c-136">Tässä vaiheessa päivitykset tehdään Supply Chain Managementissa.</span><span class="sxs-lookup"><span data-stu-id="d811c-136">At that point, the updates are made from Supply Chain Management.</span></span> <span data-ttu-id="d811c-137">Kun myyntitilauksen tila on **Vahvistettu**, **Myyntitilaukset (Supply Chain Managementista Salesiin) - suora** -malliin perustuvaa projektia voi käyttää Supply Chain Managementista Salesiin tapahtuvien päivitysten tai toimitusten tilojen synkronoinnissa.</span><span class="sxs-lookup"><span data-stu-id="d811c-137">After the sales order has a status of **Confirmed**, the a project based on the **Sales Orders (Supply Chain Management to Sales) - Direct** template can be used to synchronize updates or fulfillment status from Supply Chain Management to Sales.</span></span>

<span data-ttu-id="d811c-138">Sinun ei tarvitse luoda tilauksia Sales-sovelluksessa.</span><span class="sxs-lookup"><span data-stu-id="d811c-138">You don't have to create orders in Sales.</span></span> <span data-ttu-id="d811c-139">Sen sijaan voit luoda uusia myyntitilauksia Supply Chain Managementissa.</span><span class="sxs-lookup"><span data-stu-id="d811c-139">You can create new sales orders in Supply Chain Management instead.</span></span> <span data-ttu-id="d811c-140">Kun myyntitilauksen tilaksi on määritetty **Vahvista**, se synkronoidaan Salesiin edellisessä kappaleessa kuvatulla tavalla.</span><span class="sxs-lookup"><span data-stu-id="d811c-140">After a sales order has a status of **Confirmed**, it's synchronized to Sales as described in the previous paragraph.</span></span>

<span data-ttu-id="d811c-141">Supply Chain Managementin mallin suodattimet auttavat varmistamaan, että synkronointiin sisällytetään vain halutut myyntitilaukset.</span><span class="sxs-lookup"><span data-stu-id="d811c-141">In Supply Chain Management, filters in the template help guarantee that only the relevant sales orders are included in the synchronization:</span></span>

- <span data-ttu-id="d811c-142">Sekä myyntitilauksen tilaava asiakas että laskutusasiakas on saatava Sales-sovelluksesta, jotta nämä tiedot sisällytetään synkronointiin.</span><span class="sxs-lookup"><span data-stu-id="d811c-142">On the sales order, both the ordering customer and the invoicing customer have to originate from Sales to be included in the synchronization.</span></span> <span data-ttu-id="d811c-143">Supply Chain Managementin **OrderingCustomerIsExternallyMaintained**- ja **InvoiceCustomerIsExternallyMaintained**-kenttiä käytetään myyntitilausten suodattamiseen tietoyksiköistä.</span><span class="sxs-lookup"><span data-stu-id="d811c-143">In Supply Chain Management, the **OrderingCustomerIsExternallyMaintained** and **InvoiceCustomerIsExternallyMaintained** fields are used to filter sales orders from the data entities.</span></span>
- <span data-ttu-id="d811c-144">Myyntitilaus on vahvistettava Supply Chain Managementissa.</span><span class="sxs-lookup"><span data-stu-id="d811c-144">The sales order in Supply Chain Management must be confirmed.</span></span> <span data-ttu-id="d811c-145">Salesiin synkronoidaan vain vahvistetut myyntitilaukset tai myyntitilaukset joilla on ylempi käsittelytila, kuten **Lähetetty** tai **Laskutettu**.</span><span class="sxs-lookup"><span data-stu-id="d811c-145">Only confirmed sales orders or sales orders that have a higher processing status, such as **Shipped** or **Invoiced**, are synchronized to Sales.</span></span>
- <span data-ttu-id="d811c-146">Kun myyntitilaus on luotu tai kun sitä on muokattu, **Laske kokonaismyynti** -eräajo on suoritettava Supply Chain Managementissa.</span><span class="sxs-lookup"><span data-stu-id="d811c-146">After a sales order is created or modified, the **Calculate sales totals** batch job in Supply Chain Management must be run.</span></span> <span data-ttu-id="d811c-147">Salesiin synkronoidaan vain myyntitilaukset, joiden loppusummat on laskettu.</span><span class="sxs-lookup"><span data-stu-id="d811c-147">Only sales orders where sales totals are calculated will be synchronized to Sales.</span></span>

## <a name="freight-tax"></a><span data-ttu-id="d811c-148">Rahdin verot</span><span class="sxs-lookup"><span data-stu-id="d811c-148">Freight tax</span></span>

<span data-ttu-id="d811c-149">Sales ei tue veroa otsikkotasolla, koska verot tallennetaan rivitasolle.</span><span class="sxs-lookup"><span data-stu-id="d811c-149">Sales doesn't support tax at the header level, because tax is stored at the line level.</span></span> <span data-ttu-id="d811c-150">Kun Supply Chain Managementin otsikkotason veroja, kuten rahdin veroja, halutaan tukea, järjestelmä synkronoi verot Salesiin käsin lisättynä tuotteena, jonka nimi on **Rahdin vero**. Se synkronoi myös Supply Chain Managementista verosumman.</span><span class="sxs-lookup"><span data-stu-id="d811c-150">To support tax at the header level from Supply Chain Management, such as tax on freight, the system synchronizes tax to Sales as a write-in product that is named **Freight Tax**, and that has the tax amount from Supply Chain Management.</span></span> <span data-ttu-id="d811c-151">Näin Salesin vakiohinnan laskentaa voidaan käyttää kokonaissummissa, vaikka Supply Chain Managementissa olisi käytössä otsikkotason vero.</span><span class="sxs-lookup"><span data-stu-id="d811c-151">In this way, the standard price calculation in Sales can be used for totals, even when there is tax at the header level from Supply Chain Management.</span></span>

## <a name="discount-calculation-and-rounding"></a><span data-ttu-id="d811c-152">Alennuksen laskeminen ja pyöristäminen</span><span class="sxs-lookup"><span data-stu-id="d811c-152">Discount calculation and rounding</span></span>

<span data-ttu-id="d811c-153">Salesin alennuksen laskentamalli on erilainen kuin Supply Chain Managementin alennuksen laskentamalli.</span><span class="sxs-lookup"><span data-stu-id="d811c-153">The discount calculation model in Sales differs from the discount calculation model in Supply Chain Management.</span></span> <span data-ttu-id="d811c-154">Supply Chain Managementissa myyntirivin lopullinen alennussumma voi olla alennussummien ja alennusprosenttien yhdistelmän tulos.</span><span class="sxs-lookup"><span data-stu-id="d811c-154">In Supply Chain Management, the final discount amount on a sales line can be the result of a combination of discount amounts and discount percentages.</span></span> <span data-ttu-id="d811c-155">Jos tämä lopullinen alennussumma jaetaan rivin määrällä, tulos saatetaan pyöristää.</span><span class="sxs-lookup"><span data-stu-id="d811c-155">If this final discount amount is divided by the quantity on the line, rounding can occur.</span></span> <span data-ttu-id="d811c-156">Pyöristystä ei kuitenkaan tehdä, jos pyöristetty yksikkökohtainen alennussumma synkronoidaan Salesiin.</span><span class="sxs-lookup"><span data-stu-id="d811c-156">However, this rounding isn't considered if a rounded per-unit discount amount is synchronized to Sales.</span></span> <span data-ttu-id="d811c-157">Voit varmistaa, että Supply Chain Management -myyntirivin koko alennussumma synkronoidaan oikein Salesiin, kun koko summa synkronoidaan ilman, että sitä jaetaan rivimäärällä.</span><span class="sxs-lookup"><span data-stu-id="d811c-157">To help guarantee that the full discount amount from a sales line in Supply Chain Management is correctly synchronized to Sales, the full amount must be synchronized without being divided by the line quantity.</span></span> <span data-ttu-id="d811c-158">Tämän vuoksi Salesin **Alennuksen laskutapa** -kohdan arvoksi on määritettävä **Rivinimike**.</span><span class="sxs-lookup"><span data-stu-id="d811c-158">Therefore, you must define the **Discount calculation method** as **Line item** in Sales.</span></span>

<span data-ttu-id="d811c-159">Kun myyntitilausrivi synkronoidaan Salesista Supply Chain Managementiin, käytetään koko rivin alennussummaa.</span><span class="sxs-lookup"><span data-stu-id="d811c-159">When a sales order line is synchronized from Sales to Supply Chain Management, the full line discount amount is used.</span></span> <span data-ttu-id="d811c-160">Koska Supply Chain Managementissa ei ole kenttää, johon rivin koko alennussumman voisi tallentaa, summa jaetaan määrällä ja tallennetaan **Rivialennus**-kenttään.</span><span class="sxs-lookup"><span data-stu-id="d811c-160">Because Supply Chain Management has no field that can store the full discount amount for a line, the amount is divided by the quantity and stored in the **Line discount** field.</span></span> <span data-ttu-id="d811c-161">Tässä jaossa tapahtuva mahdollinen pyöristys tallennetaan myyntirivin **Myynnin kulut** -kenttään.</span><span class="sxs-lookup"><span data-stu-id="d811c-161">Any rounding that occurs in this division is stored in the **Sales charges** field on the sales line.</span></span>

### <a name="example"></a><span data-ttu-id="d811c-162">Esimerkki</span><span class="sxs-lookup"><span data-stu-id="d811c-162">Example</span></span>

<span data-ttu-id="d811c-163">**Synkronointi Salesista Supply Chain Managementiin**</span><span class="sxs-lookup"><span data-stu-id="d811c-163">**Synchronization from Sales to Supply Chain Management**</span></span>

- <span data-ttu-id="d811c-164">**Sales:** Määrä = 3, rivikohtainen alennus = 10,00 $</span><span class="sxs-lookup"><span data-stu-id="d811c-164">**Sales:** Quantity = 3, per-line discount = $10.00</span></span>
- <span data-ttu-id="d811c-165">**Supply Chain Management:** Määrä = 3, rivin alennussumma = $3,33, myynnin kulut = -$0,01</span><span class="sxs-lookup"><span data-stu-id="d811c-165">**Supply Chain Management:** Quantity = 3, line discount amount = $3.33, sales charge = -$0.01</span></span> 

<span data-ttu-id="d811c-166">**Synkronointi Supply Chain Managementista Salesiin**</span><span class="sxs-lookup"><span data-stu-id="d811c-166">**Synchronization from Supply Chain Management to Sales**</span></span>

- <span data-ttu-id="d811c-167">**Supply Chain Management:** Määrä = 3, rivin alennussumma = $3,33, myynnin kulut = -$0,01</span><span class="sxs-lookup"><span data-stu-id="d811c-167">**Supply Chain Management:** Quantity = 3, line discount amount = $3.33, sales charge = -$0.01</span></span>
- <span data-ttu-id="d811c-168">**Sales:** Määrä = 3, rivikohtainen alennus = (3 × 3,33 $) + 0,01 $ = 10,00 $</span><span class="sxs-lookup"><span data-stu-id="d811c-168">**Sales:** Quantity = 3, per-line discount = (3 × $3.33) + $0.01 = $10.00</span></span>

## <a name="prospect-to-cash-solution-for-sales"></a><span data-ttu-id="d811c-169">Salesin ratkaisu prospektista käteiseksi</span><span class="sxs-lookup"><span data-stu-id="d811c-169">Prospect to cash solution for Sales</span></span>

<span data-ttu-id="d811c-170">**Tilaus**-yksikköön on lisätty uusia kenttiä, jotka näkyvät sivulla:</span><span class="sxs-lookup"><span data-stu-id="d811c-170">New fields have been added to the **Order** entity and appear on the page:</span></span>

- <span data-ttu-id="d811c-171">**Ulkoisesti ylläpidetty** – Määritä tämän vaihtoehdon arvoksi **Kyllä**, kun tilaus on peräisin Supply Chain Managementista.</span><span class="sxs-lookup"><span data-stu-id="d811c-171">**Is Maintained Externally** – Set this option to **Yes** when the order is coming from Supply Chain Management.</span></span>
- <span data-ttu-id="d811c-172">**Käsittelytila** – Tämä kenttä näyttää tilauksen käsittelyn tilan Supply Chain Managementissa.</span><span class="sxs-lookup"><span data-stu-id="d811c-172">**Processing status** – This field shows the processing status of the order in Supply Chain Management.</span></span> <span data-ttu-id="d811c-173">Käytettävissä ovat seuraavat arvot:</span><span class="sxs-lookup"><span data-stu-id="d811c-173">The following values are available:</span></span>

    - <span data-ttu-id="d811c-174">**Luonnos** – alkuperäinen tila, jossa tilaus luodaan Salesissa.</span><span class="sxs-lookup"><span data-stu-id="d811c-174">**Draft** – The initial status when an order is created in Sales.</span></span> <span data-ttu-id="d811c-175">Vain tässä käsittelytilassa olevia tilauksia voi muokata Salesissa.</span><span class="sxs-lookup"><span data-stu-id="d811c-175">In Sales, only orders with this processing status can be edited.</span></span>
    - <span data-ttu-id="d811c-176">**Aktiivinen** – tila sen jälkeen, kun tilaus on aktivoitu Salesissa **Aktivoi**-painikkeen avulla.</span><span class="sxs-lookup"><span data-stu-id="d811c-176">**Active** – The status after the order is activated in Sales by using the **Activate** button.</span></span>
    - <span data-ttu-id="d811c-177">**Vahvistettu**</span><span class="sxs-lookup"><span data-stu-id="d811c-177">**Confirmed**</span></span>
    - <span data-ttu-id="d811c-178">**Pakkausluettelo**</span><span class="sxs-lookup"><span data-stu-id="d811c-178">**Packing Slip**</span></span>
    - <span data-ttu-id="d811c-179">**Laskutettu**</span><span class="sxs-lookup"><span data-stu-id="d811c-179">**Invoiced**</span></span>
    - <span data-ttu-id="d811c-180">**Keräilty**</span><span class="sxs-lookup"><span data-stu-id="d811c-180">**Picked**</span></span>
    - <span data-ttu-id="d811c-181">**Osittain keräilty**</span><span class="sxs-lookup"><span data-stu-id="d811c-181">**Partially Picked**</span></span>
    - <span data-ttu-id="d811c-182">**Osittain pakattu**</span><span class="sxs-lookup"><span data-stu-id="d811c-182">**Partially Packed**</span></span>
    - <span data-ttu-id="d811c-183">**Lähetetty**</span><span class="sxs-lookup"><span data-stu-id="d811c-183">**Shipped**</span></span>
    - <span data-ttu-id="d811c-184">**Osittain lähetetty**</span><span class="sxs-lookup"><span data-stu-id="d811c-184">**Partially Shipped**</span></span>
    - <span data-ttu-id="d811c-185">**Osittain laskutettu**</span><span class="sxs-lookup"><span data-stu-id="d811c-185">**Partially Invoiced**</span></span>
    - <span data-ttu-id="d811c-186">**Peruutettu**</span><span class="sxs-lookup"><span data-stu-id="d811c-186">**Cancelled**</span></span>

<span data-ttu-id="d811c-187">**Sisältää vain ulkoisesti ylläpidettyjä tuotteita** -asetusta käytetään tilauksen aktivoinnin aikana. Sen avulla seurataan johdonmukaisesti, koostuuko myyntitilaus kokonaan ulkoisesti ylläpidetyistä tuotteista.</span><span class="sxs-lookup"><span data-stu-id="d811c-187">The **Has Externally Maintained Products Only** setting is used during order activation to consistently track whether a sales order consists entirely of externally maintained products.</span></span> <span data-ttu-id="d811c-188">Jos myyntitilauksessa on vain ulkoisesti ylläpidettyjä tuotteita, tuotteita ylläpidetään Supply Chain Managementissa.</span><span class="sxs-lookup"><span data-stu-id="d811c-188">If a sales order consists entirely of externally maintained products, the products are maintained in Supply Chain Management.</span></span> <span data-ttu-id="d811c-189">Tämä asetus auttaa varmistamaan, ettet aktivoi ja yritä synkronoida sellaisia myyntitilausrivejä, joissa on tuotteita, joita Supply Chain Management ei tunne.</span><span class="sxs-lookup"><span data-stu-id="d811c-189">This setting helps guarantee that you don't activate and try to synchronize sales order lines that have products that are unknown to Supply Chain Management.</span></span>

<span data-ttu-id="d811c-190">**Myyntitilaus**-sivun **Luo lasku**, **Peruuta tilaus**, **Laske uudelleen**, **Hae tuotteet** ja **Hae osoite** -painikkeet on piilotettu ulkoisesti ylläpidetyissä tilauksissa, koska laskut luodaan Supply Chain Managementissa, josta ne synkronoidaan Salesiin.</span><span class="sxs-lookup"><span data-stu-id="d811c-190">The **Create Invoice**, **Cancel Order**, **Recalculate**, **Get Products**, and **Lookup Address** buttons on the **Sales order** page are hidden for externally maintained orders, because invoices will be created in Supply Chain Management and synchronized to Sales.</span></span> <span data-ttu-id="d811c-191">Näitä tilauksia ei voi muokata, sillä myyntitilaustiedot synkronoidaan Supply Chain Managementista aktivoinnin jälkeen.</span><span class="sxs-lookup"><span data-stu-id="d811c-191">These orders can't be edited, because sales order information will be synchronized from Supply Chain Management after activation.</span></span>

<span data-ttu-id="d811c-192">Myyntitilauksen tila pysyy **aktiivisena**, jotta muutokset Supply Chain Managementista siirtyvät Salesin myyntitilaukseen.</span><span class="sxs-lookup"><span data-stu-id="d811c-192">The sales order status will remain **Active** to help guarantee that changes from Supply Chain Management can flow to the sales order in Sales.</span></span> <span data-ttu-id="d811c-193">Voit ohjata tätä toimintaa määrittämällä **Tilakoodi \[tila\]**-arvoksi **Aktiivinen** tietojen integrointiprojektissa.</span><span class="sxs-lookup"><span data-stu-id="d811c-193">To control this behavior, set the default **Statecode \[Status\]** value to **Active** in the Data integration project.</span></span>

## <a name="preconditions-and-mapping-setup"></a><span data-ttu-id="d811c-194">Edellytykset ja yhdistämismääritykset</span><span class="sxs-lookup"><span data-stu-id="d811c-194">Preconditions and mapping setup</span></span>

<span data-ttu-id="d811c-195">Seuraavat asetukset tulee päivittää järjestelmissä ennen myyntitilausten synkronointia.</span><span class="sxs-lookup"><span data-stu-id="d811c-195">Before you synchronize sales orders, it's important that you update the following settings in the systems.</span></span>

### <a name="setup-in-sales"></a><span data-ttu-id="d811c-196">Asetukset Salesissa</span><span class="sxs-lookup"><span data-stu-id="d811c-196">Setup in Sales</span></span>

- <span data-ttu-id="d811c-197">Varmista, että sen käyttäjän ryhmän käyttöoikeudet on määritetty, jolle Salesissa asetettu yhteys on määritetty.</span><span class="sxs-lookup"><span data-stu-id="d811c-197">Make sure that permissions are set up for the team that the user from your Sales connection set is assigned to.</span></span> <span data-ttu-id="d811c-198">Jos käytät esittelytietoja, käyttäjällä on usein järjestelmänvalvojan käyttöoikeudet, mutta ryhmällä ei.</span><span class="sxs-lookup"><span data-stu-id="d811c-198">If you're using demo data, the user usually has admin access, but the team doesn't have admin access.</span></span> <span data-ttu-id="d811c-199">Jos ryhmällä ei ole järjestelmänvalvojan käyttöoikeuksia, kun suoritat projektin tietojen integrointiohjelmasta, saat virheilmoituksen, jossa kerrotaan ensisijaisen ryhmän puuttumisesta.</span><span class="sxs-lookup"><span data-stu-id="d811c-199">If the team doesn't have admin access, when you run the project from Data integration, you will receive an error message that states that the Principal team is missing.</span></span>

    <span data-ttu-id="d811c-200">Siirry kohtaan **Asetukset** &gt; **Suojaus** &gt; **Ryhmät** ja valitse haluamasi ryhmä. Valitse **Roolien hallinta** ja valitse sitten halutut käyttöoikeudet, kuten **järjestelmänvalvoja**.</span><span class="sxs-lookup"><span data-stu-id="d811c-200">Go to **Settings** &gt; **Security** &gt; **Teams**, select the relevant team, select **Manage Roles**, and select a role that has the desired permissions, such as **System Administrator**.</span></span>

- <span data-ttu-id="d811c-201">Voit varmistaa alennusten oikean laskennan sekä Salesissa että Supply Chain Managementissa valitsemalla **Alennuksen laskentatapa** -asetukseksi **Rivinimike**.</span><span class="sxs-lookup"><span data-stu-id="d811c-201">To ensure correct calculation of discounts in both Sales and Supply Chain Management **Discount calculation method** must be set to **Line item**.</span></span>
- <span data-ttu-id="d811c-202">Siirry kohtaan **Asetukset** &gt; **Hallinto** &gt; **Järjestelmäasetukset** &gt; **Sales** ja varmista, että käytössä ovat seuraavat asetukset:</span><span class="sxs-lookup"><span data-stu-id="d811c-202">Go to **Settings** &gt; **Administration** &gt; **System settings** &gt; **Sales**, and make sure that the following settings are used:</span></span>

    - <span data-ttu-id="d811c-203">**Käytä järjestelmän hinnanlaskentajärjestelmää** -asetuksen arvoksi on määritetty **Kyllä**.</span><span class="sxs-lookup"><span data-stu-id="d811c-203">The **Use system prizing calculation system** option is set to **Yes**.</span></span>
    - <span data-ttu-id="d811c-204">**Alennuksen laskutapa** -kentän arvoksi on määritetty **Rivinimike**.</span><span class="sxs-lookup"><span data-stu-id="d811c-204">The **Discount calculation method** field is set to **Line item**.</span></span>

### <a name="setup-in-supply-chain-management"></a><span data-ttu-id="d811c-205">Määritys Supply Chain Managementissa</span><span class="sxs-lookup"><span data-stu-id="d811c-205">Setup in Supply Chain Management</span></span>

- <span data-ttu-id="d811c-206">Siirry kohtaan **Myynti ja markkinointi** &gt; **Kausittaiset tehtävät** &gt; **Laske kokonaismyynti**. Määritä sitten erätyönä suoritettava työ.</span><span class="sxs-lookup"><span data-stu-id="d811c-206">Go to **Sales and marketing** &gt; **Periodic tasks** &gt; **Calculate sales totals**, and set the job to run as a batch job.</span></span> <span data-ttu-id="d811c-207">Määritä **Laske myyntitilausten loppusummat** -vaihtoehdon arvoksi **Kyllä**.</span><span class="sxs-lookup"><span data-stu-id="d811c-207">Set the **Calculate totals for sales orders** option to **Yes**.</span></span> <span data-ttu-id="d811c-208">Tämä vaihe on tärkeä, koska Salesiin synkronoidaan vain myyntitilaukset, joiden loppusummat on laskettu.</span><span class="sxs-lookup"><span data-stu-id="d811c-208">This step is important, because only sales orders where sales totals are calculated will be synchronized to Sales.</span></span> <span data-ttu-id="d811c-209">Erätyön toistovälin tulisi olla sama kuin myyntitilausten synkronoinnin toistoväli.</span><span class="sxs-lookup"><span data-stu-id="d811c-209">The frequency of the batch job should be aligned with the frequency of sales order synchronization.</span></span>

<span data-ttu-id="d811c-210">Jos käytät myös työtilausten integrointia, sinun on määritettävä myynnin alkuperä.</span><span class="sxs-lookup"><span data-stu-id="d811c-210">If you also use work order integration, you need to set up the sales origin.</span></span> <span data-ttu-id="d811c-211">Myynnin alkuperän avulla Field Servicen työtilauksista luodut myyntitilaukset voidaan erottaa Supply Chain Managementissa.</span><span class="sxs-lookup"><span data-stu-id="d811c-211">The sales origin is used to distinguish sales orders in Supply Chain Management that were created from work orders in Field Service.</span></span> <span data-ttu-id="d811c-212">Kun myyntitilauksen myynnin alkuperätyyppi on **Työtilauksen integrointi**, myyntitilauksen ylätunnisteessa on **Ulkoisen työtilauksen tila** -kenttä.</span><span class="sxs-lookup"><span data-stu-id="d811c-212">When a sales order has a sales origin of the **Work order integration** type, the **External work order status** field appears on the sales order header.</span></span> <span data-ttu-id="d811c-213">Myynnin alkuperä varmistaa, että Field Servicen työtilauksista luodut myyntitilaukset suodatetaan pois synkronoitaessa myyntitilausta Supply Chain Managementista Field Serviceen.</span><span class="sxs-lookup"><span data-stu-id="d811c-213">Additionally, the sales origin ensures that sales orders that were created from work orders in Field Service are filtered out during sales order synchronization from Supply Chain Management to Field Service.</span></span>

1. <span data-ttu-id="d811c-214">Valitse **Myynti ja markkinointi** \> **Asetukset** \> **Myyntitilaukset** \> **Myynnin alkuperä**.</span><span class="sxs-lookup"><span data-stu-id="d811c-214">Go to **Sales and marketing** \> **Setup** \> **Sales orders** \> **Sales origin**.</span></span>
2. <span data-ttu-id="d811c-215">Luo uusi myynnin alkuperä valitsemalla **Uusi**.</span><span class="sxs-lookup"><span data-stu-id="d811c-215">Select **New** to create a new sales origin.</span></span>
3. <span data-ttu-id="d811c-216">Anna **Myynnin alkuperä** -kentässä myynnin alkuperän nimi, kuten **SalesOrder**.</span><span class="sxs-lookup"><span data-stu-id="d811c-216">In the **Sales origin** field, enter a name for the sales origin, such as **SalesOrder**.</span></span>
4. <span data-ttu-id="d811c-217">Kirjoita **Kuvaus**-kenttään kuvaus, kuten **Myyntitilaus Salesista**.</span><span class="sxs-lookup"><span data-stu-id="d811c-217">In the **Description** field, enter a description, such as **Sales Order from Sales**.</span></span>
5. <span data-ttu-id="d811c-218">Valitse **Alkuperän tyypin määritys** -valintaruutu.</span><span class="sxs-lookup"><span data-stu-id="d811c-218">Select the **Origin type assignment** check box.</span></span>
6. <span data-ttu-id="d811c-219">Valitse **Myynnin alkuperän tyyppi** -kentässä **Myyntitilauksen integrointi**.</span><span class="sxs-lookup"><span data-stu-id="d811c-219">Set the **Sales origin type** field to **Sales order integration**.</span></span>
7. <span data-ttu-id="d811c-220">Valitse **Tallenna**.</span><span class="sxs-lookup"><span data-stu-id="d811c-220">Select **Save**.</span></span>

### <a name="setup-in-the-sales-orders-sales-to-supply-chain-management---direct-data-integration-project"></a><span data-ttu-id="d811c-221">Myyntitilaukset (Salesista Supply Chain Managementiin) - suora -integrointiprojektin asetukset</span><span class="sxs-lookup"><span data-stu-id="d811c-221">Setup in the Sales Orders (Sales to Supply Chain Management) - Direct Data integration project</span></span>

- <span data-ttu-id="d811c-222">Varmista, että **Shipto\_country**- ja **DeliveryAddressCountryRegionISOCode**-kohdan välinen yhdistämismääritys on tehty.</span><span class="sxs-lookup"><span data-stu-id="d811c-222">Make sure that the required mapping exists for **Shipto\_country** to **DeliveryAddressCountryRegionISOCode**.</span></span> <span data-ttu-id="d811c-223">Voit määrittää arvomäärityksessä tyhjän oletusarvon, jos haluat välttää maan syöttämisen kansallisissa tilauksissa.</span><span class="sxs-lookup"><span data-stu-id="d811c-223">You can make blank a default value in the value map to avoid having to type country for national orders.</span></span> <span data-ttu-id="d811c-224">Jätä vasen puoli tyhjäksi ja määritä oikean puolen arvoksi haluamasi maa tai alue.</span><span class="sxs-lookup"><span data-stu-id="d811c-224">Set the left side to 'Blank', and set the right side to the desired country or region.</span></span>

    <span data-ttu-id="d811c-225">Malliarvo on arvomääritys, jossa on yhdistetty useita maita tai alueita. Jos kohta jätetään tyhjäksi, arvo on US.</span><span class="sxs-lookup"><span data-stu-id="d811c-225">The template value is a value map where several countries or regions are mapped, and where 'Blank' = US.</span></span>

### <a name="setup-in-the-sales-orders-supply-chain-management-to-sales---direct-data-integration-project"></a><span data-ttu-id="d811c-226">Myyntitilaukset (Supply Chain Managementista Salesiin) - suora -integrointiprojektin asetukset</span><span class="sxs-lookup"><span data-stu-id="d811c-226">Setup in the Sales Orders (Supply Chain Management to Sales) - Direct Data integration project</span></span>

#### <a name="salesheader-task"></a><span data-ttu-id="d811c-227">SalesHeader -tehtävä</span><span class="sxs-lookup"><span data-stu-id="d811c-227">SalesHeader task</span></span>

- <span data-ttu-id="d811c-228">Hinnasto on pakollinen Salesissa, jotta tilauksia voidaan luoda.</span><span class="sxs-lookup"><span data-stu-id="d811c-228">A price list is required in order to create orders in Sales.</span></span> <span data-ttu-id="d811c-229">Päivitä **pricelevelid.name \[hinnaston nimi\]**-kohdan arvomääritykseksi Salesissa käytettävä hinnasto.</span><span class="sxs-lookup"><span data-stu-id="d811c-229">Update the value map for **pricelevelid.name \[Price List Name\]** to the price list that is used in Sales per currency.</span></span> <span data-ttu-id="d811c-230">Yhdelle valuutalle voit käyttää oletushinnastoa.</span><span class="sxs-lookup"><span data-stu-id="d811c-230">You can use the default price list for a single currency.</span></span> <span data-ttu-id="d811c-231">Vaihtoehtoisesti voit käyttää arvomääritystä, jos hinnastossa on useita valuuttoja.</span><span class="sxs-lookup"><span data-stu-id="d811c-231">Alternatively, if you have price lists in multiple currencies, you can use a value map.</span></span>

    <span data-ttu-id="d811c-232">**pricelevelid.name \[hinnaston nimi\]** -kohdan oletusmallin arvo on **CRM Service USA (esimerkki)**.</span><span class="sxs-lookup"><span data-stu-id="d811c-232">The default template value for **pricelevelid.name \[Price List Name\]** is **CRM Service USA (sample)**.</span></span>

#### <a name="salesline-task"></a><span data-ttu-id="d811c-233">SalesLine -tehtävä</span><span class="sxs-lookup"><span data-stu-id="d811c-233">SalesLine task</span></span>

- <span data-ttu-id="d811c-234">Varmista, että Supply Chain Managementin **SalesUnitSymbol**-kohdassa on vaadittu arvomääritys.</span><span class="sxs-lookup"><span data-stu-id="d811c-234">Make sure that the required value map for **SalesUnitSymbol** in Supply Chain Management exists.</span></span>
- <span data-ttu-id="d811c-235">Varmista, että Salesissa on määritetty pakolliset yksiköt.</span><span class="sxs-lookup"><span data-stu-id="d811c-235">Make sure that the required units are defined in Sales.</span></span>

    <span data-ttu-id="d811c-236">**SalesUnitSymbol**-kohdan malliarvoksi, jolla on arvomääritys, on määritetty **oumid.name**.</span><span class="sxs-lookup"><span data-stu-id="d811c-236">A template value that has a value map is defined for **SalesUnitSymbol** to **oumid.name**.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="d811c-237">Mallin yhdistäminen tietojen integroinnin yhteydessä</span><span class="sxs-lookup"><span data-stu-id="d811c-237">Template mapping in Data integration</span></span>

> [!NOTE]
> <span data-ttu-id="d811c-238">**Maksuehdot**-, **Kuljetusehdot**-, **Toimitusehdot**-, **Toimitustapa**- ja **Toimitustila**-kentät eivät sisälly oletusarvoisiin yhdistämismäärityksiin.</span><span class="sxs-lookup"><span data-stu-id="d811c-238">The **Payment terms**, **Freight terms**, **Delivery terms**, **Shipping method**, and **Delivery mode** fields aren't part of the default mappings.</span></span> <span data-ttu-id="d811c-239">Näiden kenttien määrittämistä varten on määritettävä arvomääritys, joka koskee vain niiden organisaatioiden tietoja, joiden välillä yksikkö synkronoidaan.</span><span class="sxs-lookup"><span data-stu-id="d811c-239">To map these fields, you must set up a value mapping that is specific to the data in the organizations that the entity is synchronized between.</span></span>

<span data-ttu-id="d811c-240">Seuraavissa kuvissa on esimerkki mallin yhdistämisestä tietojen integroinnin yhteydessä.</span><span class="sxs-lookup"><span data-stu-id="d811c-240">The following illustrations show an example of a template mapping in Data integration.</span></span>

> [!NOTE]
> <span data-ttu-id="d811c-241">Yhdistämismääritys osoittaa, minkä kentän tiedot synkronoidaan Salesista Supply Chain Managementiin tai Supply Chain Managementista Salesiin.</span><span class="sxs-lookup"><span data-stu-id="d811c-241">The mapping shows which field information will be synchronized from Sales to Supply Chain Management, or from Supply Chain Management to Sales.</span></span>

### <a name="sales-orders-supply-chain-management-to-sales---direct-orderheader"></a><span data-ttu-id="d811c-242">Myyntitilaukset (Supply Chain Managementista Salesiin) - suora: OrderHeader</span><span class="sxs-lookup"><span data-stu-id="d811c-242">Sales Orders (Supply Chain Management to Sales) - Direct: OrderHeader</span></span>

<span data-ttu-id="d811c-243">[![Mallin yhdistäminen tietojen integroinnin yhteydessä](./media/sales-order-direct-template-mapping-data-integrator-1.png)](./media/sales-order-direct-template-mapping-data-integrator-1.png)</span><span class="sxs-lookup"><span data-stu-id="d811c-243">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-1.png)](./media/sales-order-direct-template-mapping-data-integrator-1.png)</span></span>

### <a name="sales-orders-supply-chain-management-to-sales---direct-orderline"></a><span data-ttu-id="d811c-244">Myyntitilaukset (Supply Chain Managementista Salesiin) - suora: OrderLine</span><span class="sxs-lookup"><span data-stu-id="d811c-244">Sales Orders (Supply Chain Management to Sales) - Direct: OrderLine</span></span>

<span data-ttu-id="d811c-245">[![Mallin yhdistäminen tietojen integroinnin yhteydessä](./media/sales-order-direct-template-mapping-data-integrator-2.png)](./media/sales-order-direct-template-mapping-data-integrator-2.png)</span><span class="sxs-lookup"><span data-stu-id="d811c-245">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-2.png)](./media/sales-order-direct-template-mapping-data-integrator-2.png)</span></span>

### <a name="sales-orders-sales-to-supply-chain-management---direct-orderheader"></a><span data-ttu-id="d811c-246">Myyntitilaukset (Salesista Supply Chain Managementiin) - suora: OrderHeader</span><span class="sxs-lookup"><span data-stu-id="d811c-246">Sales Orders (Sales to Supply Chain Management) - Direct: OrderHeader</span></span>

<span data-ttu-id="d811c-247">[![Mallin yhdistäminen tietojen integroinnin yhteydessä](./media/sales-order-direct-template-mapping-data-integrator-3.png)](./media/sales-order-direct-template-mapping-data-integrator-3.png)</span><span class="sxs-lookup"><span data-stu-id="d811c-247">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-3.png)](./media/sales-order-direct-template-mapping-data-integrator-3.png)</span></span>

### <a name="sales-orders-sales-to-supply-chain-management---direct-orderline"></a><span data-ttu-id="d811c-248">Myyntitilaukset (Salesista Supply Chain Managementiin) - suora: OrderLine</span><span class="sxs-lookup"><span data-stu-id="d811c-248">Sales Orders (Sales to Supply Chain Management) - Direct: OrderLine</span></span>

<span data-ttu-id="d811c-249">[![Mallin yhdistäminen tietojen integroinnin yhteydessä](./media/sales-order-direct-template-mapping-data-integrator-4.png)](./media/sales-order-direct-template-mapping-data-integrator-4.png)</span><span class="sxs-lookup"><span data-stu-id="d811c-249">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-4.png)](./media/sales-order-direct-template-mapping-data-integrator-4.png)</span></span>

## <a name="related-topics"></a><span data-ttu-id="d811c-250">Liittyvät aiheet</span><span class="sxs-lookup"><span data-stu-id="d811c-250">Related topics</span></span>

[<span data-ttu-id="d811c-251">Prospektista käteiseksi</span><span class="sxs-lookup"><span data-stu-id="d811c-251">Prospect to cash</span></span>](prospect-to-cash.md)
