---
title: Vähittäismyyntikanavien kirjanpidon integroinnin yleiskatsaus
description: Tämä ohjeaihe on yleiskatsaus Microsoft Dynamics 365 for Retailin kirjanpidoin integrointitoiminnoista.
author: josaw
manager: annbe
ms.date: 02/01/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailFunctionalityProfile, RetailFormLayout, RetailParameters
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Global
ms.search.industry: Retail
ms.author: v-kikozl
ms.search.validFrom: 2019-1-16
ms.dyn365.ops.version: 10
ms.openlocfilehash: 2dc977e3c53b1f15b41b095f586861b67c973a6d
ms.sourcegitcommit: 68df883200b5c477ea1799cc28d3ef467cd29202
ms.translationtype: HT
ms.contentlocale: fi-FI
ms.lasthandoff: 02/07/2019
ms.locfileid: "377132"
---
# <a name="overview-of-fiscal-integration-for-retail-channels"></a><span data-ttu-id="529dd-103">Vähittäismyyntikanavien kirjanpidon integroinnin yleiskatsaus</span><span class="sxs-lookup"><span data-stu-id="529dd-103">Overview of fiscal integration for Retail channels</span></span>

[!include [banner](../includes/banner.md)]

## <a name="introduction"></a><span data-ttu-id="529dd-104">Johdanto</span><span class="sxs-lookup"><span data-stu-id="529dd-104">Introduction</span></span>

<span data-ttu-id="529dd-105">Tämä ohjeaihe on yleiskatsaus Microsoft Dynamics 365 for Retailin kirjanpidoin integrointitoiminnoista.</span><span class="sxs-lookup"><span data-stu-id="529dd-105">This topic is an overview of the fiscal integration capabilities that are available in Microsoft Dynamics 365 for Retail.</span></span> <span data-ttu-id="529dd-106">Kirjanpidon integrointi sisältää sellaisten erilaisten kirjanpidon laitteiden ja palvelujen integroinnin, joilla kirjanpidon rekisteröinti voidaan ottaa vähittäismyynnissä käyttöön paikallisten, vähittäismyyntialan veropetoksia estävän kirjanpitolainsäädännön mukaisesti.</span><span class="sxs-lookup"><span data-stu-id="529dd-106">Fiscal integration includes integration with various fiscal devices and services that enable fiscal registration of retail sales in accordance with local fiscal laws that are aimed at preventing tax fraud in the retail industry.</span></span> <span data-ttu-id="529dd-107">Kirjanpidon integraatiota voidaan esimerkiksi seuraavissa tyypillisissä skenaarioissa:</span><span class="sxs-lookup"><span data-stu-id="529dd-107">Here are some typical scenarios that can be covered by using fiscal integration:</span></span> 

- <span data-ttu-id="529dd-108">Myynnin rekisteröinti kirjanpidon laitteessa, joka on liitetty Retail POS:ään, kuten kuittitulostimeen, ja verokuitin tulostaminen asiakkaalle.</span><span class="sxs-lookup"><span data-stu-id="529dd-108">Register a retail sale on a fiscal device that is connected to Retail point of sale (POS), such as a fiscal printer, and print a fiscal receipt for the customer.</span></span>
- <span data-ttu-id="529dd-109">Retail POS:ssä suoritettuun myyntiin ja palautuksiin liittyvien tietojen lähettäminen turvallisesti ulkoiseen, veroviranomaisen ylläpitämään verkkopalveluun.</span><span class="sxs-lookup"><span data-stu-id="529dd-109">Securely submit information that is related to sales and returns that are completed in Retail POS to an external web-service that is operated by the tax authority.</span></span>
- <span data-ttu-id="529dd-110">Myynnin tapahtumatietojen muuttamattomuuden takaaminen digitaalisella allekirjoituksella.</span><span class="sxs-lookup"><span data-stu-id="529dd-110">Help guarantee inalterability of sales transaction data through digital signatures.</span></span>

<span data-ttu-id="529dd-111">Retailin kirjanpidon integrointitoiminto on kehikko, joka muodostaa yhteisen ratkaisun Retail POS:n sekä kirjanpidoin laitteiden ja palvelujen kehittämiselle ja mukauttamiselle edelleen.</span><span class="sxs-lookup"><span data-stu-id="529dd-111">The fiscal integration functionality in Retail is a framework that provides a common solution for further development and customization of the integration between Retail POS and fiscal devices and services.</span></span> <span data-ttu-id="529dd-112">Toiminto sisältää myös kirjanpidon integrointimalleja, jotka tukevat tiettyjen maiden tai alueiden vähittäismyynnin perusskenaariota ja joita voi käyttää tiettyjen kirjanpidon laitteiden tai palvelujen kanssa.</span><span class="sxs-lookup"><span data-stu-id="529dd-112">The functionality also includes fiscal integration samples that support basic retail scenarios for specific countries or regions, and that work with specific fiscal devices or services.</span></span> <span data-ttu-id="529dd-113">Kirjanpidon integrointimalli koostuu useista Retail-osien laajennuksista, ja se sisältyy Retail SDK:hon.</span><span class="sxs-lookup"><span data-stu-id="529dd-113">A fiscal integration sample consists of several extensions of Retail components and is included in the Retail software development kit (SDK).</span></span> <span data-ttu-id="529dd-114">Lisätietoja Retail SDK:ssa olevista kirjanpidon integrointimalleista on kohdassa [Retail SDK:n kirjanpidon integrointimallit](#fiscal-integration-samples-in-the-retail-sdk).</span><span class="sxs-lookup"><span data-stu-id="529dd-114">For more information about the fiscal integration samples that are available in the Retail SDK, see [Fiscal integration samples in the Retail SDK](#fiscal-integration-samples-in-the-retail-sdk).</span></span> <span data-ttu-id="529dd-115">Lisätietoja Retail SDK:n asentamisesta ja käytöstä on kohdassa [Retail SDK:n yleiskatsaus](../dev-itpro/retail-sdk/retail-sdk-overview.md).</span><span class="sxs-lookup"><span data-stu-id="529dd-115">For information about how to install and use the Retail SDK, see [Retail SDK overview](../dev-itpro/retail-sdk/retail-sdk-overview.md).</span></span>

<span data-ttu-id="529dd-116">Jos haluat tukea skenaarioita, joita kirjanpidon integrointimalli ei tue, integroida Retail POS:n muiden kirjanpidon laitteiden ja palvelujen kanssa tai ottaa huomioon muiden maiden tai alueiden vaatimukset, sinun on joko laajennettava nykyistä kirjanpidon integrointimallia tai luotava uusi malli käyttämällä nykyistä mallia esimerkkinä.</span><span class="sxs-lookup"><span data-stu-id="529dd-116">To support other scenarios that aren't supported by a fiscal integration sample, to integrate Retail POS with other fiscal devices or services, or to cover requirements of other countries or regions, you must either extend an existing fiscal integration sample or create a new sample by using an existing sample as an example.</span></span>

## <a name="fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices"></a><span data-ttu-id="529dd-117">Kirjanpidon rekisteröintiprosessi ja kirjanpidon laitteiden kirjanpidon integrointimallit</span><span class="sxs-lookup"><span data-stu-id="529dd-117">Fiscal registration process and fiscal integration samples for fiscal devices</span></span>

<span data-ttu-id="529dd-118">Retail POS:n kirjanpidon rekisteröintiprosessissa on vähintään yksi vaihe.</span><span class="sxs-lookup"><span data-stu-id="529dd-118">A fiscal registration process in Retail POS can consist of one or more steps.</span></span> <span data-ttu-id="529dd-119">Kukin vaihe koskee tiettyjen vähittäismyyntitransaktioiden tai -tapahtumien kirjanpidon rekisteröintiä yhdessä kirjanpidon laitteessa tai palvelussa.</span><span class="sxs-lookup"><span data-stu-id="529dd-119">Each step involves fiscal registration of specific retail transactions or events in one fiscal device or service.</span></span> <span data-ttu-id="529dd-120">Seuraavan ratkaisun osat koskevat kirjanpidon rekisteröintiä laiteasemaan yhdistetyssä kirjanpidon laitteessa:</span><span class="sxs-lookup"><span data-stu-id="529dd-120">The following solution components participate in the fiscal registration in a fiscal device that is connected to a Hardware station:</span></span>

- <span data-ttu-id="529dd-121">**Commerce runtime (CRT) -laajennus** – Tämä osa sarjoittaa vähittäismyynnin transaktion tai tapahtuman tiedot siinä muodossa, jota käytetään myös tiedonsiirtoon kirjanpidon laitteen kanssa, jäsentää vastaukset kirjanpidon laitteesta ja tallentaa vastaukset kanavatietokantaan.</span><span class="sxs-lookup"><span data-stu-id="529dd-121">**Commerce runtime (CRT) extension** – This component serializes retail transaction/event data in the format that is also used for interaction with the fiscal device, parses responses from the fiscal device, and stores the responses in the channel database.</span></span> <span data-ttu-id="529dd-122">Lisäksi laajennus määrittää, mitkä transaktiot ja tapahtumat on rekisteröitävä.</span><span class="sxs-lookup"><span data-stu-id="529dd-122">The extension also defines the specific transactions and events that must be registered.</span></span> <span data-ttu-id="529dd-123">Tätä osa kutsutaan usein *kirjanpitoasiakirjan toimittajaksi*.</span><span class="sxs-lookup"><span data-stu-id="529dd-123">This component is often referred to as a *fiscal document provider*.</span></span>
- <span data-ttu-id="529dd-124">**Hardware station -laajennus** – Tämä osa käynnistää tiedonsiirron kirjanpidon laitteen kanssa, lähettää pyynnöt ja suorat komennot kirjanpidon laitteeseen kirjanpitoasiakirjasta haettujen vähittäismyynnin transaktion tai tapahtuman tietojen perusteella sekä vastaanottaa vastaukset kirjanpidon laitteesta.</span><span class="sxs-lookup"><span data-stu-id="529dd-124">**Hardware station extension** – This component initializes the communication with the fiscal device, sends requests and direct commands to the fiscal device based on the retail transaction/event data that is extracted from the fiscal document, and receives responses from the fiscal device.</span></span> <span data-ttu-id="529dd-125">Tätä osa kutsutaan usein *kirjanpidon yhdistimeksi*.</span><span class="sxs-lookup"><span data-stu-id="529dd-125">This component is often referred to as a *fiscal connector*.</span></span>

<span data-ttu-id="529dd-126">Kirjanpidon laitteen kirjanpidon integrointimalli sisältää kirjanpitoasiakirjan toimittajan ja kirjanpidon yhdistimen CRT- ja Hardware station -laajennukset.</span><span class="sxs-lookup"><span data-stu-id="529dd-126">A fiscal integration sample for a fiscal device contains the CRT and Hardware station extensions for a fiscal document provider and a fiscal connector, respectively.</span></span> <span data-ttu-id="529dd-127">Lisäksi se sisältää seuraavien osien määritykset:</span><span class="sxs-lookup"><span data-stu-id="529dd-127">It also contains the following component configurations:</span></span>

- <span data-ttu-id="529dd-128">**Kirjanpitoasiakirjan toimittajan määritys** – Tämä määritys määrittää kirjanpitoasiakirjojen tulostusmenetelmän ja -muodon.</span><span class="sxs-lookup"><span data-stu-id="529dd-128">**Fiscal document provider configuration** – This configuration defines an output method and a format for fiscal documents.</span></span> <span data-ttu-id="529dd-129">Lisäksi se sisältää verojen ja maksutapojen tietojen yhdistämisen, jotta Retail POS:n tiedot ovat yhteensopivia kirjanpidon laitteen laiteohjelmassa valmiiksi määritettyjen arvojen kanssa.</span><span class="sxs-lookup"><span data-stu-id="529dd-129">It also contains a data mapping for taxes and payment methods, to make data from Retail POS compatible with the values that are predefined in the fiscal device firmware.</span></span>
- <span data-ttu-id="529dd-130">**Kirjanpidon yhdistimen määritys** – Tämä määritys määrittää tietyn kirjanpidon laitteen fyysisen tiedonsiirron.</span><span class="sxs-lookup"><span data-stu-id="529dd-130">**Fiscal connector configuration** – This configuration defines the physical communication with the specific fiscal device.</span></span>

<span data-ttu-id="529dd-131">Tietyn kassakoneen kirjanpidon rekisteröintiprosessi määritetään myyntipisteen toimintaprofiilin vastaavalla asetuksella.</span><span class="sxs-lookup"><span data-stu-id="529dd-131">A fiscal registration process for a specific POS register is defined by a corresponding setting in the POS functionality profile.</span></span> <span data-ttu-id="529dd-132">Lisätietoja kirjanpidon rekisteröintiprosessin määrittämisestä, kirjanpitoasiakirjan toimittajan ja kirjanpidon yhdistimen määritysten lataamisesta sekä niiden parametrien muuttamisesta on kohdassa [Kirjanpidon rekisteröintiprosessin määrittäminen](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span><span class="sxs-lookup"><span data-stu-id="529dd-132">For more details about how to configure a fiscal registration process, upload fiscal document provider and fiscal connector configurations, and change their parameters, see [Set up a fiscal registration process](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span></span>

<span data-ttu-id="529dd-133">Seuraavassa esimerkissä on tyypillinen kirjanpidon laitteen kirjanpidon rekisteröinnin työnkulku.</span><span class="sxs-lookup"><span data-stu-id="529dd-133">The following example shows a typical fiscal registration execution flow for a fiscal device.</span></span> <span data-ttu-id="529dd-134">Työnkulku alkaa myyntipisteen tapahtumalla (kuten myyntitapahtuman päättämisellä), ja siinä toteutetaan seuraavat vaiheet mainitussa järjestyksessä:</span><span class="sxs-lookup"><span data-stu-id="529dd-134">The flow starts with an event in the POS (for example, finalization of a sales transaction) and implements the following sequence of steps:</span></span>

1. <span data-ttu-id="529dd-135">Myyntipiste pyytää kirjanpitoasiakirjan CRT:stä.</span><span class="sxs-lookup"><span data-stu-id="529dd-135">The POS requests a fiscal document from CRT.</span></span>
2. <span data-ttu-id="529dd-136">CRT selvittää, edellyttääkö nykyinen tapahtuma kirjanpidon rekisteröintiä.</span><span class="sxs-lookup"><span data-stu-id="529dd-136">CRT determines whether the current event requires fiscal registration.</span></span>
3. <span data-ttu-id="529dd-137">CRT tunnistaa kirjanpidon rekisteröintiprosessin asetusten perusteella kirjanpidon rekisteröinnissä käytettävän kirjanpidon yhdistimen ja vastaavan kirjanpitoasiakirjan toimittajan.</span><span class="sxs-lookup"><span data-stu-id="529dd-137">Based on the fiscal registration process settings, CRT identifies a fiscal connector and corresponding fiscal document provider to use for the fiscal registration.</span></span>
4. <span data-ttu-id="529dd-138">CRT suorittaa kirjanpitoasiakirjan toimittajan, joka luo vähittäismyynnin transaktiota tai tapahtuvaa edustavan kirjanpitoasiakirjan (kuten XML-asiakirjan).</span><span class="sxs-lookup"><span data-stu-id="529dd-138">CRT runs the fiscal document provider that generates a fiscal document (for example, an XML document) that represents the retail transaction or event.</span></span>
5. <span data-ttu-id="529dd-139">Myyntipiste lähettää CRT:n valmisteleman kirjanpitoasiakirjan Hardware station -laajennukseen.</span><span class="sxs-lookup"><span data-stu-id="529dd-139">The POS sends the fiscal document that CRT prepares to a Hardware station.</span></span>
6. <span data-ttu-id="529dd-140">Hardware station suorittaa kirjanpidon yhdistimen, joka käsittelee kirjanpitoasiakirjan ja välittää sen kirjanpidon laitteeseen tai palveluun.</span><span class="sxs-lookup"><span data-stu-id="529dd-140">The Hardware station runs the fiscal connector that processes the fiscal document and communicates it to the fiscal device or service.</span></span>
7. <span data-ttu-id="529dd-141">Myyntipiste analysoi kirjanpidon laitteen ja palvelun vastauksen ja määrittää sen perusteella, onnistuiko kirjanpidon rekisteröinti.</span><span class="sxs-lookup"><span data-stu-id="529dd-141">The POS analyzes the response from the fiscal device or service to determine whether the fiscal registration was successful.</span></span>
8. <span data-ttu-id="529dd-142">CRT tallentaa vastauksen kanavatietokantaan.</span><span class="sxs-lookup"><span data-stu-id="529dd-142">CRT saves the response to the channel database.</span></span>

<span data-ttu-id="529dd-143">![Ratkaisumalli](media/emea-fiscal-integration-solution.png "Ratkaisumalli")</span><span class="sxs-lookup"><span data-stu-id="529dd-143">![Solution schema](media/emea-fiscal-integration-solution.png "Solution schema")</span></span>

## <a name="error-handling"></a><span data-ttu-id="529dd-144">Virheen käsittely</span><span class="sxs-lookup"><span data-stu-id="529dd-144">Error handling</span></span>

<span data-ttu-id="529dd-145">Kirjanpidon integrointikehikossa on seuraavat asetukset, joilla voi käsitellä kirjanpidon rekisteröinnin aikana tapahtuvia virheitä:</span><span class="sxs-lookup"><span data-stu-id="529dd-145">The fiscal integration framework provides the following options to handle failures during fiscal registration:</span></span>

- <span data-ttu-id="529dd-146">**Yritä uudelleen** – Käyttäjät voivat käyttää tätä asetusta, kun virhe voidaan ratkaista nopeasti ja kirjanpidon rekisteröinti voidaan suorittaa uudelleen.</span><span class="sxs-lookup"><span data-stu-id="529dd-146">**Retry** – Operators can use this option when the failure can be resolved quickly, and the fiscal registration can be rerun.</span></span> <span data-ttu-id="529dd-147">Tätä asetusta voi käyttää esimerkiksi silloin, kun kirjanpidon laitetta ei ole liitetty, kuittitulostimessa ei ole paperia tai kuittitulostimessa on paperitukos.</span><span class="sxs-lookup"><span data-stu-id="529dd-147">For example, this option can be used when the fiscal device isn't connected, the fiscal printer is out of paper, or there is a paper jam in the fiscal printer.</span></span>
- <span data-ttu-id="529dd-148">**Peruuta** – Käyttäjät voivat siirtää tällä asetuksella nykyisen transaktion tai tapahtuman kirjanpidon rekisteröinnin myöhemmäksi, jos se epäonnistuu.</span><span class="sxs-lookup"><span data-stu-id="529dd-148">**Cancel** – This option lets operators postpone the fiscal registration of the current transaction or event if it fails.</span></span> <span data-ttu-id="529dd-149">Kun rekisteröintiä on siirretty myöhemmäksi, käyttäjä voi jatkaa työskentelyä myyntipisteessä ja suorittaa loppuun toiminnot, joissa kirjanpidon rekisteröintiä ei tarvita.</span><span class="sxs-lookup"><span data-stu-id="529dd-149">After the registration is postponed, the operator can continue to work on the POS and can complete any operation that the fiscal registration isn't required for.</span></span> <span data-ttu-id="529dd-150">Kun myyntipisteessä tapahtuu kirjanpidon rekisteröintiä edellyttävä tapahtuma (avataan esimerkiksi uusi tapahtuma), virheen käsittelyn valintaikkuna avautuu automaattisesti ilmoittamaan, että edellistä tapahtumaan eri rekisteröity oikein. Valintaikkunassa on myös vaihtoehtoja virheen käsittelemiseen.</span><span class="sxs-lookup"><span data-stu-id="529dd-150">When any event that requires the fiscal registration occurs in the POS (for example, a new transaction is opened), the error handling dialog box automatically appears to notify the operator that the previous transaction wasn't correctly registered and to provide the error handling options.</span></span>
- <span data-ttu-id="529dd-151">**Ohita** – Käyttäjä voi käyttää tätä asetusta, kun kirjanpidon rekisteröinti voidaan jättää tekemättä tietyissä tilanteissa ja tavallisia toimintoja voidaan jatkaa myyntipisteessä.</span><span class="sxs-lookup"><span data-stu-id="529dd-151">**Skip** – Operators can use this option when the fiscal registration can be omitted under specific conditions and regular operations can be continued on the POS.</span></span> <span data-ttu-id="529dd-152">Tätä asetusta voidaan käyttää esimerkiksi silloin, kun se myyntitapahtuma, jonka kirjanpidon rekisteröinti epäonnistui, voidaan rekisteröidä erityiseen painettuun kirjauskansioon.</span><span class="sxs-lookup"><span data-stu-id="529dd-152">For example, this option can be used when a sales transaction that the fiscal registration failed for can be registered in a special paper journal.</span></span>
- <span data-ttu-id="529dd-153">**Merkitse rekisteröidyksi** – käyttäjät voivat käyttää tätä asetusta, kun tapahtuma kyllä rekisteröitiin kirjanpidon laitteeseen (esimerkiksi verokuitti tulostettiin), mutta virhe tapahtui, kun kirjanpidon vastausta tallennettiin kanavatietokantaan.</span><span class="sxs-lookup"><span data-stu-id="529dd-153">**Mark as registered** – Operators can use this option when the transaction was actually registered in the fiscal device (for example, a fiscal receipt was printed), but a failure occurred when the fiscal response was being saved to the channel database.</span></span>

> [!NOTE]
> <span data-ttu-id="529dd-154">**Ohita**- ja **Merkitse rekisteröidyksi** -asetukset on aktivoitava kirjanpidon rekisteröintiprosessissa ennen käyttöä.</span><span class="sxs-lookup"><span data-stu-id="529dd-154">The **Skip** and **Mark as registered** options must be activated in the fiscal registration process before they are used.</span></span> <span data-ttu-id="529dd-155">Käyttäjille on myös myönnettävä vastaavat käyttöoikeudet.</span><span class="sxs-lookup"><span data-stu-id="529dd-155">In addition, corresponding permissions must be granted to operators.</span></span>

<span data-ttu-id="529dd-156">**Ohita**- ja **Merkitse rekisteröidyksi** -asetuksella otetaan käyttöön tietokoodit taltioimaan tiettyjä virhettä koskevia tietoja, kuten virheen syy tai oikeutus kirjanpidon rekisteröinnin ohittamiselle tai tapahtuman merkitsemiselle rekisteröidyksi.</span><span class="sxs-lookup"><span data-stu-id="529dd-156">The **Skip** and **Mark as registered** options enable info codes to capture some specific information about the failure, such as the reason for the failure or a justification for skipping the fiscal registration or marking the transaction as registered.</span></span> <span data-ttu-id="529dd-157">Lisätietoja virheen käsittelyparametrien määrittämisestä on kohdassa [Virheen käsittelyasetusten määrittäminen](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="529dd-157">For more details about how to set up error handling parameters, see [Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>

## <a name="storing-fiscal-response-in-fiscal-transaction"></a><span data-ttu-id="529dd-158">Kirjanpidon vastauksen tallentaminen kirjanpitotapahtumassa</span><span class="sxs-lookup"><span data-stu-id="529dd-158">Storing fiscal response in fiscal transaction</span></span>

<span data-ttu-id="529dd-159">Kun transaktion tai tapahtuman kirjanpidon rekisteröinti onnistuu, kirjanpitotapahtuma luodaan kanavatietokannassa ja linkitetään alkuperäiseen transaktioon tai tapahtumaan.</span><span class="sxs-lookup"><span data-stu-id="529dd-159">When fiscal registration of a transaction or event is successful, a fiscal transaction is created in the channel database and linked to the original transaction or event.</span></span> <span data-ttu-id="529dd-160">Vastaavasti jos epäonnistuneelle kirjanpidon rekisteröinnille valitaan **Ohita**- tai **Merkitse rekisteröidyksi** -asetus, tämä tieto tallennetaan kirjanpitotapahtumaan.</span><span class="sxs-lookup"><span data-stu-id="529dd-160">Similarly, if the **Skip** or **Mark as registered** option is selected for a failed fiscal registration, this information is stored in a fiscal transaction.</span></span> <span data-ttu-id="529dd-161">Kirjanpitotapahtuma säilyttää kirjanpidon laitteen tai palvelun kirjanpidon vastauksen.</span><span class="sxs-lookup"><span data-stu-id="529dd-161">A fiscal transaction holds the fiscal response of the fiscal device or service.</span></span> <span data-ttu-id="529dd-162">Jos kirjanpidon rekisteröintiprosessissa on useita vaiheita, kirjanpitotapahtuma luodaan jokaiselle prosessin vaiheelle, jonka seurauksena oli onnistunut tai epäonnistunut rekisteröinti.</span><span class="sxs-lookup"><span data-stu-id="529dd-162">If the fiscal registration process consists of several steps, a fiscal transaction is created for each step of the process that resulted in a successful or failed registration.</span></span>

<span data-ttu-id="529dd-163">*P-työ* siirtää kirjanpitotapahtumat siirretään Retail Headquartersiin yhdessä vähittäismyynnin transaktioiden kanssa.</span><span class="sxs-lookup"><span data-stu-id="529dd-163">Fiscal transactions are transferred to Retail Headquarters by the *P-job*, together with retail transactions.</span></span> <span data-ttu-id="529dd-164">Voit tarkastella **Vähittäismyymälän tapahtumat** -sivun **Tilikauden tapahtumat** -pikavälilehdellä vähittäismyyntitapahtumiin linkitettyjä kirjanpitotapahtumia.</span><span class="sxs-lookup"><span data-stu-id="529dd-164">On the **Fiscal transactions** FastTab of the **Retail store transactions** page, you can view the fiscal transactions that are linked to retail transactions.</span></span>

<span data-ttu-id="529dd-165">Kirjanpitotapahtumaan tallennetaan seuraavat tiedot:</span><span class="sxs-lookup"><span data-stu-id="529dd-165">A fiscal transaction stores the following details:</span></span>

- <span data-ttu-id="529dd-166">Kirjanpidon rekisteröintiprosessin tiedot (kuten prosessi, yhdistinryhmä ja yhdistin).</span><span class="sxs-lookup"><span data-stu-id="529dd-166">Fiscal registration process details (process, connector group, connector, and so on).</span></span> <span data-ttu-id="529dd-167">Siihen tallennetaan myös **Kassakoneen numero** -kentässä oleva kirjanpidon laitteen sarjanumero, jos tämä tieto sisältyy kirjanpidon vastaukseen.</span><span class="sxs-lookup"><span data-stu-id="529dd-167">It also stores the serial number of the fiscal device in the **Register number** field, if this information is included in the fiscal response.</span></span>
- <span data-ttu-id="529dd-168">Kirjanpidon rekisteröinnin tila: **Valmis**, jos rekisteröinti onnistui, **Ohitettu**, jos käyttäjä valitsi epäonnistuneessa rekisteröinnissä **Ohita**-asetuksen, tai **Merkitty rekisteröidyksi**, jos käyttäjä valitse **Merkitse rekisteröidyksi** -asetuksen.</span><span class="sxs-lookup"><span data-stu-id="529dd-168">The status of the fiscal registration: **Completed** for successful registration, **Skipped** if the operator selected the **Skip** option for a failed registration, or **Marked as registered** if the operator selected the **Mark as registered** option.</span></span>
- <span data-ttu-id="529dd-169">Valittuun kirjanpitotapahtumaan liittyvät tietokooditapahtumat.</span><span class="sxs-lookup"><span data-stu-id="529dd-169">Info code transactions that are related to a selected fiscal transaction.</span></span> <span data-ttu-id="529dd-170">Voit tarkastella tietokooditapahtumia valitsemalla **Tilikauden tapahtumat** -pikavälilehdessä ensin kirjanpitotapahtuman, jonka tila on **Ohitettu** tai **Merkitty rekisteröidyksi**, ja sitten **Tietokooditapahtumat**.</span><span class="sxs-lookup"><span data-stu-id="529dd-170">To view the info code transactions, on the **Fiscal transactions** FastTab, select a fiscal transaction that has a status of **Skipped** or **Marked as registered**, and then select **Info code transactions**.</span></span>

## <a name="fiscal-texts-for-discounts"></a><span data-ttu-id="529dd-171">Alennusten kirjanpitotekstit</span><span class="sxs-lookup"><span data-stu-id="529dd-171">Fiscal texts for discounts</span></span>

<span data-ttu-id="529dd-172">Joissakin maissa tai joillakin alueilla on verokuitteihin tulostettavia lisätekstejä koskevia erityisvaatimuksia, kuten käytössä on erilaisia alennuksia.</span><span class="sxs-lookup"><span data-stu-id="529dd-172">Some countries or regions have special requirements about additional texts that must be printed on fiscal receipts when different kinds of discounts are applied.</span></span> <span data-ttu-id="529dd-173">Kirjanpidon integrointitoiminnolla voi määrittää alennusta koskevan erityistekstin, joka tulostetaan verokuitin alennusrivin jälkeen.</span><span class="sxs-lookup"><span data-stu-id="529dd-173">The fiscal integration functionality lets you set up a special text for a discount that is printed after a discount line on a fiscal receipt.</span></span> <span data-ttu-id="529dd-174">Jos kyse on manuaalisesti tehtävistä alennuksista, voit määrittää tietokoodin kirjanpitotekstin myyntipisteen toimintaprofiilissa **Tuotealennus**-tietokoodina.</span><span class="sxs-lookup"><span data-stu-id="529dd-174">For manual discounts, you can configure a fiscal text for the info code that is specified as the **Product discount** info code in the POS functionality profile.</span></span> <span data-ttu-id="529dd-175">Lisätietoja alennusten kirjanpitotekstin määrittämisestä on kohdassa [Alennusten kirjanpitotekstien määrittäminen](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-texts-for-discounts).</span><span class="sxs-lookup"><span data-stu-id="529dd-175">For more details about how to set up fiscal texts for discounts, see [Set up fiscal texts for discounts](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-texts-for-discounts).</span></span>

## <a name="printing-fiscal-x-and-fiscal-z-reports"></a><span data-ttu-id="529dd-176">Kuitti X- ja kuitti Z -raporttien tulostaminen</span><span class="sxs-lookup"><span data-stu-id="529dd-176">Printing fiscal X and fiscal Z reports</span></span>

<span data-ttu-id="529dd-177">Kirjanpidon integrointitoiminto tukee tiettyä integroidun kirjanpidon laitetta tai palvelua koskevan päivän lopun laskelmien luontia:</span><span class="sxs-lookup"><span data-stu-id="529dd-177">Fiscal integration functionality supports generation of end-of-day statements that are specific to the integrated fiscal device or service:</span></span>

- <span data-ttu-id="529dd-178">Uudet painikkeet, joilla kyseiset toiminnot suoritetaan, on lisättävä myyntipisteen näyttöasetteluun.</span><span class="sxs-lookup"><span data-stu-id="529dd-178">New buttons that run corresponding operations should be added to the POS screen layout.</span></span> <span data-ttu-id="529dd-179">Lisätietoja on kohdassa [Kirjanpidon X/Z-raporttien määrittäminen myyntipisteessä](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-xz-reports-from-the-pos).</span><span class="sxs-lookup"><span data-stu-id="529dd-179">For more details, see [Set up fiscal X/Z reports from the POS](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-xz-reports-from-the-pos).</span></span>
- <span data-ttu-id="529dd-180">Kirjanpidon integrointimallissa nämä toiminnot on täsmäytettävä kirjanpidon laitteen vastaaviin toimintoihin.</span><span class="sxs-lookup"><span data-stu-id="529dd-180">In the fiscal integration sample, these operations should be matched to the corresponding operations of the fiscal device.</span></span>

## <a name="fiscal-integration-samples-in-the-retail-sdk"></a><span data-ttu-id="529dd-181">Retail SDK:n kirjanpidon integrointimallit</span><span class="sxs-lookup"><span data-stu-id="529dd-181">Fiscal integration samples in the Retail SDK</span></span>

<span data-ttu-id="529dd-182">Seuraavat kirjanpidon integrointimallit ovat käytettävissä Retailin kanssa julkaistavassa Retail SDK:ssa:</span><span class="sxs-lookup"><span data-stu-id="529dd-182">The following fiscal integration samples are currently available in the Retail SDK that is released with Retail:</span></span>

- [<span data-ttu-id="529dd-183">Kuittitulostimen integrointimalli – Italia</span><span class="sxs-lookup"><span data-stu-id="529dd-183">Fiscal printer integration sample for Italy</span></span>](emea-ita-fpi-sample.md)
- [<span data-ttu-id="529dd-184">Kuittitulostimen integrointimalli – Puola</span><span class="sxs-lookup"><span data-stu-id="529dd-184">Fiscal printer integration sample for Poland</span></span>](emea-pol-fpi-sample.md)

<span data-ttu-id="529dd-185">Myös seuraava kirjanpidon integrointitoiminto on käytettävissä Retail SDK:ssa, mutta se ei tällä hetkellä käytä kirjanpidon integrointikehikkoa.</span><span class="sxs-lookup"><span data-stu-id="529dd-185">The following fiscal integration functionality is also available in the Retail SDK but doesn't currently take advantage of the fiscal integration framework.</span></span> <span data-ttu-id="529dd-186">Tämä toiminto on tarkoitus siirtää kirjanpidon integrointikehikkoon myöhemmissä päivityksissä.</span><span class="sxs-lookup"><span data-stu-id="529dd-186">Migration of this functionality to the fiscal integration framework is planned for later updates.</span></span>

- [<span data-ttu-id="529dd-187">Digitaalinen allekirjoitus Ranskassa</span><span class="sxs-lookup"><span data-stu-id="529dd-187">Digital signature for France</span></span>](emea-fra-cash-registers.md)
- [<span data-ttu-id="529dd-188">Digitaalinen allekirjoitus Norjassa</span><span class="sxs-lookup"><span data-stu-id="529dd-188">Digital signature for Norway</span></span>](emea-nor-cash-registers.md)
- [<span data-ttu-id="529dd-189">Tarkistusyksikön integrointimalli – Ruotsi</span><span class="sxs-lookup"><span data-stu-id="529dd-189">Control unit integration sample for Sweden</span></span>](../dev-itpro/retail-sdk/retail-sdk-control-unit-sample.md)
